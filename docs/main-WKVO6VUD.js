import{A as rn,a as P,b as me,c as u0,d as og,e as N,f as l0,g as Dl,h as d0,i as h0,j as f0,k as sg,l as p0,m as Xa,n as ag,o as Cl,p as g0,q as m0,r as cg,s as Ge,t as ji,u as Kn,v as bl,w as ec,x as y0,y as v0,z as Kr}from"./chunk-L7TVQH4Q.js";function _0(n,e){return Object.is(n,e)}var dt=null,Tl=!1,Sl=1,wr=Symbol("SIGNAL");function be(n){let e=dt;return dt=n,e}function w0(){return dt}var nc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function dg(n){if(Tl)throw new Error("");if(dt===null)return;dt.consumerOnSignalRead(n);let e=dt.nextProducerIndex++;if(Rl(dt),e<dt.producerNode.length&&dt.producerNode[e]!==n&&tc(dt)){let t=dt.producerNode[e];xl(t,dt.producerIndexOfThis[e])}dt.producerNode[e]!==n&&(dt.producerNode[e]=n,dt.producerIndexOfThis[e]=tc(dt)?C0(n,dt,e):0),dt.producerLastReadVersion[e]=n.version}function gP(){Sl++}function E0(n){if(!(tc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Sl)){if(!n.producerMustRecompute(n)&&!fg(n)){n.dirty=!1,n.lastCleanEpoch=Sl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Sl}}function I0(n){if(n.liveConsumerNode===void 0)return;let e=Tl;Tl=!0;try{for(let t of n.liveConsumerNode)t.dirty||mP(t)}finally{Tl=e}}function D0(){return dt?.consumerAllowSignalWrites!==!1}function mP(n){n.dirty=!0,I0(n),n.consumerMarkedDirty?.(n)}function Ml(n){return n&&(n.nextProducerIndex=0),be(n)}function hg(n,e){if(be(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(tc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)xl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function fg(n){Rl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(E0(t),r!==t.version))return!0}return!1}function pg(n){if(Rl(n),tc(n))for(let e=0;e<n.producerNode.length;e++)xl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function C0(n,e,t){if(b0(n),n.liveConsumerNode.length===0&&T0(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=C0(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function xl(n,e){if(b0(n),n.liveConsumerNode.length===1&&T0(n))for(let r=0;r<n.producerNode.length;r++)xl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Rl(i),i.producerIndexOfThis[r]=e}}function tc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Rl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function b0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function T0(n){return n.producerNode!==void 0}function S0(n){let e=Object.create(yP);e.computation=n;let t=()=>{if(E0(e),dg(e),e.value===Al)throw e.error;return e.value};return t[wr]=e,t}var ug=Symbol("UNSET"),lg=Symbol("COMPUTING"),Al=Symbol("ERRORED"),yP=me(P({},nc),{value:ug,dirty:!0,error:null,equal:_0,producerMustRecompute(n){return n.value===ug||n.value===lg},producerRecomputeValue(n){if(n.value===lg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=lg;let t=Ml(n),r;try{r=n.computation()}catch(i){r=Al,n.error=i}finally{hg(n,t)}if(e!==ug&&e!==Al&&r!==Al&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function vP(){throw new Error}var A0=vP;function M0(){A0()}function x0(n){A0=n}var _P=null;function R0(n){let e=Object.create(P0);e.value=n;let t=()=>(dg(e),e.value);return t[wr]=e,t}function gg(n,e){D0()||M0(),n.equal(n.value,e)||(n.value=e,wP(n))}function N0(n,e){D0()||M0(),gg(n,e(n.value))}var P0=me(P({},nc),{equal:_0,value:void 0});function wP(n){n.version++,gP(),I0(n),_P?.()}function ae(n){return typeof n=="function"}function Go(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Nl=Go(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ui(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof Nl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{k0(o)}catch(s){e=e??[],s instanceof Nl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Nl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)k0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ui(t,e)}remove(e){let{_finalizers:t}=this;t&&Ui(t,e),e instanceof n&&e._removeParent(this)}};Ze.EMPTY=(()=>{let n=new Ze;return n.closed=!0,n})();var mg=Ze.EMPTY;function Pl(n){return n instanceof Ze||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function k0(n){ae(n)?n():n.unsubscribe()}var xn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wo={setTimeout(n,e,...t){let{delegate:r}=Wo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Wo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function kl(n){Wo.setTimeout(()=>{let{onUnhandledError:e}=xn;if(e)e(n);else throw n})}function rc(){}var O0=yg("C",void 0,void 0);function F0(n){return yg("E",void 0,n)}function V0(n){return yg("N",n,void 0)}function yg(n,e,t){return{kind:n,value:e,error:t}}var Bi=null;function Ko(n){if(xn.useDeprecatedSynchronousErrorHandling){let e=!Bi;if(e&&(Bi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Bi;if(Bi=null,t)throw r}}else n()}function L0(n){xn.useDeprecatedSynchronousErrorHandling&&Bi&&(Bi.errorThrown=!0,Bi.error=n)}var $i=class extends Ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Pl(e)&&e.add(this)):this.destination=DP}static create(e,t,r){return new Er(e,t,r)}next(e){this.isStopped?_g(V0(e),this):this._next(e)}error(e){this.isStopped?_g(F0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_g(O0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},EP=Function.prototype.bind;function vg(n,e){return EP.call(n,e)}var wg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ol(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ol(r)}else Ol(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ol(t)}}},Er=class extends $i{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&xn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vg(e.next,o),error:e.error&&vg(e.error,o),complete:e.complete&&vg(e.complete,o)}):i=e}this.destination=new wg(i)}};function Ol(n){xn.useDeprecatedSynchronousErrorHandling?L0(n):kl(n)}function IP(n){throw n}function _g(n,e){let{onStoppedNotification:t}=xn;t&&Wo.setTimeout(()=>t(n,e))}var DP={closed:!0,next:rc,error:IP,complete:rc};var Qo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ot(n){return n}function Eg(...n){return Ig(n)}function Ig(n){return n.length===0?Ot:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=bP(t)?t:new Er(t,r,i);return Ko(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=j0(r),new r((i,o)=>{let s=new Er({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Qo](){return this}pipe(...t){return Ig(t)(this)}toPromise(t){return t=j0(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function j0(n){var e;return(e=n??xn.Promise)!==null&&e!==void 0?e:Promise}function CP(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function bP(n){return n&&n instanceof $i||CP(n)&&Pl(n)}function Dg(n){return ae(n?.lift)}function fe(n){return e=>{if(Dg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(n,e,t,r,i){return new Cg(n,e,t,r,i)}var Cg=class extends $i{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Yo(){return fe((n,e)=>{let t=null;n._refCount++;let r=pe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Zo=class extends ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Dg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ze;let t=this.getSubject();e.add(this.source.subscribe(pe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ze.EMPTY)}return e}refCount(){return Yo()(this)}};var U0=Go(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Fl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new U0}next(t){Ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?mg:(this.currentObservers=null,o.push(t),new Ze(()=>{this.currentObservers=null,Ui(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ye;return t.source=this,t}}return n.create=(e,t)=>new Fl(e,t),n})(),Fl=class extends ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:mg}};var Et=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ic={now(){return(ic.delegate||Date).now()},delegate:void 0};var Vl=class extends ze{constructor(e=1/0,t=1/0,r=ic){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Ll=class extends Ze{constructor(e,t){super()}schedule(e,t=0){return this}};var oc={setInterval(n,e,...t){let{delegate:r}=oc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=oc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Jo=class extends Ll{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return oc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&oc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ui(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Xo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Xo.now=ic.now;var es=class extends Xo{constructor(e,t=Xo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var sc=new es(Jo);var jl=class extends Jo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Ul=class extends es{};var bg=new Ul(jl);var Ft=new ye(n=>n.complete());function B0(n){return n&&ae(n.schedule)}function Tg(n){return n[n.length-1]}function Bl(n){return ae(Tg(n))?n.pop():void 0}function Qn(n){return B0(Tg(n))?n.pop():void 0}function $0(n,e){return typeof Tg(n)=="number"?n.pop():e}var $l=n=>n&&typeof n.length=="number"&&typeof n!="function";function zl(n){return ae(n?.then)}function Hl(n){return ae(n[Qo])}function ql(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function Gl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function TP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wl=TP();function Kl(n){return ae(n?.[Wl])}function Ql(n){return d0(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Dl(t.read());if(i)return yield Dl(void 0);yield yield Dl(r)}}finally{t.releaseLock()}})}function Yl(n){return ae(n?.getReader)}function Ue(n){if(n instanceof ye)return n;if(n!=null){if(Hl(n))return SP(n);if($l(n))return AP(n);if(zl(n))return MP(n);if(ql(n))return z0(n);if(Kl(n))return xP(n);if(Yl(n))return RP(n)}throw Gl(n)}function SP(n){return new ye(e=>{let t=n[Qo]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function AP(n){return new ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function MP(n){return new ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,kl)})}function xP(n){return new ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function z0(n){return new ye(e=>{NP(n,e).catch(t=>e.error(t))})}function RP(n){return z0(Ql(n))}function NP(n,e){var t,r,i,o;return l0(this,void 0,void 0,function*(){try{for(t=h0(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function qt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function wn(n,e=0){return fe((t,r)=>{t.subscribe(pe(r,i=>qt(r,n,()=>r.next(i),e),()=>qt(r,n,()=>r.complete(),e),i=>qt(r,n,()=>r.error(i),e)))})}function Rn(n,e=0){return fe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function H0(n,e){return Ue(n).pipe(Rn(e),wn(e))}function q0(n,e){return Ue(n).pipe(Rn(e),wn(e))}function G0(n,e){return new ye(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function W0(n,e){return new ye(t=>{let r;return qt(t,e,()=>{r=n[Wl](),qt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function Zl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ye(t=>{qt(t,e,()=>{let r=n[Symbol.asyncIterator]();qt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function K0(n,e){return Zl(Ql(n),e)}function Q0(n,e){if(n!=null){if(Hl(n))return H0(n,e);if($l(n))return G0(n,e);if(zl(n))return q0(n,e);if(ql(n))return Zl(n,e);if(Kl(n))return W0(n,e);if(Yl(n))return K0(n,e)}throw Gl(n)}function Ie(n,e){return e?Q0(n,e):Ue(n)}function ee(...n){let e=Qn(n);return Ie(n,e)}function ts(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new ye(e?i=>e.schedule(r,0,i):r)}function Sg(n){return!!n&&(n instanceof ye||ae(n.lift)&&ae(n.subscribe))}var Ir=Go(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(n,e){return fe((t,r)=>{let i=0;t.subscribe(pe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:PP}=Array;function kP(n,e){return PP(e)?n(...e):n(e)}function Jl(n){return Q(e=>kP(n,e))}var{isArray:OP}=Array,{getPrototypeOf:FP,prototype:VP,keys:LP}=Object;function Xl(n){if(n.length===1){let e=n[0];if(OP(e))return{args:e,keys:null};if(jP(e)){let t=LP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function jP(n){return n&&typeof n=="object"&&FP(n)===VP}function ed(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ac(...n){let e=Qn(n),t=Bl(n),{args:r,keys:i}=Xl(n);if(r.length===0)return Ie([],e);let o=new ye(UP(r,e,i?s=>ed(i,s):Ot));return t?o.pipe(Jl(t)):o}function UP(n,e,t=Ot){return r=>{Y0(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Y0(e,()=>{let l=Ie(n[c],e),h=!1;l.subscribe(pe(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Y0(n,e,t){n?qt(t,n,e):e()}function Z0(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},y=A=>l<r?D(A):c.push(A),D=A=>{o&&e.next(A),l++;let M=!1;Ue(t(A,h++)).subscribe(pe(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let j=c.shift();s?qt(e,s,()=>D(j)):D(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(pe(e,y,()=>{p=!0,m()})),()=>{a?.()}}function it(n,e,t=1/0){return ae(e)?it((r,i)=>Q((o,s)=>e(r,o,i,s))(Ue(n(r,i))),t):(typeof e=="number"&&(t=e),fe((r,i)=>Z0(r,i,n,t)))}function Qr(n=1/0){return it(Ot,n)}function J0(){return Qr(1)}function ns(...n){return J0()(Ie(n,Qn(n)))}function td(n){return new ye(e=>{Ue(n()).subscribe(e)})}function Ag(...n){let e=Bl(n),{args:t,keys:r}=Xl(n),i=new ye(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let h=0;h<s;h++){let p=!1;Ue(t[h]).subscribe(pe(o,m=>{p||(p=!0,l--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?ed(r,a):a),o.complete())}))}});return e?i.pipe(Jl(e)):i}function Mg(...n){let e=Qn(n),t=$0(n,1/0),r=n;return r.length?r.length===1?Ue(r[0]):Qr(t)(Ie(r,e)):Ft}function pt(n,e){return fe((t,r)=>{let i=0;t.subscribe(pe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Yr(n){return fe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(pe(t,void 0,void 0,s=>{o=Ue(n(s,Yr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function X0(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(pe(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Zr(n,e){return ae(e)?it(n,e,1):it(n,1)}function Jr(n){return fe((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Dr(n){return n<=0?()=>Ft:fe((e,t)=>{let r=0;e.subscribe(pe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function xg(n){return Q(()=>n)}function Rg(n,e=Ot){return n=n??BP,fe((t,r)=>{let i,o=!0;t.subscribe(pe(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function BP(n,e){return n===e}function nd(n=$P){return fe((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function $P(){return new Ir}function rs(n){return fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function on(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):Ot,Dr(1),t?Jr(e):nd(()=>new Ir))}function is(n){return n<=0?()=>Ft:fe((e,t)=>{let r=[];e.subscribe(pe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ng(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):Ot,is(1),t?Jr(e):nd(()=>new Ir))}function cc(){return fe((n,e)=>{let t,r=!1;n.subscribe(pe(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function zi(n,e){return fe(X0(n,e,arguments.length>=2,!0))}function eD(n={}){let{connector:e=()=>new ze,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=c=void 0,h=p=!1},D=()=>{let A=s;y(),A?.unsubscribe()};return fe((A,M)=>{l++,!p&&!h&&m();let j=c=c??e();M.add(()=>{l--,l===0&&!p&&!h&&(a=Pg(D,i))}),j.subscribe(M),!s&&l>0&&(s=new Er({next:q=>j.next(q),error:q=>{p=!0,m(),a=Pg(y,t,q),j.error(q)},complete:()=>{h=!0,m(),a=Pg(y,r),j.complete()}}),Ue(A).subscribe(s))})(o)}}function Pg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Er({next:()=>{r.unsubscribe(),n()}});return Ue(e(...t)).subscribe(r)}function rd(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,eD({connector:()=>new Vl(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Hi(...n){let e=Qn(n);return fe((t,r)=>{(e?ns(n,t,e):ns(n,t)).subscribe(r)})}function We(n,e){return fe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(pe(r,c=>{i?.unsubscribe();let l=0,h=o++;Ue(n(c,h)).subscribe(i=pe(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function id(n,e){return ae(e)?We(()=>n,e):We(()=>n)}function kg(n){return fe((e,t)=>{Ue(n).subscribe(pe(t,()=>t.complete(),rc)),!t.closed&&e.subscribe(t)})}function Xe(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?fe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(pe(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ot}var $D="https://g.co/ng/security#xss",Z=class extends Error{constructor(e,t){super(Kd(e,t)),this.code=e}};function Kd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function wc(n){return{toString:n}.toString()}var od="__parameters__";function zP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function zD(n,e,t){return wc(()=>{let r=zP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(od)?c[od]:Object.defineProperty(c,od,{value:[]})[od];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var On=globalThis;function Oe(n){for(let e in n)if(n[e]===Oe)return e;throw Error("Could not find renamed property on target object.")}function HP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Gt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Gt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function tD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var qP=Oe({__forward_ref__:Oe});function Ds(n){return n.__forward_ref__=Ds,n.toString=function(){return Gt(this())},n}function Vt(n){return HD(n)?n():n}function HD(n){return typeof n=="function"&&n.hasOwnProperty(qP)&&n.__forward_ref__===Ds}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function gt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Qd(n){return nD(n,GD)||nD(n,WD)}function qD(n){return Qd(n)!==null}function nD(n,e){return n.hasOwnProperty(e)?n[e]:null}function GP(n){let e=n&&(n[GD]||n[WD]);return e||null}function rD(n){return n&&(n.hasOwnProperty(iD)||n.hasOwnProperty(WP))?n[iD]:null}var GD=Oe({\u0275prov:Oe}),iD=Oe({\u0275inj:Oe}),WD=Oe({ngInjectableDef:Oe}),WP=Oe({ngInjectorDef:Oe}),G=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function KD(n){return n&&!!n.\u0275providers}var KP=Oe({\u0275cmp:Oe}),QP=Oe({\u0275dir:Oe}),YP=Oe({\u0275pipe:Oe}),ZP=Oe({\u0275mod:Oe}),yd=Oe({\u0275fac:Oe}),dc=Oe({__NG_ELEMENT_ID__:Oe}),oD=Oe({__NG_ENV_ID__:Oe});function Yn(n){return typeof n=="string"?n:n==null?"":String(n)}function JP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Yn(n)}function XP(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Z(-200,n)}function jm(n,e){throw new Z(-201,!1)}var ge=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ge||{}),Yg;function QD(){return Yg}function En(n){let e=Yg;return Yg=n,e}function YD(n,e,t){let r=Qd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ge.Optional)return null;if(e!==void 0)return e;jm(n,"Injector")}var e1={},fc=e1,Zg="__NG_DI_FLAG__",vd="ngTempTokenPath",t1="ngTokenPath",n1=/\n/gm,r1="\u0275",sD="__source",us;function i1(){return us}function Xr(n){let e=us;return us=n,e}function o1(n,e=ge.Default){if(us===void 0)throw new Z(-203,!1);return us===null?YD(n,void 0,e):us.get(n,e&ge.Optional?null:void 0,e)}function F(n,e=ge.Default){return(QD()||o1)(Vt(n),e)}function V(n,e=ge.Default){return F(n,Yd(e))}function Yd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Jg(n){let e=[];for(let t=0;t<n.length;t++){let r=Vt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,o=ge.Default;for(let s=0;s<r.length;s++){let a=r[s],c=s1(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(F(i,o))}else e.push(F(r))}return e}function ZD(n,e){return n[Zg]=e,n.prototype[Zg]=e,n}function s1(n){return n[Zg]}function a1(n,e,t,r){let i=n[vd];throw e[sD]&&i.unshift(e[sD]),n.message=c1(`
`+n.message,i,t,r),n[t1]=i,n[vd]=null,n}function c1(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==r1?n.slice(2):n;let i=Gt(e);if(Array.isArray(e))i=e.map(Gt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Gt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(n1,`
  `)}`}var Cs=ZD(zD("Optional"),8);var Um=ZD(zD("SkipSelf"),4);function ds(n,e){let t=n.hasOwnProperty(yd);return t?n[yd]:null}function Bm(n,e){n.forEach(t=>Array.isArray(t)?Bm(t,e):e(t))}function JD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function _d(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function u1(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function l1(n,e,t){let r=Ec(n,e);return r>=0?n[r|1]=t:(r=~r,u1(n,r,e,t)),r}function Og(n,e){let t=Ec(n,e);if(t>=0)return n[t|1]}function Ec(n,e){return d1(n,e,1)}function d1(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var hs={},sn=[],Gi=new G(""),XD=new G("",-1),eC=new G(""),wd=class{get(e,t=fc){if(t===fc){let r=new Error(`NullInjectorError: No provider for ${Gt(e)}!`);throw r.name="NullInjectorError",r}return t}},tC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(tC||{}),Xn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Xn||{}),ti=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ti||{});function h1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Xg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];f1(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function nC(n){return n===3||n===4||n===6}function f1(n){return n.charCodeAt(0)===64}function pc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?aD(n,t,i,null,e[++r]):aD(n,t,i,null,null))}}return n}function aD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var rC="ng-template";function p1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&h1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if($m(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function $m(n){return n.type===4&&n.value!==rC}function g1(n,e,t){let r=n.type===4&&!t?rC:n.value;return e===r}function m1(n,e,t){let r=4,i=n.attrs,o=i!==null?_1(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Nn(r)&&!Nn(c))return!1;if(s&&Nn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!g1(n,c,t)||c===""&&e.length===1){if(Nn(r))return!1;s=!0}}else if(r&8){if(i===null||!p1(n,i,c,t)){if(Nn(r))return!1;s=!0}}else{let l=e[++a],h=y1(c,i,$m(n),t);if(h===-1){if(Nn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Nn(r))return!1;s=!0}}}}return Nn(r)||s}function Nn(n){return(n&1)===0}function y1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return w1(e,n)}function v1(n,e,t=!1){for(let r=0;r<e.length;r++)if(m1(n,e[r],t))return!0;return!1}function _1(n){for(let e=0;e<n.length;e++){let t=n[e];if(nC(t))return e}return n.length}function w1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function cD(n,e){return n?":not("+e.trim()+")":e}function E1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Nn(s)&&(e+=cD(o,i),i=""),r=s,o=o||!Nn(r);t++}return i!==""&&(e+=cD(o,i)),e}function I1(n){return n.map(E1).join(",")}function D1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Nn(i))break;i=o}r++}return{attrs:e,classes:t}}function mt(n){return wc(()=>{let e=cC(n),t=me(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===tC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xn.Emulated,styles:n.styles||sn,_:null,schemas:n.schemas||null,tView:null,id:""});uC(t);let r=n.dependencies;return t.directiveDefs=lD(r,!1),t.pipeDefs=lD(r,!0),t.id=T1(t),t})}function C1(n){return ni(n)||iC(n)}function b1(n){return n!==null}function yt(n){return wc(()=>({type:n.type,bootstrap:n.bootstrap||sn,declarations:n.declarations||sn,imports:n.imports||sn,exports:n.exports||sn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function uD(n,e){if(n==null)return hs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=ti.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==ti.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Qt(n){return wc(()=>{let e=cC(n);return uC(e),e})}function ni(n){return n[KP]||null}function iC(n){return n[QP]||null}function oC(n){return n[YP]||null}function sC(n){let e=ni(n)||iC(n)||oC(n);return e!==null?e.standalone:!1}function aC(n,e){let t=n[ZP]||null;if(!t&&e===!0)throw new Error(`Type ${Gt(n)} does not have '\u0275mod' property.`);return t}function cC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||hs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||sn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uD(n.inputs,e),outputs:uD(n.outputs),debugInfo:null}}function uC(n){n.features?.forEach(e=>e(n))}function lD(n,e){if(!n)return null;let t=e?oC:C1;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(b1)}function T1(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ic(n){return{\u0275providers:n}}function S1(...n){return{\u0275providers:lC(!0,n),\u0275fromNgModule:!0}}function lC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Bm(e,s=>{let a=s;em(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&dC(i,o),t}function dC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];zm(i,o=>{e(o,r)})}}function em(n,e,t,r){if(n=Vt(n),!n)return!1;let i=null,o=rD(n),s=!o&&ni(n);if(!o&&!s){let c=n.ngModule;if(o=rD(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)em(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Bm(o.imports,h=>{em(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&dC(l,e)}if(!a){let l=ds(i)||(()=>new i);e({provide:i,useFactory:l,deps:sn},i),e({provide:eC,useValue:i,multi:!0},i),e({provide:Gi,useValue:()=>F(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;zm(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function zm(n,e){for(let t of n)KD(t)&&(t=t.\u0275providers),Array.isArray(t)?zm(t,e):e(t)}var A1=Oe({provide:String,useValue:Oe});function hC(n){return n!==null&&typeof n=="object"&&A1 in n}function M1(n){return!!(n&&n.useExisting)}function x1(n){return!!(n&&n.useFactory)}function fs(n){return typeof n=="function"}function R1(n){return!!n.useClass}var Zd=new G(""),fd={},N1={},Fg;function Hm(){return Fg===void 0&&(Fg=new wd),Fg}var cn=class{},gc=class extends cn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nm(e,s=>this.processProvider(s)),this.records.set(XD,os(void 0,this)),i.has("environment")&&this.records.set(cn,os(void 0,this));let o=this.records.get(Zd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(eC,sn,ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=be(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),be(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Xr(this),r=En(void 0),i;try{return e()}finally{Xr(t),En(r)}}get(e,t=fc,r=ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(oD))return e[oD](this);r=Yd(r);let i,o=Xr(this),s=En(void 0);try{if(!(r&ge.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=V1(e)&&Qd(e);l&&this.injectableDefInScope(l)?c=os(tm(e),fd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ge.Self?Hm():this.parent;return t=r&ge.Optional&&t===fc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[vd]=a[vd]||[]).unshift(Gt(e)),o)throw a;return a1(a,e,"R3InjectorError",this.source)}else throw a}finally{En(s),Xr(o)}}resolveInjectorInitializers(){let e=be(null),t=Xr(this),r=En(void 0),i;try{let o=this.get(Gi,sn,ge.Self);for(let s of o)s()}finally{Xr(t),En(r),be(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Gt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Z(205,!1)}processProvider(e){e=Vt(e);let t=fs(e)?e:Vt(e&&e.provide),r=k1(e);if(!fs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=os(void 0,fd,!0),i.factory=()=>Jg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=be(null);try{return t.value===fd&&(t.value=N1,t.value=t.factory()),typeof t.value=="object"&&t.value&&F1(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{be(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Vt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function tm(n){let e=Qd(n),t=e!==null?e.factory:ds(n);if(t!==null)return t;if(n instanceof G)throw new Z(204,!1);if(n instanceof Function)return P1(n);throw new Z(204,!1)}function P1(n){if(n.length>0)throw new Z(204,!1);let t=GP(n);return t!==null?()=>t.factory(n):()=>new n}function k1(n){if(hC(n))return os(void 0,n.useValue);{let e=fC(n);return os(e,fd)}}function fC(n,e,t){let r;if(fs(n)){let i=Vt(n);return ds(i)||tm(i)}else if(hC(n))r=()=>Vt(n.useValue);else if(x1(n))r=()=>n.useFactory(...Jg(n.deps||[]));else if(M1(n))r=()=>F(Vt(n.useExisting));else{let i=Vt(n&&(n.useClass||n.provide));if(O1(n))r=()=>new i(...Jg(n.deps));else return ds(i)||tm(i)}return r}function os(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function O1(n){return!!n.deps}function F1(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function V1(n){return typeof n=="function"||typeof n=="object"&&n instanceof G}function nm(n,e){for(let t of n)Array.isArray(t)?nm(t,e):t&&KD(t)?nm(t.\u0275providers,e):e(t)}function Ln(n,e){n instanceof gc&&n.assertNotDestroyed();let t,r=Xr(n),i=En(void 0);try{return e()}finally{Xr(r),En(i)}}function pC(){return QD()!==void 0||i1()!=null}function L1(n){if(!pC())throw new Z(-203,!1)}function j1(n){let e=On.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function U1(n){return typeof n=="function"}var un=0,ve=1,ce=2,Mt=3,Pn=4,jn=5,er=6,Ed=7,Fn=8,ps=9,tr=10,He=11,mc=12,dD=13,bs=14,Dn=15,gs=16,ss=17,ms=18,Jd=19,gC=20,ei=21,Vg=22,In=23,Wt=25,mC=1,yc=6,Cr=7,Id=8,Dd=9,an=10,Cd=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Cd||{});function kn(n){return Array.isArray(n)&&typeof n[mC]=="object"}function nr(n){return Array.isArray(n)&&n[mC]===!0}function yC(n){return(n.flags&4)!==0}function Dc(n){return n.componentOffset>-1}function qm(n){return(n.flags&1)===1}function ri(n){return!!n.template}function bd(n){return(n[ce]&512)!==0}var rm=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function vC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function eo(){return _C}function _C(n){return n.type.prototype.ngOnChanges&&(n.setInput=$1),B1}eo.ngInherit=!0;function B1(){let n=EC(this),e=n?.current;if(e){let t=n.previous;if(t===hs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function $1(n,e,t,r,i){let o=this.declaredInputs[r],s=EC(n)||z1(n,{previous:hs,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new rm(l&&l.currentValue,t,c===hs),vC(n,e,i,t)}var wC="__ngSimpleChanges__";function EC(n){return n[wC]||null}function z1(n,e){return n[wC]=e}var hD=null;var Zn=function(n,e,t){hD?.(n,e,t)},H1="svg",q1="math";function Vn(n){for(;Array.isArray(n);)n=n[un];return n}function IC(n,e){return Vn(e[n])}function ln(n,e){return Vn(e[n.index])}function DC(n,e){return n.data[e]}function oi(n,e){let t=e[n];return kn(t)?t:t[un]}function Gm(n){return(n[ce]&128)===128}function G1(n){return nr(n[Mt])}function Td(n,e){return e==null?null:n[e]}function CC(n){n[ss]=0}function bC(n){n[ce]&1024||(n[ce]|=1024,Gm(n)&&eh(n))}function W1(n,e){for(;n>0;)e=e[bs],n--;return e}function Xd(n){return!!(n[ce]&9216||n[In]?.dirty)}function im(n){n[tr].changeDetectionScheduler?.notify(8),n[ce]&64&&(n[ce]|=1024),Xd(n)&&eh(n)}function eh(n){n[tr].changeDetectionScheduler?.notify(0);let e=Wi(n);for(;e!==null&&!(e[ce]&8192||(e[ce]|=8192,!Gm(e)));)e=Wi(e)}function TC(n,e){if((n[ce]&256)===256)throw new Z(911,!1);n[ei]===null&&(n[ei]=[]),n[ei].push(e)}function K1(n,e){if(n[ei]===null)return;let t=n[ei].indexOf(e);t!==-1&&n[ei].splice(t,1)}function Wi(n){let e=n[Mt];return nr(e)?e[Mt]:e}var _e={lFrame:FC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var SC=!1;function Q1(){return _e.lFrame.elementDepthCount}function Y1(){_e.lFrame.elementDepthCount++}function Z1(){_e.lFrame.elementDepthCount--}function AC(){return _e.bindingsEnabled}function Cc(){return _e.skipHydrationRootTNode!==null}function J1(n){return _e.skipHydrationRootTNode===n}function X1(n){_e.skipHydrationRootTNode=n}function ek(){_e.skipHydrationRootTNode=null}function Fe(){return _e.lFrame.lView}function dn(){return _e.lFrame.tView}function re(n){return _e.lFrame.contextLView=n,n[Fn]}function ie(n){return _e.lFrame.contextLView=null,n}function Lt(){let n=MC();for(;n!==null&&n.type===64;)n=n.parent;return n}function MC(){return _e.lFrame.currentTNode}function tk(){let n=_e.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function bc(n,e){let t=_e.lFrame;t.currentTNode=n,t.isParent=e}function xC(){return _e.lFrame.isParent}function nk(){_e.lFrame.isParent=!1}function RC(){return SC}function fD(n){SC=n}function NC(){return _e.lFrame.bindingIndex}function rk(n){return _e.lFrame.bindingIndex=n}function th(){return _e.lFrame.bindingIndex++}function Wm(n){let e=_e.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ik(){return _e.lFrame.inI18n}function ok(n,e){let t=_e.lFrame;t.bindingIndex=t.bindingRootIndex=n,om(e)}function sk(){return _e.lFrame.currentDirectiveIndex}function om(n){_e.lFrame.currentDirectiveIndex=n}function ak(n){let e=_e.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function PC(n){_e.lFrame.currentQueryIndex=n}function ck(n){let e=n[ve];return e.type===2?e.declTNode:e.type===1?n[jn]:null}function kC(n,e,t){if(t&ge.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ge.Host);)if(i=ck(o),i===null||(o=o[bs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=_e.lFrame=OC();return r.currentTNode=e,r.lView=n,!0}function Km(n){let e=OC(),t=n[ve];_e.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function OC(){let n=_e.lFrame,e=n===null?null:n.child;return e===null?FC(n):e}function FC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function VC(){let n=_e.lFrame;return _e.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var LC=VC;function Qm(){let n=VC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function uk(n){return(_e.lFrame.contextLView=W1(n,_e.lFrame.contextLView))[Fn]}function si(){return _e.lFrame.selectedIndex}function Ki(n){_e.lFrame.selectedIndex=n}function Ym(){let n=_e.lFrame;return DC(n.tView,n.selectedIndex)}function jC(){return _e.lFrame.currentNamespace}var UC=!0;function Zm(){return UC}function ai(n){UC=n}function lk(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=_C(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Jm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function pd(n,e,t){BC(n,e,3,t)}function gd(n,e,t,r){(n[ce]&3)===t&&BC(n,e,t,r)}function Lg(n,e){let t=n[ce];(t&3)===e&&(t&=16383,t+=1,n[ce]=t)}function BC(n,e,t,r){let i=r!==void 0?n[ss]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ss]+=65536),(a<o||o==-1)&&(dk(n,t,e,c),n[ss]=(n[ss]&4294901760)+c+2),c++}function pD(n,e){Zn(4,n,e);let t=be(null);try{e.call(n)}finally{be(t),Zn(5,n,e)}}function dk(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ce]>>14<n[ss]>>16&&(n[ce]&3)===e&&(n[ce]+=16384,pD(a,o)):pD(a,o)}var ls=-1,Qi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function hk(n){return n instanceof Qi}function fk(n){return(n.flags&8)!==0}function pk(n){return(n.flags&16)!==0}var jg={},sm=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Yd(r);let i=this.injector.get(e,jg,r);return i!==jg||t===jg?i:this.parentInjector.get(e,t,r)}};function $C(n){return n!==ls}function Sd(n){return n&32767}function gk(n){return n>>16}function Ad(n,e){let t=gk(n),r=e;for(;t>0;)r=r[bs],t--;return r}var am=!0;function gD(n){let e=am;return am=n,e}var mk=256,zC=mk-1,HC=5,yk=0,Jn={};function vk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(dc)&&(r=t[dc]),r==null&&(r=t[dc]=yk++);let i=r&zC,o=1<<i;e.data[n+(i>>HC)]|=o}function Md(n,e){let t=qC(n,e);if(t!==-1)return t;let r=e[ve];r.firstCreatePass&&(n.injectorIndex=e.length,Ug(r.data,n),Ug(e,null),Ug(r.blueprint,null));let i=Xm(n,e),o=n.injectorIndex;if($C(i)){let s=Sd(i),a=Ad(i,e),c=a[ve].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Ug(n,e){n.push(0,0,0,0,0,0,0,0,e)}function qC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Xm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=YC(i),r===null)return ls;if(t++,i=i[bs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ls}function cm(n,e,t){vk(n,e,t)}function _k(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(nC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function GC(n,e,t){if(t&ge.Optional||n!==void 0)return n;jm(e,"NodeInjector")}function WC(n,e,t,r){if(t&ge.Optional&&r===void 0&&(r=null),!(t&(ge.Self|ge.Host))){let i=n[ps],o=En(void 0);try{return i?i.get(e,r,t&ge.Optional):YD(e,r,t&ge.Optional)}finally{En(o)}}return GC(r,e,t)}function KC(n,e,t,r=ge.Default,i){if(n!==null){if(e[ce]&2048&&!(r&ge.Self)){let s=Ck(n,e,t,r,Jn);if(s!==Jn)return s}let o=QC(n,e,t,r,Jn);if(o!==Jn)return o}return WC(e,t,r,i)}function QC(n,e,t,r,i){let o=Ik(t);if(typeof o=="function"){if(!kC(e,n,r))return r&ge.Host?GC(i,t,r):WC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ge.Optional))jm(t);else return s}finally{LC()}}else if(typeof o=="number"){let s=null,a=qC(n,e),c=ls,l=r&ge.Host?e[Dn][jn]:null;for((a===-1||r&ge.SkipSelf)&&(c=a===-1?Xm(n,e):e[a+8],c===ls||!yD(r,!1)?a=-1:(s=e[ve],a=Sd(c),e=Ad(c,e)));a!==-1;){let h=e[ve];if(mD(o,a,h.data)){let p=wk(a,e,t,s,r,l);if(p!==Jn)return p}c=e[a+8],c!==ls&&yD(r,e[ve].data[a+8]===l)&&mD(o,a,e)?(s=h,a=Sd(c),e=Ad(c,e)):a=-1}}return i}function wk(n,e,t,r,i,o){let s=e[ve],a=s.data[n+8],c=r==null?Dc(a)&&am:r!=s&&(a.type&3)!==0,l=i&ge.Host&&o===a,h=Ek(a,s,t,c,l);return h!==null?ys(e,s,h,a):Jn}function Ek(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let D=s[y];if(y<c&&t===D||y>=c&&D.type===t)return y}if(i){let y=s[c];if(y&&ri(y)&&y.type===t)return c}return null}function ys(n,e,t,r){let i=n[t],o=e.data;if(hk(i)){let s=i;s.resolving&&XP(JP(o[t]));let a=gD(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?En(s.injectImpl):null,h=kC(n,r,ge.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&lk(t,o[t],e)}finally{l!==null&&En(l),gD(a),s.resolving=!1,LC()}}return i}function Ik(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(dc)?n[dc]:void 0;return typeof e=="number"?e>=0?e&zC:Dk:e}function mD(n,e,t){let r=1<<n;return!!(t[e+(n>>HC)]&r)}function yD(n,e){return!(n&ge.Self)&&!(n&ge.Host&&e)}var qi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return KC(this._tNode,this._lView,e,Yd(r),t)}};function Dk(){return new qi(Lt(),Fe())}function Tc(n){return wc(()=>{let e=n.prototype.constructor,t=e[yd]||um(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[yd]||um(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function um(n){return HD(n)?()=>{let e=um(Vt(n));return e&&e()}:ds(n)}function Ck(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ce]&2048&&!(s[ce]&512);){let a=QC(o,s,t,r|ge.Self,Jn);if(a!==Jn)return a;let c=o.parent;if(!c){let l=s[gC];if(l){let h=l.get(t,Jn,r);if(h!==Jn)return h}c=YC(s),s=s[bs]}o=c}return i}function YC(n){let e=n[ve],t=e.type;return t===2?e.declTNode:t===1?n[jn]:null}function ey(n){return _k(Lt(),n)}function vD(n,e=null,t=null,r){let i=ZC(n,e,t,r);return i.resolveInjectorInitializers(),i}function ZC(n,e=null,t=null,r,i=new Set){let o=[t||sn,S1(n)];return r=r||(typeof n=="object"?void 0:Gt(n)),new gc(o,e||Hm(),r||null,i)}var Kt=class n{static{this.THROW_IF_NOT_FOUND=fc}static{this.NULL=new wd}static create(e,t){if(Array.isArray(e))return vD({name:""},t,e,"");{let r=e.name??"";return vD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=W({token:n,providedIn:"any",factory:()=>F(XD)})}static{this.__NG_ELEMENT_ID__=-1}};var bk=new G("");bk.__NG_ELEMENT_ID__=n=>{let e=Lt();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(n&ge.Optional)return null;throw new Z(204,!1)};var Tk="ngOriginalError";function Bg(n){return n[Tk]}var JC=!0,ty=(()=>{class n{static{this.__NG_ELEMENT_ID__=Sk}static{this.__NG_ENV_ID__=t=>t}}return n})(),lm=class extends ty{constructor(e){super(),this._lView=e}onDestroy(e){return TC(this._lView,e),()=>K1(this._lView,e)}};function Sk(){return new lm(Fe())}var to=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Et(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})();var dm=class extends ze{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,pC()&&(this.destroyRef=V(ty,{optional:!0})??void 0,this.pendingTasks=V(to,{optional:!0})??void 0)}emit(e){let t=be(null);try{super.next(e)}finally{be(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},ot=dm;function xd(...n){}function XC(n){let e,t;function r(){n=xd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function _D(n){return queueMicrotask(()=>n()),()=>{n=xd}}var ny="isAngularZone",Rd=ny+"_ID",Ak=0,Ee=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ot(!1),this.onMicrotaskEmpty=new ot(!1),this.onStable=new ot(!1),this.onError=new ot(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=JC}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Rk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ny)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Mk,xd,xd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Mk={};function ry(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){XC(()=>{n.callbackScheduled=!1,hm(n),n.isCheckStableRunning=!0,ry(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),hm(n)}function Rk(n){let e=()=>{xk(n)},t=Ak++;n._inner=n._inner.fork({name:"angular",properties:{[ny]:!0,[Rd]:t,[Rd+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(Nk(c))return r.invokeTask(o,s,a,c);try{return wD(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ED(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return wD(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Pk(c)&&e(),ED(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,hm(n),ry(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function hm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function wD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ED(n){n._nesting--,ry(n)}var Nd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ot,this.onMicrotaskEmpty=new ot,this.onStable=new ot,this.onError=new ot}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Nk(n){return eb(n,"__ignore_ng_zone__")}function Pk(n){return eb(n,"__scheduler_tick__")}function eb(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function kk(n="zone.js",e){return n==="noop"?new Nd:n==="zone.js"?new Ee(e):n}var br=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Bg(e);for(;t&&Bg(t);)t=Bg(t);return t||null}},Ok=new G("",{providedIn:"root",factory:()=>{let n=V(Ee),e=V(br);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Fk(){return nh(Lt(),Fe())}function nh(n,e){return new ci(ln(n,e))}var ci=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Fk}}return n})();var Vk="ngSkipHydration",Lk="ngskiphydration";function tb(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===Lk)return!0}return!1}function nb(n){return n.hasAttribute(Vk)}function Pd(n){return(n.flags&128)===128}function jk(n){if(Pd(n))return!0;let e=n.parent;for(;e;){if(Pd(n)||tb(e))return!0;e=e.parent}return!1}var rb=new Map,Uk=0;function Bk(){return Uk++}function $k(n){rb.set(n[Jd],n)}function fm(n){rb.delete(n[Jd])}var ID="__ngContext__";function Yi(n,e){kn(e)?(n[ID]=e[Jd],$k(e)):n[ID]=e}function ib(n){return sb(n[mc])}function ob(n){return sb(n[Pn])}function sb(n){for(;n!==null&&!nr(n);)n=n[Pn];return n}var pm;function ab(n){pm=n}function rh(){if(pm!==void 0)return pm;if(typeof document<"u")return document;throw new Z(210,!1)}var Sc=new G("",{providedIn:"root",factory:()=>zk}),zk="ng",iy=new G(""),It=new G("",{providedIn:"platform",factory:()=>"unknown"});var oy=new G("",{providedIn:"root",factory:()=>rh().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Hk(){let n=new Ts;return V(It)==="browser"&&(n.store=qk(rh(),V(Sc))),n}var Ts=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=W({token:n,providedIn:"root",factory:Hk})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function qk(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var cb="h",ub="b",gm=function(n){return n.FirstChild="f",n.NextSibling="n",n}(gm||{}),Gk="e",Wk="t",sy="c",lb="x",kd="r",Kk="i",Qk="n",db="d";var Yk="__nghData__",hb=Yk,$g="ngh",Zk="nghm",fb=()=>null;function Jk(n,e,t=!1){let r=n.getAttribute($g);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,c={};if(r!==""){let h=e.get(Ts,null,{optional:!0});h!==null&&(c=h.get(hb,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,ih(l,0,n.nextSibling)),a?n.setAttribute($g,a):n.removeAttribute($g),l}function Xk(){fb=Jk}function ay(n,e,t=!1){return fb(n,e,t)}function eO(n){let e=n._lView;return e[ve].type===2?null:(bd(e)&&(e=e[Wt]),e)}function tO(n){return n.textContent?.replace(/\s/gm,"")}function nO(n){let e=rh(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=tO(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function ih(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function mm(n,e){return n.segmentHeads?.[e]??null}function rO(n,e){let t=n.data,r=t[Gk]?.[e]??null;return r===null&&t[sy]?.[e]&&(r=cy(n,e)),r}function pb(n,e){return n.data[sy]?.[e]??null}function cy(n,e){let t=pb(n,e)??[],r=0;for(let i of t)r+=i[kd]*(i[lb]??1);return r}function iO(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[db];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Ac(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[db];n.disconnectedNodes=t?new Set(t):null}return!!iO(n)?.has(e)}var sd=new G(""),gb=!1,mb=new G("",{providedIn:"root",factory:()=>gb});var ad;function oO(){if(ad===void 0&&(ad=null,On.trustedTypes))try{ad=On.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ad}function DD(n){return oO()?.createScriptURL(n)||n}var Od=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$D})`}};function Mc(n){return n instanceof Od?n.changingThisBreaksApplicationSecurity:n}function uy(n,e){let t=sO(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${$D})`)}return t===e}function sO(n){return n instanceof Od&&n.getTypeName()||null}var aO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yb(n){return n=String(n),n.match(aO)?n:"unsafe:"+n}var oh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(oh||{});function cO(n){let e=_b();return e?e.sanitize(oh.URL,n)||"":uy(n,"URL")?Mc(n):yb(Yn(n))}function uO(n){let e=_b();if(e)return DD(e.sanitize(oh.RESOURCE_URL,n)||"");if(uy(n,"ResourceURL"))return DD(Mc(n));throw new Z(904,!1)}function lO(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?uO:cO}function vb(n,e,t){return lO(e,t)(n)}function _b(){let n=Fe();return n&&n[tr].sanitizer}var dO=/^>|^->|<!--|-->|--!>|<!-$/g,hO=/(<|>)/g,fO="\u200B$1\u200B";function pO(n){return n.replace(dO,e=>e.replace(hO,fO))}function gO(n){return n.ownerDocument.body}function wb(n){return n instanceof Function?n():n}function uc(n){return(n??V(Kt)).get(It)==="browser"}var Tr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Tr||{}),mO;function ly(n,e){return mO(n,e)}function as(n,e,t,r,i){if(r!=null){let o,s=!1;nr(r)?o=r:kn(r)&&(s=!0,r=r[un]);let a=Vn(r);n===0&&t!==null?i==null?Tb(e,t,a):Fd(e,t,a,i||null,!0):n===1&&t!==null?Fd(e,t,a,i||null,!0):n===2?py(e,a,s):n===3&&e.destroyNode(a),o!=null&&RO(e,n,o,t,i)}}function Eb(n,e){return n.createText(e)}function yO(n,e,t){n.setValue(e,t)}function Ib(n,e){return n.createComment(pO(e))}function dy(n,e,t){return n.createElement(e,t)}function vO(n,e){Db(n,e),e[un]=null,e[jn]=null}function _O(n,e,t,r,i,o){r[un]=i,r[jn]=e,sh(n,r,t,1,i,o)}function Db(n,e){e[tr].changeDetectionScheduler?.notify(9),sh(n,e,e[He],2,null,null)}function wO(n){let e=n[mc];if(!e)return zg(n[ve],n);for(;e;){let t=null;if(kn(e))t=e[mc];else{let r=e[an];r&&(t=r)}if(!t){for(;e&&!e[Pn]&&e!==n;)kn(e)&&zg(e[ve],e),e=e[Mt];e===null&&(e=n),kn(e)&&zg(e[ve],e),t=e&&e[Pn]}e=t}}function EO(n,e,t,r){let i=an+r,o=t.length;r>0&&(t[i-1][Pn]=e),r<o-an?(e[Pn]=t[i],JD(t,an+r,e)):(t.push(e),e[Pn]=null),e[Mt]=t;let s=e[gs];s!==null&&t!==s&&Cb(s,e);let a=e[ms];a!==null&&a.insertView(n),im(e),e[ce]|=128}function Cb(n,e){let t=n[Dd],r=e[Mt];if(kn(r))n[ce]|=Cd.HasTransplantedViews;else{let i=r[Mt][Dn];e[Dn]!==i&&(n[ce]|=Cd.HasTransplantedViews)}t===null?n[Dd]=[e]:t.push(e)}function hy(n,e){let t=n[Dd],r=t.indexOf(e);t.splice(r,1)}function ym(n,e){if(n.length<=an)return;let t=an+e,r=n[t];if(r){let i=r[gs];i!==null&&i!==n&&hy(i,r),e>0&&(n[t-1][Pn]=r[Pn]);let o=_d(n,an+e);vO(r[ve],r);let s=o[ms];s!==null&&s.detachView(o[ve]),r[Mt]=null,r[Pn]=null,r[ce]&=-129}return r}function bb(n,e){if(!(e[ce]&256)){let t=e[He];t.destroyNode&&sh(n,e,t,3,null,null),wO(e)}}function zg(n,e){if(e[ce]&256)return;let t=be(null);try{e[ce]&=-129,e[ce]|=256,e[In]&&pg(e[In]),DO(n,e),IO(n,e),e[ve].type===1&&e[He].destroy();let r=e[gs];if(r!==null&&nr(e[Mt])){r!==e[Mt]&&hy(r,e);let i=e[ms];i!==null&&i.detachView(n)}fm(e)}finally{be(t)}}function IO(n,e){let t=n.cleanup,r=e[Ed];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Ed]=null);let i=e[ei];if(i!==null){e[ei]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function DO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Qi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Zn(4,a,c);try{c.call(a)}finally{Zn(5,a,c)}}else{Zn(4,i,o);try{o.call(i)}finally{Zn(5,i,o)}}}}}function CO(n,e,t){return bO(n,e.parent,t)}function bO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[un];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Xn.None||o===Xn.Emulated)return null}return ln(r,t)}}function Fd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Tb(n,e,t){n.appendChild(e,t)}function CD(n,e,t,r,i){r!==null?Fd(n,e,t,r,i):Tb(n,e,t)}function Sb(n,e){return n.parentNode(e)}function TO(n,e){return n.nextSibling(e)}function SO(n,e,t){return MO(n,e,t)}function AO(n,e,t){return n.type&40?ln(n,t):null}var MO=AO,bD;function fy(n,e,t,r){let i=CO(n,r,e),o=e[He],s=r.parent||e[jn],a=SO(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)CD(o,i,t[c],a,!1);else CD(o,i,t,a,!1);bD!==void 0&&bD(o,r,e,t,i)}function lc(n,e){if(e!==null){let t=e.type;if(t&3)return ln(e,n);if(t&4)return vm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return lc(n,r);{let i=n[e.index];return nr(i)?vm(-1,i):Vn(i)}}else{if(t&128)return lc(n,e.next);if(t&32)return ly(e,n)()||Vn(n[e.index]);{let r=Ab(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Wi(n[Dn]);return lc(i,r)}else return lc(n,e.next)}}}return null}function Ab(n,e){if(e!==null){let r=n[Dn][jn],i=e.projection;return r.projection[i]}return null}function vm(n,e){let t=an+n+1;if(t<e.length){let r=e[t],i=r[ve].firstChild;if(i!==null)return lc(r,i)}return e[Cr]}function py(n,e,t){n.removeChild(null,e,t)}function Mb(n){n.textContent=""}function gy(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Yi(Vn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)gy(n,e,t.child,r,i,o,!1),as(e,n,i,a,o);else if(c&32){let l=ly(t,r),h;for(;h=l();)as(e,n,i,h,o);as(e,n,i,a,o)}else c&16?xO(n,e,r,t,i,o):as(e,n,i,a,o);t=s?t.projectionNext:t.next}}function sh(n,e,t,r,i,o){gy(t,r,n.firstChild,e,i,o,!1)}function xO(n,e,t,r,i,o){let s=t[Dn],c=s[jn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];as(e,n,i,h,o)}else{let l=c,h=s[Mt];Pd(r)&&(l.flags|=128),gy(n,e,l,h,i,o,!0)}}function RO(n,e,t,r,i){let o=t[Cr],s=Vn(t);o!==s&&as(e,n,r,o,i);for(let a=an;a<t.length;a++){let c=t[a];sh(c[ve],c,n,e,r,o)}}function NO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Tr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Tr.Important),n.setStyle(t,r,i,o))}}function PO(n,e,t){n.setAttribute(e,"style",t)}function xb(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Rb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Xg(n,e,r),i!==null&&xb(n,e,i),o!==null&&PO(n,e,o)}var rr={};function oe(n=1){Nb(dn(),Fe(),si()+n,!1)}function Nb(n,e,t,r){if(!r)if((e[ce]&3)===3){let o=n.preOrderCheckHooks;o!==null&&pd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&gd(e,o,0,t)}Ki(t)}function ue(n,e=ge.Default){let t=Fe();if(t===null)return F(n,e);let r=Lt();return KC(r,t,Vt(n),e)}function Pb(){let n="invalid";throw new Error(n)}function kb(n,e,t,r,i,o){let s=be(null);try{let a=null;i&ti.SignalBased&&(a=e[r][wr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&ti.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):vC(e,a,r,o)}finally{be(s)}}function kO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ki(~i);else{let o=i,s=t[++r],a=t[++r];ok(s,o);let c=e[o];a(2,c)}}}finally{Ki(-1)}}function ah(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[un]=i,p[ce]=r|4|128|8|64,(l!==null||n&&n[ce]&2048)&&(p[ce]|=2048),CC(p),p[Mt]=p[bs]=n,p[Fn]=t,p[tr]=s||n&&n[tr],p[He]=a||n&&n[He],p[ps]=c||n&&n[ps]||null,p[jn]=o,p[Jd]=Bk(),p[er]=h,p[gC]=l,p[Dn]=e.type==2?n[Dn]:p,p}function ch(n,e,t,r,i){let o=n.data[e];if(o===null)o=OO(n,e,t,r,i),ik()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=tk();o.injectorIndex=s===null?-1:s.injectorIndex}return bc(o,!0),o}function OO(n,e,t,r,i){let o=MC(),s=xC(),a=s?o:o&&o.parent,c=n.data[e]=BO(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Ob(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Fb(n,e,t,r,i){let o=si(),s=r&2;try{Ki(-1),s&&e.length>Wt&&Nb(n,e,Wt,!1),Zn(s?2:0,i),t(r,i)}finally{Ki(o),Zn(s?3:1,i)}}function Vb(n,e,t){if(yC(e)){let r=be(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{be(r)}}}function Lb(n,e,t){AC()&&(WO(n,e,t,ln(t,e)),(t.flags&64)===64&&qb(n,e,t))}function jb(n,e,t=ln){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Ub(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=my(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function my(n,e,t,r,i,o,s,a,c,l,h){let p=Wt+r,m=p+i,y=FO(p,m),D=typeof l=="function"?l():l;return y[ve]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1,ssrId:h}}function FO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:rr);return t}function VO(n,e,t,r){let o=r.get(mb,gb)||t===Xn.ShadowDom,s=n.selectRootElement(e,o);return LO(s),s}function LO(n){Bb(n)}var Bb=()=>null;function jO(n){nb(n)?Mb(n):nO(n)}function UO(){Bb=jO}function BO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Cc()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function TD(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=ti.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?SD(r,t,l,a,c):SD(r,t,l,a)}return r}function SD(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function $O(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,y=m?m.inputs:null,D=m?m.outputs:null;c=TD(0,p.inputs,h,c,y),l=TD(1,p.outputs,h,l,D);let A=c!==null&&s!==null&&!$m(e)?iF(c,h,s):null;a.push(A)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function zO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function $b(n,e,t,r,i,o,s,a){let c=ln(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(yy(n,t,h,r,i),Dc(e)&&HO(t,e.index)):e.type&3?(r=zO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function HO(n,e){let t=oi(e,n);t[ce]&16||(t[ce]|=64)}function zb(n,e,t,r){if(AC()){let i=r===null?null:{"":-1},o=QO(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Hb(n,e,t,s,i,a),i&&YO(t,r,i)}t.mergedAttrs=pc(t.mergedAttrs,t.attrs)}function Hb(n,e,t,r,i,o){for(let l=0;l<r.length;l++)cm(Md(t,e),n,r[l].type);JO(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=Ob(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=pc(t.mergedAttrs,h.hostAttrs),XO(n,t,e,c,h),ZO(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}$O(n,t,o)}function qO(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;GO(s)!=a&&s.push(a),s.push(t,r,o)}}function GO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function WO(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Dc(t)&&eF(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Md(t,e),Yi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=ys(e,n,a,t);if(Yi(l,e),s!==null&&rF(e,a-i,l,c,t,s),ri(c)){let h=oi(t.index,e);h[Fn]=ys(e,n,a,t)}}}function qb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=sk();try{Ki(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];om(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&KO(c,l)}}finally{Ki(-1),om(s)}}function KO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function QO(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(v1(e,s.selectors,!1))if(r||(r=[]),ri(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;_m(n,e,c)}else r.unshift(s),_m(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function _m(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function YO(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Z(-301,!1);r.push(e[i],o)}}}function ZO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ri(e)&&(t[""]=n)}}function JO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function XO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ds(i.type,!0)),s=new Qi(o,ri(i),ue);n.blueprint[r]=s,t[r]=s,qO(n,e,r,Ob(n,t,i.hostVars,rr),i)}function eF(n,e,t){let r=ln(e,n),i=Ub(t),o=n[tr].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=uh(n,ah(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function tF(n,e,t,r,i,o){let s=ln(n,e);nF(e[He],s,o,n.value,t,r,i)}function nF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Yn(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function rF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];kb(r,t,c,l,h,p)}}function iF(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function Gb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Wb(n,e){let t=n.contentQueries;if(t!==null){let r=be(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];PC(o),a.contentQueries(2,e[s],s)}}}finally{be(r)}}}function uh(n,e){return n[mc]?n[dD][Pn]=e:n[mc]=e,n[dD]=e,e}function wm(n,e,t){PC(0);let r=be(null);try{e(n,t)}finally{be(r)}}function oF(n){return n[Ed]??=[]}function sF(n){return n.cleanup??=[]}function Kb(n,e){let t=n[ps],r=t?t.get(br,null):null;r&&r.handleError(e)}function yy(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];kb(h,l,r,a,c,i)}}function vy(n,e,t){let r=IC(e,n);yO(n[He],r,t)}function aF(n,e){let t=oi(e,n),r=t[ve];cF(r,t);let i=t[un];i!==null&&t[er]===null&&(t[er]=ay(i,t[ps])),_y(r,t,t[Fn])}function cF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function _y(n,e,t){Km(e);try{let r=n.viewQuery;r!==null&&wm(1,r,t);let i=n.template;i!==null&&Fb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ms]?.finishViewCreation(n),n.staticContentQueries&&Wb(n,e),n.staticViewQueries&&wm(2,n.viewQuery,t);let o=n.components;o!==null&&uF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ce]&=-5,Qm()}}function uF(n,e){for(let t=0;t<e.length;t++)aF(n,e[t])}function lF(n,e,t,r){let i=be(null);try{let o=e.tView,a=n[ce]&4096?4096:16,c=ah(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[gs]=l;let h=n[ms];return h!==null&&(c[ms]=h.createEmbeddedView(o)),_y(o,c,t),c}finally{be(i)}}function AD(n,e){return!e||e.firstChild===null||Pd(n)}function dF(n,e,t,r=!0){let i=e[ve];if(EO(i,e,n,t),r){let s=vm(t,n),a=e[He],c=Sb(a,n[Cr]);c!==null&&_O(i,n[jn],a,e,c,s)}let o=e[er];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Vd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Vn(o)),nr(o)&&hF(o,r);let s=t.type;if(s&8)Vd(n,e,t.child,r);else if(s&32){let a=ly(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Ab(e,t);if(Array.isArray(a))r.push(...a);else{let c=Wi(e[Dn]);Vd(c[ve],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function hF(n,e){for(let t=an;t<n.length;t++){let r=n[t],i=r[ve].firstChild;i!==null&&Vd(r[ve],r,i,e)}n[Cr]!==n[un]&&e.push(n[Cr])}var Qb=[];function fF(n){return n[In]??pF(n)}function pF(n){let e=Qb.pop()??Object.create(mF);return e.lView=n,e}function gF(n){n.lView[In]!==n&&(n.lView=null,Qb.push(n))}var mF=me(P({},nc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{eh(n.lView)},consumerOnSignalRead(){this.lView[In]=this}});function yF(n){let e=n[In]??Object.create(vF);return e.lView=n,e}var vF=me(P({},nc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Wi(n.lView);for(;e&&!Yb(e[ve]);)e=Wi(e);e&&bC(e)},consumerOnSignalRead(){this.lView[In]=this}});function Yb(n){return n.type!==2}var _F=100;function Zb(n,e=!0,t=0){let r=n[tr],i=r.rendererFactory,o=!1;o||i.begin?.();try{wF(n,t)}catch(s){throw e&&Kb(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function wF(n,e){let t=RC();try{fD(!0),Em(n,e);let r=0;for(;Xd(n);){if(r===_F)throw new Z(103,!1);r++,Em(n,1)}}finally{fD(t)}}function EF(n,e,t,r){let i=e[ce];if((i&256)===256)return;let o=!1,s=!1;!o&&e[tr].inlineEffectRunner?.flush(),Km(e);let a=!0,c=null,l=null;o||(Yb(n)?(l=fF(e),c=Ml(l)):w0()===null?(a=!1,l=yF(e),c=Ml(l)):e[In]&&(pg(e[In]),e[In]=null));try{CC(e),rk(n.bindingStartIndex),t!==null&&Fb(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&pd(e,y,null)}else{let y=n.preOrderHooks;y!==null&&gd(e,y,0,null),Lg(e,0)}if(s||IF(e),Jb(e,0),n.contentQueries!==null&&Wb(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&pd(e,y)}else{let y=n.contentHooks;y!==null&&gd(e,y,1),Lg(e,1)}kO(n,e);let p=n.components;p!==null&&eT(e,p,0);let m=n.viewQuery;if(m!==null&&wm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&pd(e,y)}else{let y=n.viewHooks;y!==null&&gd(e,y,2),Lg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Vg]){for(let y of e[Vg])y();e[Vg]=null}o||(e[ce]&=-73)}catch(h){throw o||eh(e),h}finally{l!==null&&(hg(l,c),a&&gF(l)),Qm()}}function Jb(n,e){for(let t=ib(n);t!==null;t=ob(t))for(let r=an;r<t.length;r++){let i=t[r];Xb(i,e)}}function IF(n){for(let e=ib(n);e!==null;e=ob(e)){if(!(e[ce]&Cd.HasTransplantedViews))continue;let t=e[Dd];for(let r=0;r<t.length;r++){let i=t[r];bC(i)}}}function DF(n,e,t){let r=oi(e,n);Xb(r,t)}function Xb(n,e){Gm(n)&&Em(n,e)}function Em(n,e){let r=n[ve],i=n[ce],o=n[In],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&fg(o)),s||=!1,o&&(o.dirty=!1),n[ce]&=-9217,s)EF(r,n,r.template,n[Fn]);else if(i&8192){Jb(n,1);let a=r.components;a!==null&&eT(n,a,1)}}function eT(n,e,t){for(let r=0;r<e.length;r++)DF(n,e[r],t)}function wy(n,e){let t=RC()?64:1088;for(n[tr].changeDetectionScheduler?.notify(e);n;){n[ce]|=t;let r=Wi(n);if(bd(n)&&!r)return n;n=r}return null}var Zi=class{get rootNodes(){let e=this._lView,t=e[ve];return Vd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Fn]}set context(e){this._lView[Fn]=e}get destroyed(){return(this._lView[ce]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Mt];if(nr(e)){let t=e[Id],r=t?t.indexOf(this):-1;r>-1&&(ym(e,r),_d(t,r))}this._attachedToViewContainer=!1}bb(this._lView[ve],this._lView)}onDestroy(e){TC(this._lView,e)}markForCheck(){wy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ce]&=-129}reattach(){im(this._lView),this._lView[ce]|=128}detectChanges(){this._lView[ce]|=1024,Zb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=bd(this._lView),t=this._lView[gs];t!==null&&!e&&hy(t,this._lView),Db(this._lView[ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let t=bd(this._lView),r=this._lView[gs];r!==null&&!t&&Cb(r,this._lView),im(this._lView)}},Ey=(()=>{class n{static{this.__NG_ELEMENT_ID__=TF}}return n})(),CF=Ey,bF=class extends CF{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=lF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Zi(i)}};function TF(){return SF(Lt(),Fe())}function SF(n,e){return n.type&4?new bF(e,n,nh(n,e)):null}var AF=new RegExp(`^(\\d+)*(${ub}|${cb})*(.*)`);function MF(n){let e=n.match(AF),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,l,h]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(h,10)||1;a.push(l,p)}return[s,...a]}function xF(n){return!n.prev&&n.parent?.type===8}function Hg(n){return n.index-Wt}function RF(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function lh(n,e,t,r){let i=Hg(r),o=RF(n,i);if(o===void 0){let s=n.data[Qk];if(s?.[i])o=PF(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(xF(r)){let l=Hg(r.parent);o=mm(n,l)}else{let l=ln(c,t);if(a)o=l.firstChild;else{let h=Hg(c),p=mm(n,h);if(c.type===2&&p){let y=cy(n,h)+1;o=dh(y,p)}else o=l.nextSibling}}}}return o}function dh(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function NF(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case gm.FirstChild:t=t.firstChild;break;case gm.NextSibling:t=t.nextSibling;break}}return t}function PF(n,e){let[t,...r]=MF(n),i;if(t===cb)i=e[Dn][un];else if(t===ub)i=gO(e[Dn][un]);else{let o=Number(t);i=Vn(e[o+Wt])}return NF(i,r)}var kF=!1;function OF(n){kF=n}function FF(n){let e=n[er];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[He];for(let o of r.values())VF(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function VF(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Wt);i&&py(n,i,!1)}}function tT(n){let e=n[yc]??[],r=n[Mt][He];for(let i of e)LF(i,r);n[yc]=sn}function LF(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[kd];for(;t<i;){let o=r.nextSibling;py(e,r,!1),r=o,t++}}}function nT(n){tT(n);let e=n[un];kn(e)&&Ld(e);for(let t=an;t<n.length;t++)Ld(n[t])}function Ld(n){FF(n);let e=n[ve];for(let t=Wt;t<e.bindingStartIndex;t++)if(nr(n[t])){let r=n[t];nT(r)}else kn(n[t])&&Ld(n[t])}function jF(n){let e=n._views;for(let t of e){let r=eO(t);r!==null&&r[un]!==null&&(kn(r)?Ld(r):nT(r))}}function UF(n,e){let t=[];for(let r of e)for(let i=0;i<(r[lb]??1);i++){let o={data:r,firstChild:null};r[kd]>0&&(o.firstChild=n,n=dh(r[kd],n)),t.push(o)}return[n,t]}var rT=()=>null;function BF(n,e){let t=n[yc];return!e||t===null||t.length===0?null:t[0].data[Kk]===e?t.shift():(tT(n),null)}function $F(){rT=BF}function MD(n,e){return rT(n,e)}var vs=class{},Iy=new G("",{providedIn:"root",factory:()=>!1});var iT=new G(""),oT=new G(""),Im=class{},jd=class{};function zF(n){let e=Error(`No component factory found for ${Gt(n)}.`);return e[HF]=n,e}var HF="ngComponent";var Dm=class{resolveComponentFactory(e){throw zF(e)}},_s=class{static{this.NULL=new Dm}},ws=class{},no=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>qF()}}return n})();function qF(){let n=Fe(),e=Lt(),t=oi(e.index,n);return(kn(t)?t:n)[He]}var GF=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>null})}}return n})();function Cm(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=tD(i,a);else if(o==2){let c=a,l=e[++s];r=tD(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ud=class extends _s{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ni(e);return new Es(t,this.ngModule)}};function xD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:ti.None;e?t.push({propName:s,templateName:r,isSignal:(a&ti.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function WF(n){let e=n.toLowerCase();return e==="svg"?H1:e==="math"?q1:null}var Es=class extends jd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=xD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return xD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=I1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=be(null);try{i=i||this.ngModule;let s=i instanceof cn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new sm(e,s):e,c=a.get(ws,null);if(c===null)throw new Z(407,!1);let l=a.get(GF,null),h=a.get(vs,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?VO(m,r,this.componentDef.encapsulation,a):dy(m,y,WF(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let M=null;D!==null&&(M=ay(D,a,!0));let j=my(0,null,null,1,0,null,null,null,null,null,null),q=ah(null,j,null,A,null,null,p,m,a,null,M);Km(q);let L,Y,ne=null;try{let X=this.componentDef,E,v=null;X.findHostDirectiveDefs?(E=[],v=new Map,X.findHostDirectiveDefs(X,E,v),E.push(X)):E=[X];let w=KF(q,D);ne=QF(w,D,X,E,q,p,m),Y=DC(j,Wt),D&&JF(m,X,D,r),t!==void 0&&XF(Y,this.ngContentSelectors,t),L=ZF(ne,X,E,v,q,[eV]),_y(j,q,null)}catch(X){throw ne!==null&&fm(ne),fm(q),X}finally{Qm()}return new bm(this.componentType,L,nh(Y,q),q,Y)}finally{be(o)}}},bm=class extends Im{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Zi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;yy(o[ve],o,i,e,t),this.previousInputValues.set(e,t);let s=oi(this._tNode.index,o);wy(s,1)}}get injector(){return new qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function KF(n,e){let t=n[ve],r=Wt;return n[r]=e,ch(t,r,2,"#host",null)}function QF(n,e,t,r,i,o,s){let a=i[ve];YF(r,n,e,s);let c=null;e!==null&&(c=ay(e,i[ps]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=ah(i,Ub(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&_m(a,n,r.length-1),uh(i,p),i[n.index]=p}function YF(n,e,t,r){for(let i of n)e.mergedAttrs=pc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Cm(e,e.mergedAttrs,!0),t!==null&&Rb(r,t,e))}function ZF(n,e,t,r,i,o){let s=Lt(),a=i[ve],c=ln(s,i);Hb(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=ys(i,a,p,s);Yi(m,i)}qb(a,i,s),c&&Yi(c,i);let l=ys(i,a,s.directiveStart+s.componentOffset,s);if(n[Fn]=i[Fn]=l,o!==null)for(let h of o)h(l,e);return Vb(a,s,i),l}function JF(n,e,t,r){if(r)Xg(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=D1(e.selectors[0]);i&&Xg(n,t,i),o&&o.length>0&&xb(n,t,o.join(" "))}}function XF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function eV(){let n=Lt();Jm(Fe()[ve],n)}var xc=(()=>{class n{static{this.__NG_ELEMENT_ID__=tV}}return n})();function tV(){let n=Lt();return rV(n,Fe())}var nV=xc,sT=class extends nV{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return nh(this._hostTNode,this._hostLView)}get injector(){return new qi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Xm(this._hostTNode,this._hostLView);if($C(e)){let t=Ad(e,this._hostLView),r=Sd(e),i=t[ve].data[r+8];return new qi(i,t)}else return new qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=RD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-an}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=MD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,AD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!U1(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let c=s?e:new Es(ni(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let A=(s?l:this.parentInjector).get(cn,null);A&&(o=A)}let h=ni(c.componentType??{}),p=MD(this._lContainer,h?.id??null),m=p?.firstChild??null,y=c.create(l,i,m,o);return this.insertImpl(y.hostView,a,AD(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(G1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Mt],l=new sT(c,c[jn],c[Mt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return dF(s,i,o,r),e.attachToViewContainerRef(),JD(qg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=RD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ym(this._lContainer,t);r&&(_d(qg(this._lContainer),t),bb(r[ve],r))}detach(e){let t=this._adjustIndex(e,-1),r=ym(this._lContainer,t);return r&&_d(qg(this._lContainer),t)!=null?new Zi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function RD(n){return n[Id]}function qg(n){return n[Id]||(n[Id]=[])}function rV(n,e){let t,r=e[n.index];return nr(r)?t=r:(t=Gb(r,e,null,n),e[n.index]=t,uh(e,t)),aT(t,e,n,r),new sT(t,n,e)}function iV(n,e){let t=n[He],r=t.createComment(""),i=ln(e,n),o=Sb(t,i);return Fd(t,o,r,TO(t,i),!1),r}var aT=cT,Dy=()=>!1;function oV(n,e,t){return Dy(n,e,t)}function cT(n,e,t,r){if(n[Cr])return;let i;t.type&8?i=Vn(r):i=iV(e,t),n[Cr]=i}function sV(n,e,t){if(n[Cr]&&n[yc])return!0;let r=t[er],i=e.index-Wt;if(!r||jk(e)||Ac(r,i))return!1;let s=mm(r,i),a=r.data[sy]?.[i],[c,l]=UF(s,a);return n[Cr]=c,n[yc]=l,!0}function aV(n,e,t,r){Dy(n,t,e)||cT(n,e,t,r)}function cV(){aT=aV,Dy=sV}var ND=new Set;function ui(n){ND.has(n)||(ND.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function uV(n){return typeof n=="function"&&n[wr]!==void 0}function Rc(n,e){ui("NgSignals");let t=R0(n),r=t[wr];return e?.equal&&(r.equal=e.equal),t.set=i=>gg(r,i),t.update=i=>N0(r,i),t.asReadonly=lV.bind(t),t}function lV(){let n=this[wr];if(n.readonlyFn===void 0){let e=()=>this();e[wr]=n,n.readonlyFn=e}return n.readonlyFn}function uT(n){return uV(n)&&typeof n.set=="function"}function dV(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(gV))}return o}return Bd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>mV(o));e.push(c)}),fV(),Promise.all(e).then(()=>{})}var Bd=new Map,hV=new Set;function fV(){let n=Bd;return Bd=new Map,n}function pV(){return Bd.size===0}function gV(n){return typeof n=="string"?n:n.text()}function mV(n){hV.delete(n)}function yV(n){return Object.getPrototypeOf(n.prototype).constructor}function li(n){let e=yV(n.type),t=!0,r=[n];for(;e;){let i;if(ri(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=cd(n.inputs),s.inputTransforms=cd(n.inputTransforms),s.declaredInputs=cd(n.declaredInputs),s.outputs=cd(n.outputs);let a=i.hostBindings;a&&IV(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&wV(n,c),l&&EV(n,l),vV(n,i),HP(n.outputs,i.outputs),ri(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===li&&(t=!1)}}e=Object.getPrototypeOf(e)}_V(r)}function vV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function _V(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=pc(i.hostAttrs,t=pc(t,i.hostAttrs))}}function cd(n){return n===hs?{}:n===sn?[]:n}function wV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function EV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function IV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Cy(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var ii=class{},vc=class{};var $d=class extends ii{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ud(this);let o=aC(e);this._bootstrapComponents=wb(o.bootstrap),this._r3Injector=ZC(e,t,[{provide:ii,useValue:this},{provide:_s,useValue:this.componentFactoryResolver},...r],Gt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},zd=class extends vc{constructor(e){super(),this.moduleType=e}create(e){return new $d(this.moduleType,e,[])}};function DV(n,e,t){return new $d(n,e,t,!1)}var Tm=class extends ii{constructor(e){super(),this.componentFactoryResolver=new Ud(this),this.instance=null;let t=new gc([...e.providers,{provide:ii,useValue:this},{provide:_s,useValue:this.componentFactoryResolver}],e.parent||Hm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function hh(n,e,t=null){return new Tm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function lT(n){return bV(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function CV(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function bV(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ji(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Sm(n,e,t,r){let i=Ji(n,e,t);return Ji(n,e+1,r)||i}function TV(n,e,t,r,i,o){let s=Sm(n,e,t,r);return Sm(n,e+2,i,o)||s}function Nc(n){return(n.flags&32)===32}function SV(n,e,t,r,i,o,s,a,c){let l=e.consts,h=ch(e,n,4,s||null,a||null);zb(e,t,h,Td(l,c)),Jm(e,h);let p=h.tView=my(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function AV(n,e,t,r,i,o,s,a,c,l){let h=t+Wt,p=e.firstCreatePass?SV(h,e,n,r,i,o,s,a,c):e.data[h];bc(p,!1);let m=dT(e,n,p,t);Zm()&&fy(e,n,m,p),Yi(m,n);let y=Gb(m,n,m,p);return n[h]=y,uh(n,y),oV(y,p,n),qm(p)&&Lb(e,n,p),c!=null&&jb(n,p,l),p}function hn(n,e,t,r,i,o,s,a){let c=Fe(),l=dn(),h=Td(l.consts,o);return AV(c,l,n,e,t,r,i,h,s,a),hn}var dT=hT;function hT(n,e,t,r){return ai(!0),e[He].createComment("")}function MV(n,e,t,r){let i=e[er],o=!i||Cc()||Nc(t)||Ac(i,r);if(ai(o),o)return hT(n,e,t,r);let s=i.data[Wk]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=lh(i,n,e,t);ih(i,r,a);let c=cy(i,r);return dh(c,a)}function xV(){dT=MV}var cs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(cs||{}),fT=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Am=class n{constructor(){this.ngZone=V(Ee),this.scheduler=V(vs),this.errorHandler=V(br,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[cs.EarlyRead,cs.Write,cs.MixedReadWrite,cs.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}},Mm=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function by(n,e){!e?.injector&&L1(by);let t=e?.injector??V(Kt);return uc(t)?(ui("NgAfterNextRender"),NV(n,t,e,!0)):PV}function RV(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function NV(n,e,t,r){let i=e.get(fT);i.impl??=e.get(Am);let o=t?.phase??cs.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(ty):null,a=new Mm(i.impl,RV(n,o),r,s);return i.impl.register(a),a}var PV={destroy(){}};function fh(n,e,t,r){let i=Fe(),o=th();if(Ji(i,o,e)){let s=dn(),a=Ym();tF(a,i,n,e,t,r)}return fh}function kV(n,e,t,r){return Ji(n,th(),t)?e+Yn(t)+r:rr}function OV(n,e,t,r,i,o){let s=NC(),a=Sm(n,s,t,i);return Wm(2),a?e+Yn(t)+r+Yn(i)+o:rr}function FV(n,e,t,r,i,o,s,a,c,l){let h=NC(),p=TV(n,h,t,i,s,c);return Wm(4),p?e+Yn(t)+r+Yn(i)+o+Yn(s)+a+Yn(c)+l:rr}function ud(n,e){return n<<17|e<<2}function Xi(n){return n>>17&32767}function VV(n){return(n&2)==2}function LV(n,e){return n&131071|e<<17}function xm(n){return n|2}function Is(n){return(n&131068)>>2}function Gg(n,e){return n&-131069|e<<2}function jV(n){return(n&1)===1}function Rm(n){return n|1}function UV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Xi(s),c=Is(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ec(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let m=Xi(n[a+1]);n[r+1]=ud(m,a),m!==0&&(n[m+1]=Gg(n[m+1],r)),n[a+1]=LV(n[a+1],r)}else n[r+1]=ud(a,0),a!==0&&(n[a+1]=Gg(n[a+1],r)),a=r;else n[r+1]=ud(c,0),a===0?a=r:n[c+1]=Gg(n[c+1],r),c=r;l&&(n[r+1]=xm(n[r+1])),PD(n,h,r,!0),PD(n,h,r,!1),BV(e,h,n,r,o),s=ud(a,c),o?e.classBindings=s:e.styleBindings=s}function BV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ec(o,e)>=0&&(t[r+1]=Rm(t[r+1]))}function PD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Xi(i):Is(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];$V(c,e)&&(a=!0,n[s+1]=r?Rm(l):xm(l)),s=r?Xi(l):Is(l)}a&&(n[t+1]=r?xm(i):Rm(i))}function $V(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ec(n,e)>=0:!1}function fn(n,e,t){let r=Fe(),i=th();if(Ji(r,i,e)){let o=dn(),s=Ym();$b(o,s,r,n,e,r[He],t,!1)}return fn}function kD(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";yy(n,t,o[s],s,r)}function ph(n,e){return zV(n,e,null,!0),ph}function zV(n,e,t,r){let i=Fe(),o=dn(),s=Wm(2);if(o.firstUpdatePass&&qV(o,n,s,r),e!==rr&&Ji(i,s,e)){let a=o.data[si()];YV(o,a,i,i[He],n,i[s+1]=ZV(e,t),r,s)}}function HV(n,e){return e>=n.expandoStartIndex}function qV(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[si()],s=HV(n,t);JV(o,r)&&e===null&&!s&&(e=!1),e=GV(i,o,e,r),UV(i,o,e,t,s,r)}}function GV(n,e,t,r){let i=ak(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Wg(null,n,e,t,r),t=_c(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Wg(i,n,e,t,r),o===null){let c=WV(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Wg(null,n,e,c[1],r),c=_c(c,e.attrs,r),KV(n,e,r,c))}else o=QV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function WV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Is(r)!==0)return n[Xi(r)]}function KV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Xi(i)]=r}function QV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=_c(r,s,t)}return _c(r,e.attrs,t)}function Wg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=_c(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function _c(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),l1(n,s,t?!0:e[++o]))}return n===void 0?null:n}function YV(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=jV(l)?OD(c,e,t,i,Is(l),s):void 0;if(!Hd(h)){Hd(o)||VV(l)&&(o=OD(c,null,t,i,a,s));let p=IC(si(),t);NO(r,s,p,i,o)}}function OD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=t[i+1];m===rr&&(m=p?sn:void 0);let y=p?Og(m,r):h===r?m:void 0;if(l&&!Hd(y)&&(y=Og(c,r)),Hd(y)&&(a=y,s))return a;let D=n[i+1];i=s?Xi(D):Is(D)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Og(c,r))}return a}function Hd(n){return n!==void 0}function ZV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Gt(Mc(n)))),n}function JV(n,e){return(n.flags&(e?8:16))!==0}function XV(n,e,t,r,i,o){let s=e.consts,a=Td(s,i),c=ch(e,n,2,r,a);return zb(e,t,c,Td(s,o)),c.attrs!==null&&Cm(c,c.attrs,!1),c.mergedAttrs!==null&&Cm(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function U(n,e,t,r){let i=Fe(),o=dn(),s=Wt+n,a=i[He],c=o.firstCreatePass?XV(s,o,i,e,t,r):o.data[s],l=pT(o,i,c,a,e,n);i[s]=l;let h=qm(c);return bc(c,!0),Rb(a,l,c),!Nc(c)&&Zm()&&fy(o,i,l,c),Q1()===0&&Yi(l,i),Y1(),h&&(Lb(o,i,c),Vb(o,c,i)),r!==null&&jb(i,c),U}function $(){let n=Lt();xC()?nk():(n=n.parent,bc(n,!1));let e=n;J1(e)&&ek(),Z1();let t=dn();return t.firstCreatePass&&(Jm(t,n),yC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&fk(e)&&kD(t,e,Fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&pk(e)&&kD(t,e,Fe(),e.stylesWithoutHost,!1),$}function pn(n,e,t,r){return U(n,e,t,r),$(),pn}var pT=(n,e,t,r,i,o)=>(ai(!0),dy(r,i,jC()));function eL(n,e,t,r,i,o){let s=e[er],a=!s||Cc()||Nc(t)||Ac(s,o);if(ai(a),a)return dy(r,i,jC());let c=lh(s,n,e,t);return pb(s,o)&&ih(s,o,c.nextSibling),s&&(tb(t)||nb(c))&&Dc(t)&&(X1(t),Mb(c)),c}function tL(){pT=eL}var nL=(n,e,t,r)=>(ai(!0),Ib(e[He],""));function rL(n,e,t,r){let i,o=e[er],s=!o||Cc()||Ac(o,r)||Nc(t);if(ai(s),s)return Ib(e[He],"");let a=lh(o,n,e,t),c=rO(o,r);return ih(o,r,a),i=dh(c,a),i}function iL(){nL=rL}function st(){return Fe()}var qd="en-US";var oL=qd;function sL(n){typeof n=="string"&&(oL=n.toLowerCase().replace(/_/g,"-"))}var aL=(n,e,t)=>{};function Ae(n,e,t,r){let i=Fe(),o=dn(),s=Lt();return gT(o,i,i[He],s,n,e,r),Ae}function cL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ed],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function gT(n,e,t,r,i,o,s){let a=qm(r),l=n.firstCreatePass&&sF(n),h=e[Fn],p=oF(e),m=!0;if(r.type&3||s){let A=ln(r,e),M=s?s(A):A,j=p.length,q=s?Y=>s(Vn(Y[r.index])):r.index,L=null;if(!s&&a&&(L=cL(n,e,i,r.index)),L!==null){let Y=L.__ngLastListenerFn__||L;Y.__ngNextListenerFn__=o,L.__ngLastListenerFn__=o,m=!1}else{o=VD(r,e,h,o),aL(A,i,o);let Y=t.listen(M,i,o);p.push(o,Y),l&&l.push(i,q,j,j+1)}}else o=VD(r,e,h,o);let y=r.outputs,D;if(m&&y!==null&&(D=y[i])){let A=D.length;if(A)for(let M=0;M<A;M+=2){let j=D[M],q=D[M+1],ne=e[j][q].subscribe(o),X=p.length;p.push(o,ne),l&&l.push(i,r.index,X,-(X+1))}}}function FD(n,e,t,r){let i=be(null);try{return Zn(6,e,t),t(r)!==!1}catch(o){return Kb(n,o),!1}finally{Zn(7,e,t),be(i)}}function VD(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?oi(n.index,e):e;wy(s,5);let a=FD(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=FD(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function vt(n=1){return uk(n)}function se(n,e=""){let t=Fe(),r=dn(),i=n+Wt,o=r.firstCreatePass?ch(r,i,1,e,null):r.data[i],s=mT(r,t,o,e,n);t[i]=s,Zm()&&fy(r,t,s,o),bc(o,!1)}var mT=(n,e,t,r,i)=>(ai(!0),Eb(e[He],r));function uL(n,e,t,r,i){let o=e[er],s=!o||Cc()||Nc(t)||Ac(o,i);return ai(s),s?Eb(e[He],r):lh(o,n,e,t)}function lL(){mT=uL}function gn(n){return Ss("",n,""),gn}function Ss(n,e,t){let r=Fe(),i=kV(r,n,e,t);return i!==rr&&vy(r,si(),i),Ss}function ro(n,e,t,r,i){let o=Fe(),s=OV(o,n,e,t,r,i);return s!==rr&&vy(o,si(),s),ro}function Ty(n,e,t,r,i,o,s,a,c){let l=Fe(),h=FV(l,n,e,t,r,i,o,s,a,c);return h!==rr&&vy(l,si(),h),Ty}function Me(n,e,t){uT(e)&&(e=e());let r=Fe(),i=th();if(Ji(r,i,e)){let o=dn(),s=Ym();$b(o,s,r,n,e,r[He],t,!1)}return Me}function Re(n,e){let t=uT(n);return t&&n.set(e),t}function xe(n,e){let t=Fe(),r=dn(),i=Lt();return gT(r,t,t[He],i,n,e),xe}function dL(n,e,t){let r=dn();if(r.firstCreatePass){let i=ri(n);Nm(t,r.data,r.blueprint,i,!0),Nm(e,r.data,r.blueprint,i,!1)}}function Nm(n,e,t,r,i){if(n=Vt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Nm(n[o],e,t,r,i);else{let o=dn(),s=Fe(),a=Lt(),c=fs(n)?n:Vt(n.provide),l=fC(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(fs(n)||!n.multi){let y=new Qi(l,i,ue),D=Qg(c,e,i?h:h+m,p);D===-1?(cm(Md(a,s),o,c),Kg(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=Qg(c,e,h+m,p),D=Qg(c,e,h,h+m),A=y>=0&&t[y],M=D>=0&&t[D];if(i&&!M||!i&&!A){cm(Md(a,s),o,c);let j=pL(i?fL:hL,t.length,i,r,l);!i&&M&&(t[D].providerFactory=j),Kg(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=yT(t[i?D:y],l,!i&&r);Kg(o,n,y>-1?y:D,j)}!i&&r&&M&&t[D].componentProviders++}}}function Kg(n,e,t,r){let i=fs(e),o=R1(e);if(i||o){let c=(o?Vt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function yT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Qg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function hL(n,e,t,r){return Pm(this.multi,[])}function fL(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ys(t,t[ve],this.providerFactory.index,r);o=a.slice(0,s),Pm(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Pm(i,o);return o}function Pm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function pL(n,e,t,r,i){let o=new Qi(n,t,ue);return o.multi=[],o.index=e,o.componentProviders=0,yT(o,i,r&&!t),o}function gh(n,e=[]){return t=>{t.providersResolver=(r,i)=>dL(r,i?i(n):n,e)}}var gL=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=lC(!1,t.type),i=r.length>0?hh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(F(cn))})}}return n})();function vT(n){ui("NgStandalone"),n.getStandaloneInjector=e=>e.get(gL).getOrCreateStandaloneInjector(n)}var ld=null;function mL(n){ld!==null&&(n.defaultEncapsulation!==ld.defaultEncapsulation||n.preserveWhitespaces!==ld.preserveWhitespaces)||(ld=n)}var Sr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},_T=new Sr("18.2.13");var mh=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Sy=new G(""),Pc=new G(""),yh=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Ay||(yL(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(F(Ee),F(vh),F(Pc))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),vh=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Ay?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function yL(n){Ay=n}var Ay;function io(n){return!!n&&typeof n.then=="function"}function wT(n){return!!n&&typeof n.subscribe=="function"}var _h=new G(""),ET=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=V(_h,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(io(o))t.push(o);else if(wT(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),As=new G("");function vL(){x0(()=>{throw new Z(600,!1)})}function _L(n){return n.isBoundToModule}var wL=10;function EL(n,e,t){try{let r=t();return io(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function IT(n,e){return Array.isArray(e)?e.reduce(IT,n):P(P({},n),e)}var Un=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(Ok),this.afterRenderManager=V(fT),this.zonelessEnabled=V(Iy),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ze,this.afterTick=new ze,this.componentTypes=[],this.components=[],this.isStable=V(to).hasPendingTasks.pipe(Q(t=>!t)),this._injector=V(cn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof jd;if(!this._injector.get(ET).done){let m=!i&&sC(t),y=!1;throw new Z(405,y)}let s;i?s=t:s=this._injector.get(_s).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=_L(s)?void 0:this._injector.get(ii),c=r||s.selector,l=s.create(Kt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(Sy,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),md(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Z(101,!1);let t=be(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,be(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ws,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<wL;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)IL(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Xd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;md(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(As,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>md(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function md(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var dd;function wh(n){dd??=new WeakMap;let e=dd.get(n);if(e)return e;let t=n.isStable.pipe(on(r=>r)).toPromise().then(()=>{});return dd.set(n,t),n.onDestroy(()=>dd?.delete(n)),t}function IL(n,e,t,r){if(!t&&!Xd(n))return;Zb(n,e,t&&!r?0:1)}var km=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Eh=(()=>{class n{compileModuleSync(t){return new zd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=aC(t),o=wb(i.declarations).reduce((s,a)=>{let c=ni(a);return c&&s.push(new Es(c)),s},[]);return new km(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),DL=new G("");function CL(n,e,t){let r=new zd(t);return Promise.resolve(r)}function LD(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var bL=(()=>{class n{constructor(){this.zone=V(Ee),this.changeDetectionScheduler=V(vs),this.applicationRef=V(Un)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function TL({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ee(me(P({},DT()),{scheduleInRootZone:t})),[{provide:Ee,useFactory:n},{provide:Gi,multi:!0,useFactory:()=>{let r=V(bL,{optional:!0});return()=>r.initialize()}},{provide:Gi,multi:!0,useFactory:()=>{let r=V(SL);return()=>{r.initialize()}}},e===!0?{provide:iT,useValue:!0}:[],{provide:oT,useValue:t??JC}]}function DT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var SL=(()=>{class n{constructor(){this.subscription=new Ze,this.initialized=!1,this.zone=V(Ee),this.pendingTasks=V(to)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ee.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var AL=(()=>{class n{constructor(){this.appRef=V(Un),this.taskService=V(to),this.ngZone=V(Ee),this.zonelessEnabled=V(Iy),this.disableScheduling=V(iT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ze,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Rd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(oT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Nd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?_D:XC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Rd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,_D(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ML(){return typeof $localize<"u"&&$localize.locale||qd}var My=new G("",{providedIn:"root",factory:()=>V(My,ge.Optional|ge.SkipSelf)||ML()});var Gd=new G("");function hd(n){return!n.moduleRef}function xL(n){let e=hd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ee);return t.run(()=>{hd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(br,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),hd(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Gd);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Gd);s.add(o),n.moduleRef.onDestroy(()=>{md(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return EL(r,t,()=>{let o=e.get(ET);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(My,qd);if(sL(s||qd),hd(n)){let a=e.get(Un);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return RL(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function RL(n,e){let t=n.injector.get(Un);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Z(-403,!1);e.push(n)}var CT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>kk(r?.ngZone,me(P({},DT({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[TL({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:vs,useExisting:AL}],c=DV(t.moduleType,this.injector,a);return xL({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=IT({},r);return CL(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Z(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Gd,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(F(Kt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),hc=null,bT=new G("");function NL(n){if(hc&&!hc.get(bT,!1))throw new Z(400,!1);vL(),hc=n;let e=n.get(CT);return OL(n),e}function xy(n,e,t=[]){let r=`Platform: ${e}`,i=new G(r);return(o=[])=>{let s=TT();if(!s||s.injector.get(bT,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):NL(PL(a,r))}return kL(i)}}function PL(n=[],e){return Kt.create({name:e,providers:[{provide:Zd,useValue:"platform"},{provide:Gd,useValue:new Set([()=>hc=null])},...n]})}function kL(n){let e=TT();if(!e)throw new Z(401,!1);return e}function TT(){return hc?.get(CT)??null}function OL(n){n.get(iy,null)?.forEach(t=>t())}function Ry(){return!1}var oo=(()=>{class n{static{this.__NG_ELEMENT_ID__=FL}}return n})();function FL(n){return VL(Lt(),Fe(),(n&16)===16)}function VL(n,e,t){if(Dc(n)&&!t){let r=oi(n.index,e);return new Zi(r,r)}else if(n.type&175){let r=e[Dn];return new Zi(r,e)}return null}var Om=class{constructor(){}supports(e){return lT(e)}create(e){return new Fm(e)}},LL=(n,e)=>e,Fm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||LL}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<jD(r,i,o)?t:r,a=jD(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,D=y+m;h<=D&&D<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!lT(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,CV(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Vm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Wd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Wd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Vm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Lm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Wd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Lm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function jD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function UD(){return new Ny([new Om])}var Ny=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:UD})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||UD()),deps:[[n,new Um,new Cs]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Z(901,!1)}}return n})();var ST=xy(null,"core",[]),AT=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(F(Un))}}static{this.\u0275mod=yt({type:n})}static{this.\u0275inj=gt({})}}return n})();var BD=!1;function jL(){BD||(BD=!0,Xk(),tL(),lL(),iL(),xV(),cV(),$F(),UO())}function UL(n,e){return wh(n)}function MT(){return Ic([{provide:sd,useFactory:()=>{let n=!0;return uc()&&(n=!!V(Ts,{optional:!0})?.get(hb,null)),n&&ui("NgHydration"),n}},{provide:Gi,useValue:()=>{OF(!1),uc()&&V(sd)&&(BL(),jL())},multi:!0},{provide:mb,useFactory:()=>uc()&&V(sd)},{provide:As,useFactory:()=>{if(uc()&&V(sd)){let n=V(Un),e=V(Kt);return()=>{UL(n,e).then(()=>{jF(n)})}}return()=>{}},multi:!0}])}function BL(){let n=rh(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===Zk){e=t;break}if(!e)throw new Z(-507,!1)}function so(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function kc(n,e){ui("NgSignals");let t=S0(n);return e?.equal&&(t[wr].equal=e.equal),t}function Ar(n){let e=be(null);try{return n()}finally{be(e)}}function xT(n){let e=ni(n);if(!e)return null;let t=new Es(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var kT=null;function ir(){return kT}function OT(n){kT??=n}var Ih=class{};var jt=new G(""),Fy=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V($L),providedIn:"platform"})}}return n})(),FT=new G(""),$L=(()=>{class n extends Fy{constructor(){super(),this._doc=V(jt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ir().getBaseHref(this._doc)}onPopState(t){let r=ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Vy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function RT(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Mr(n){return n&&n[0]!=="?"?"?"+n:n}var xr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(Ly),providedIn:"root"})}}return n})(),VT=new G(""),Ly=(()=>{class n extends xr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Vy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Mr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Mr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Mr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(Fy),F(VT,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),LT=(()=>{class n extends xr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Vy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Mr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Mr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(Fy),F(VT,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Ms=(()=>{class n{constructor(t){this._subject=new ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=qL(RT(NT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Mr(r))}normalize(t){return n.stripTrailingSlash(HL(this._basePath,NT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Mr}static{this.joinWithSlash=Vy}static{this.stripTrailingSlash=RT}static{this.\u0275fac=function(r){return new(r||n)(F(xr))}}static{this.\u0275prov=W({token:n,factory:()=>zL(),providedIn:"root"})}}return n})();function zL(){return new Ms(F(xr))}function HL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function NT(n){return n.replace(/\/index.html$/,"")}function qL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function jy(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Py=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Cn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Py(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),PT(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);PT(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ue(xc),ue(Ey),ue(Ny))}}static{this.\u0275dir=Qt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function PT(n,e){n.context.$implicit=e.item}var jT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=yt({type:n})}static{this.\u0275inj=gt({})}}return n})(),Uy="browser",GL="server";function WL(n){return n===Uy}function Rr(n){return n===GL}var UT=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>WL(V(It))?new ky(V(jt),window):new Oy})}}return n})(),ky=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=KL(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function KL(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Oy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Dh=class{};var bh=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var KT=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(KT||{}),By=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new bh,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Th=class n extends By{constructor(e={}){super(e),this.type=KT.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var QL=new G("");var YL=new G(""),BT="b",$T="h",zT="s",HT="st",qT="u",GT="rt",Ch=new G(""),ZL=["GET","HEAD"];function JL(n,e){let y=V(Ch),{isCacheActive:t}=y,r=u0(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!ZL.includes(o)||!r.includeRequestsWithAuthHeaders&&XL(n)||r.filter?.(n)===!1)return e(n);let s=V(Ts),a=V(YL,{optional:!0}),c=Rr(V(It));if(a&&!c)throw new Z(2803,!1);let l=c&&a?r2(n.url,a):n.url,h=t2(n,l),p=s.get(h,null),m=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(m=i.includeHeaders),p){let{[BT]:D,[GT]:A,[$T]:M,[zT]:j,[HT]:q,[qT]:L}=p,Y=D;switch(A){case"arraybuffer":Y=new TextEncoder().encode(D).buffer;break;case"blob":Y=new Blob([D]);break}let ne=new bh(M);return ee(new Th({body:Y,headers:ne,status:j,statusText:q,url:L}))}return e(n).pipe(Xe(D=>{D instanceof Th&&c&&s.set(h,{[BT]:D.body,[$T]:e2(D.headers,m),[zT]:D.status,[HT]:D.statusText,[qT]:l,[GT]:n.responseType})}))}function XL(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function e2(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function WT(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function t2(n,e){let{params:t,method:r,responseType:i}=n,o=WT(t),s=n.serializeBody();s instanceof URLSearchParams?s=WT(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=n2(a);return c}function n2(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function QT(n){return[{provide:Ch,useFactory:()=>(ui("NgHttpTransferCache"),P({isCacheActive:!0},n))},{provide:QL,useValue:JL,multi:!0,deps:[Ts,Ch]},{provide:As,multi:!0,useFactory:()=>{let e=V(Un),t=V(Ch);return()=>{wh(e).then(()=>{t.isCacheActive=!1})}}}]}function r2(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var Hy=class extends Ih{constructor(){super(...arguments),this.supportsDOMEvents=!0}},qy=class n extends Hy{static makeCurrent(){OT(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=i2();return t==null?null:o2(t)}resetBaseElement(){Oc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jy(document.cookie,e)}},Oc=null;function i2(){return Oc=Oc||document.querySelector("base"),Oc?Oc.getAttribute("href"):null}function o2(n){return new URL(n,document.baseURI).pathname}var Gy=class{addToWindow(e){On.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Z(5103,!1);return o},On.getAllAngularTestabilities=()=>e.getAllTestabilities(),On.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=On.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};On.frameworkStabilizers||(On.frameworkStabilizers=[]),On.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?ir().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},s2=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Wy=new G(""),XT=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(F(Wy),F(Ee))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Sh=class{constructor(e){this._doc=e}},$y="ng-app-id",eS=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Rr(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${$y}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute($y),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute($y,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(F(jt),F(Sc),F(oy,8),F(It))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),zy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Yy=/%COMP%/g,tS="%COMP%",a2=`_nghost-${tS}`,c2=`_ngcontent-${tS}`,u2=!0,l2=new G("",{providedIn:"root",factory:()=>u2});function d2(n){return c2.replace(Yy,n)}function h2(n){return a2.replace(Yy,n)}function nS(n,e){return e.map(t=>t.replace(Yy,n))}var YT=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Rr(a),this.defaultRenderer=new Fc(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Xn.ShadowDom&&(r=me(P({},r),{encapsulation:Xn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Ah?i.applyToHost(t):i instanceof Vc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Xn.Emulated:o=new Ah(c,l,r,this.appId,h,s,a,p);break;case Xn.ShadowDom:return new Ky(c,l,t,r,s,a,this.nonce,p);default:o=new Vc(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(F(XT),F(eS),F(Sc),F(l2),F(jt),F(It),F(Ee),F(oy))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Fc=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(zy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ZT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ZT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=zy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=zy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Tr.DashCase|Tr.Important)?e.style.setProperty(t,r,i&Tr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Tr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=ir().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function ZT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ky=class extends Fc{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=nS(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vc=class extends Fc{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?nS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ah=class extends Vc{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=d2(l),this.hostAttr=h2(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},f2=(()=>{class n extends Sh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(F(jt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),JT=["alt","control","meta","shift"],p2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},g2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},m2=(()=>{class n extends Sh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ir().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),JT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=p2[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),JT.forEach(s=>{if(s!==i){let a=g2[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(F(jt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function y2(){qy.makeCurrent()}function v2(){return new br}function _2(){return ab(document),document}var w2=[{provide:It,useValue:Uy},{provide:iy,useValue:y2,multi:!0},{provide:jt,useFactory:_2,deps:[]}],rS=xy(ST,"browser",w2),E2=new G(""),I2=[{provide:Pc,useClass:Gy,deps:[]},{provide:Sy,useClass:yh,deps:[Ee,vh,Pc]},{provide:yh,useClass:yh,deps:[Ee,vh,Pc]}],D2=[{provide:Zd,useValue:"root"},{provide:br,useFactory:v2,deps:[]},{provide:Wy,useClass:f2,multi:!0,deps:[jt,Ee,It]},{provide:Wy,useClass:m2,multi:!0,deps:[jt]},YT,eS,XT,{provide:ws,useExisting:YT},{provide:Dh,useClass:s2,deps:[]},[]],iS=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Sc,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(F(E2,12))}}static{this.\u0275mod=yt({type:n})}static{this.\u0275inj=gt({providers:[...D2,...I2],imports:[jT,AT]})}}return n})();var oS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(F(jt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Qy=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Qy||{});function sS(...n){let e=[],t=new Set,r=t.has(Qy.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);return Ic([[],MT(),t.has(Qy.NoHttpTransferCache)||r?[]:QT({}),e])}var gS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(ue(no),ue(ci))}}static{this.\u0275dir=Qt({type:n})}}return n})(),C2=(()=>{class n extends gS{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tc(n)))(i||n)}})()}static{this.\u0275dir=Qt({type:n,features:[li]})}}return n})(),mS=new G("");var b2={provide:mS,useExisting:Ds(()=>xt),multi:!0};function T2(){let n=ir()?ir().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var S2=new G(""),xt=(()=>{class n extends gS{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!T2())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(ue(no),ue(ci),ue(S2,8))}}static{this.\u0275dir=Qt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[gh([b2]),li]})}}return n})();var yS=new G(""),vS=new G("");function _S(n){return n!=null}function wS(n){return io(n)?Ie(n):n}function ES(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function IS(n,e){return e.map(t=>t(n))}function A2(n){return!n.validate}function DS(n){return n.map(e=>A2(e)?e:t=>e.validate(t))}function M2(n){if(!n)return null;let e=n.filter(_S);return e.length==0?null:function(t){return ES(IS(t,e))}}function Jy(n){return n!=null?M2(DS(n)):null}function x2(n){if(!n)return null;let e=n.filter(_S);return e.length==0?null:function(t){let r=IS(t,e).map(wS);return Ag(r).pipe(Q(ES))}}function Xy(n){return n!=null?x2(DS(n)):null}function cS(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function R2(n){return n._rawValidators}function N2(n){return n._rawAsyncValidators}function Zy(n){return n?Array.isArray(n)?n:[n]:[]}function xh(n,e){return Array.isArray(n)?n.includes(e):n===e}function uS(n,e){let t=Zy(e);return Zy(n).forEach(i=>{xh(t,i)||t.push(i)}),t}function lS(n,e){return Zy(e).filter(t=>!xh(n,t))}var Rh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Jy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Xy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ns=class extends Rh{get formDirective(){return null}get path(){return null}},zc=class extends Rh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Nh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},P2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},D6=me(P({},P2),{"[class.ng-submitted]":"isSubmitted"}),Yt=(()=>{class n extends Nh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ue(zc,2))}}static{this.\u0275dir=Qt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ph("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[li]})}}return n})(),Zt=(()=>{class n extends Nh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ue(Ns,10))}}static{this.\u0275dir=Qt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ph("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[li]})}}return n})();var Lc="VALID",Mh="INVALID",xs="PENDING",jc="DISABLED",Ps=class{},Ph=class extends Ps{constructor(e,t){super(),this.value=e,this.source=t}},Bc=class extends Ps{constructor(e,t){super(),this.pristine=e,this.source=t}},$c=class extends Ps{constructor(e,t){super(),this.touched=e,this.source=t}},Rs=class extends Ps{constructor(e,t){super(),this.status=e,this.source=t}};function CS(n){return(Fh(n)?n.validators:n)||null}function k2(n){return Array.isArray(n)?Jy(n):n||null}function bS(n,e){return(Fh(e)?e.asyncValidators:n)||null}function O2(n){return Array.isArray(n)?Xy(n):n||null}function Fh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function F2(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Z(1e3,"");if(!r[t])throw new Z(1001,"")}function V2(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Z(1002,"")})}var kh=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=kc(()=>this.statusReactive()),this.statusReactive=Rc(void 0),this._pristine=kc(()=>this.pristineReactive()),this.pristineReactive=Rc(!0),this._touched=kc(()=>this.touchedReactive()),this.touchedReactive=Rc(!1),this._events=new ze,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ar(this.statusReactive)}set status(e){Ar(()=>this.statusReactive.set(e))}get valid(){return this.status===Lc}get invalid(){return this.status===Mh}get pending(){return this.status==xs}get disabled(){return this.status===jc}get enabled(){return this.status!==jc}get pristine(){return Ar(this.pristineReactive)}set pristine(e){Ar(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ar(this.touchedReactive)}set touched(e){Ar(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(uS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(lS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(lS(e,this._rawAsyncValidators))}hasValidator(e){return xh(this._rawValidators,e)}hasAsyncValidator(e){return xh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(me(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new $c(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new $c(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(me(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Bc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Bc(!0,r))}markAsPending(e={}){this.status=xs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(me(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=jc,this.errors=null,this._forEachChild(i=>{i.disable(me(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ph(this.value,r)),this._events.next(new Rs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(me(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Lc,this._forEachChild(r=>{r.enable(me(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(me(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Lc||this.status===xs)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ph(this.value,t)),this._events.next(new Rs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(me(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jc:Lc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=xs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=wS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Rs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?jc:this.errors?Mh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xs)?xs:this._anyControlsHaveStatus(Mh)?Mh:Lc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Bc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new $c(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Fh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=k2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=O2(this._rawAsyncValidators)}},Oh=class extends kh{constructor(e,t,r){super(CS(t),bS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){V2(this,!0,e),Object.keys(e).forEach(r=>{F2(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ev=new G("CallSetDisabledState",{providedIn:"root",factory:()=>tv}),tv="always";function L2(n,e){return[...e.path,n]}function TS(n,e,t=tv){SS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),U2(n,e),$2(n,e),B2(n,e),j2(n,e)}function dS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function j2(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function SS(n,e){let t=R2(n);e.validator!==null?n.setValidators(cS(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=N2(n);e.asyncValidator!==null?n.setAsyncValidators(cS(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();dS(e._rawValidators,i),dS(e._rawAsyncValidators,i)}function U2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&AS(n,e)})}function B2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&AS(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function AS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function $2(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function z2(n,e){n==null,SS(n,e)}function H2(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function q2(n){return Object.getPrototypeOf(n.constructor)===C2}function G2(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function W2(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===xt?t=o:q2(o)?r=o:i=o}),i||r||t||null}var K2={provide:Ns,useExisting:Ds(()=>Ut)},Uc=Promise.resolve(),Ut=(()=>{class n extends Ns{get submitted(){return Ar(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=kc(()=>this.submittedReactive()),this.submittedReactive=Rc(!1),this._directives=new Set,this.ngSubmit=new ot,this.form=new Oh({},Jy(t),Xy(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Uc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),TS(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Uc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Uc.then(()=>{let r=this._findContainer(t.path),i=new Oh({});z2(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Uc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Uc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),G2(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(ue(yS,10),ue(vS,10),ue(ev,8))}}static{this.\u0275dir=Qt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gh([K2]),li]})}}return n})();function hS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Q2=class extends kh{constructor(e=null,t,r){super(CS(t),bS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(fS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){fS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Y2={provide:zc,useExisting:Ds(()=>Bt)},pS=Promise.resolve(),Bt=(()=>{class n extends zc{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Q2,this._registered=!1,this.name="",this.update=new ot,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=W2(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),H2(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){TS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){pS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&so(r);pS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?L2(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(ue(Ns,9),ue(yS,10),ue(vS,10),ue(mS,10),ue(oo,8),ue(ev,8))}}static{this.\u0275dir=Qt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[gh([Y2]),li,eo]})}}return n})(),Jt=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Qt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var Z2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=yt({type:n})}static{this.\u0275inj=gt({})}}return n})();var MS=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ev,useValue:t.callSetDisabledState??tv}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=yt({type:n})}static{this.\u0275inj=gt({imports:[Z2]})}}return n})();var J2="firebase",X2="10.14.1";Kr(J2,X2,"app");var Hc=new Sr("ANGULARFIRE2_VERSION");var ej=(n,e)=>{let t=e?[e]:v0(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},uo=class{constructor(){return ej(tj)}},tj="app-check";function nv(){}var Vh=class{zone;delegate;constructor(e,t=bg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},rv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nv,{},nv,nv)),t.pipe(Xe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Lh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Vh(Zone.current)),this.insideAngular=t.run(()=>new Vh(Zone.current,sc)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(F(Ee))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nj(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Xt(n){return rj(nj())(n)}function rj(n){return function(t){return t=t.lift(new rv(n.ngZone)),t.pipe(Rn(n.outsideAngular),wn(n.insideAngular))}}var ij="firebase",oj="10.14.1";rn.registerVersion(ij,oj,"app-compat");var sj=["ngOnDestroy"],NS=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(sj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var jh=class{constructor(e){return e}},ks=new G("angularfire2.app.options"),Os=new G("angularfire2.app.name");function qc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=rn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>rn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;aj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new jh(s)}var aj=(n,...e)=>{Ry()&&typeof console<"u"&&console[n](...e)},cj={provide:jh,useFactory:qc,deps:[ks,Ee,[new Cs,Os]]},PS=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ks,useValue:t},{provide:Os,useValue:r}]}}constructor(t){rn.registerVersion("angularfire",Hc.full,"core"),rn.registerVersion("angularfire",Hc.full,"app-compat"),rn.registerVersion("angular",_T.full,t.toString())}static \u0275fac=function(r){return new(r||n)(F(It))};static \u0275mod=yt({type:n});static \u0275inj=gt({providers:[cj]})}return n})();function Uh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return uj(i,s)||(RS("error",`${e} was already initialized on the ${t} Firebase App with different settings.${lj?" You may need to reload as Firebase is not HMR aware.":""}`),RS("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function uj(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var lj=typeof module<"u"&&!!module.hot,RS=(n,...e)=>{Ry()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var kS={production:!1,firebase:{apiKey:"AIzaSyAVzI84vuYu86I_Wn8wyaHVvFp9FeNf44E",authDomain:"my-cv-89f56.firebaseapp.com",projectId:"my-cv-89f56",storageBucket:"my-cv-89f56.firebasestorage.app",messagingSenderId:"381713347725",appId:"1:381713347725:web:5c31d03e91ed104bd49ec4"}};var he="primary",ou=Symbol("RouteTitle"),cv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Bs(n){return new cv(n)}function dj(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function hj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!or(n[t],e[t]))return!1;return!0}function or(n,e){let t=n?uv(n):void 0,r=e?uv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!qS(n[i],e[i]))return!1;return!0}function uv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function GS(n){return n.length>0?n[n.length-1]:null}function fi(n){return Sg(n)?n:io(n)?Ie(Promise.resolve(n)):ee(n)}var fj={exact:KS,subset:QS},WS={exact:pj,subset:gj,ignored:()=>!0};function OS(n,e,t){return fj[t.paths](n.root,e.root,t.matrixParams)&&WS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function pj(n,e){return or(n,e)}function KS(n,e,t){if(!ho(n.segments,e.segments)||!zh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!KS(n.children[r],e.children[r],t))return!1;return!0}function gj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qS(n[t],e[t]))}function QS(n,e,t){return YS(n,e,e.segments,t)}function YS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ho(i,t)||e.hasChildren()||!zh(i,t,r))}else if(n.segments.length===t.length){if(!ho(n.segments,t)||!zh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!QS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ho(n.segments,i)||!zh(n.segments,i,r)||!n.children[he]?!1:YS(n.children[he],e,o,r)}}function zh(n,e,t){return e.every((r,i)=>WS[t](n[i].parameters,r.parameters))}var Pr=class{constructor(e=new Ne([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bs(this.queryParams),this._queryParamMap}toString(){return vj.serialize(this)}},Ne=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hh(this)}},lo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Bs(this.parameters),this._parameterMap}toString(){return JS(this)}};function mj(n,e){return ho(n,e)&&n.every((t,r)=>or(t.parameters,e[r].parameters))}function ho(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function yj(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===he&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==he&&(t=t.concat(e(i,r)))}),t}var su=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new $s,providedIn:"root"})}}return n})(),$s=class{parse(e){let t=new dv(e);return new Pr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Gc(e.root,!0)}`,r=Ej(e.queryParams),i=typeof e.fragment=="string"?`#${_j(e.fragment)}`:"";return`${t}${r}${i}`}},vj=new $s;function Hh(n){return n.segments.map(e=>JS(e)).join("/")}function Gc(n,e){if(!n.hasChildren())return Hh(n);if(e){let t=n.children[he]?Gc(n.children[he],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==he&&r.push(`${i}:${Gc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=yj(n,(r,i)=>i===he?[Gc(n.children[he],!1)]:[`${i}:${Gc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[he]!=null?`${Hh(n)}/${t[0]}`:`${Hh(n)}/(${t.join("//")})`}}function ZS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bh(n){return ZS(n).replace(/%3B/gi,";")}function _j(n){return encodeURI(n)}function lv(n){return ZS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qh(n){return decodeURIComponent(n)}function FS(n){return qh(n.replace(/\+/g,"%20"))}function JS(n){return`${lv(n.path)}${wj(n.parameters)}`}function wj(n){return Object.entries(n).map(([e,t])=>`;${lv(e)}=${lv(t)}`).join("")}function Ej(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Bh(t)}=${Bh(i)}`).join("&"):`${Bh(t)}=${Bh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Ij=/^[^\/()?;#]+/;function iv(n){let e=n.match(Ij);return e?e[0]:""}var Dj=/^[^\/()?;=#]+/;function Cj(n){let e=n.match(Dj);return e?e[0]:""}var bj=/^[^=?&#]+/;function Tj(n){let e=n.match(bj);return e?e[0]:""}var Sj=/^[^&#]+/;function Aj(n){let e=n.match(Sj);return e?e[0]:""}var dv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[he]=new Ne(e,t)),r}parseSegment(){let e=iv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new lo(qh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Cj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=iv(this.remaining);i&&(r=i,this.capture(r))}e[qh(t)]=qh(r)}parseQueryParam(e){let t=Tj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Aj(this.remaining);s&&(r=s,this.capture(r))}let i=FS(t),o=FS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=iv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=he);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[he]:new Ne([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function XS(n){return n.segments.length>0?new Ne([],{[he]:n}):n}function eA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=eA(i);if(r===he&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ne(n.segments,e);return Mj(t)}function Mj(n){if(n.numberOfChildren===1&&n.children[he]){let e=n.children[he];return new Ne(n.segments.concat(e.segments),e.children)}return n}function fo(n){return n instanceof Pr}function xj(n,e,t=null,r=null){let i=tA(n);return nA(i,e,t,r)}function tA(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Ne(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=XS(r);return e??i}function nA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return ov(i,i,i,t,r);let o=Rj(e);if(o.toRoot())return ov(i,i,new Ne([],{}),t,r);let s=Nj(o,i,n),a=s.processChildren?Qc(s.segmentGroup,s.index,o.commands):iA(s.segmentGroup,s.index,o.commands);return ov(i,s.segmentGroup,a,t,r)}function Gh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Jc(n){return typeof n=="object"&&n!=null&&n.outlets}function ov(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=rA(n,e,t);let a=XS(eA(s));return new Pr(a,o,i)}function rA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=rA(o,e,t)}),new Ne(n.segments,r)}var Wh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Gh(r[0]))throw new Z(4003,!1);let i=r.find(Jc);if(i&&i!==GS(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Rj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Wh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Wh(t,e,r)}var Ls=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Nj(n,e,t){if(n.isAbsolute)return new Ls(e,!0,0);if(!t)return new Ls(e,!1,NaN);if(t.parent===null)return new Ls(t,!0,0);let r=Gh(n.commands[0])?0:1,i=t.segments.length-1+r;return Pj(t,i,n.numberOfDoubleDots)}function Pj(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new Ls(r,!1,i-o)}function kj(n){return Jc(n[0])?n[0].outlets:{[he]:n}}function iA(n,e,t){if(n??=new Ne([],{}),n.segments.length===0&&n.hasChildren())return Qc(n,e,t);let r=Oj(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ne(n.segments.slice(0,r.pathIndex),{});return o.children[he]=new Ne(n.segments.slice(r.pathIndex),n.children),Qc(o,0,i)}else return r.match&&i.length===0?new Ne(n.segments,{}):r.match&&!n.hasChildren()?hv(n,e,t):r.match?Qc(n,0,i):hv(n,e,t)}function Qc(n,e,t){if(t.length===0)return new Ne(n.segments,{});{let r=kj(t),i={};if(Object.keys(r).some(o=>o!==he)&&n.children[he]&&n.numberOfChildren===1&&n.children[he].segments.length===0){let o=Qc(n.children[he],e,t);return new Ne(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=iA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ne(n.segments,i)}}function Oj(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Jc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!LS(c,l,s))return o;r+=2}else{if(!LS(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function hv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Jc(o)){let c=Fj(o.outlets);return new Ne(r,c)}if(i===0&&Gh(t[0])){let c=n.segments[e];r.push(new lo(c.path,VS(t[0]))),i++;continue}let s=Jc(o)?o.outlets[he]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Gh(a)?(r.push(new lo(s,VS(a))),i+=2):(r.push(new lo(s,{})),i++)}return new Ne(r,{})}function Fj(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=hv(new Ne([],{}),0,r))}),e}function VS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function LS(n,e,t){return n==t.path&&or(e,t.parameters)}var Yc="imperative",_t=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(_t||{}),bn=class{constructor(e,t){this.id=e,this.url=t}},zs=class extends bn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=_t.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sr=class extends bn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=_t.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},yn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(yn||{}),Kh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Kh||{}),Nr=class extends bn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=_t.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},di=class extends bn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=_t.NavigationSkipped}},Xc=class extends bn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=_t.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qh=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=_t.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fv=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=_t.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pv=class extends bn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=_t.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},gv=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=_t.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mv=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=_t.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yv=class{constructor(e){this.route=e,this.type=_t.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},vv=class{constructor(e){this.route=e,this.type=_t.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_v=class{constructor(e){this.snapshot=e,this.type=_t.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wv=class{constructor(e){this.snapshot=e,this.type=_t.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ev=class{constructor(e){this.snapshot=e,this.type=_t.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iv=class{constructor(e){this.snapshot=e,this.type=_t.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=_t.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},eu=class{},Hs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Vj(n,e){return n.providers&&!n._injector&&(n._injector=hh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Bn(n){return n.outlet||he}function Lj(n,e){let t=n.filter(r=>Bn(r)===e);return t.push(...n.filter(r=>Bn(r)!==e)),t}function au(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Dv=class{get injector(){return au(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new cu(this.rootInjector),this.attachRef=null}},cu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Dv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(F(cn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Cv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Cv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=bv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return bv(e,this._root).map(t=>t.value)}};function Cv(n,e){if(n===e.value)return e;for(let t of e.children){let r=Cv(n,t);if(r)return r}return null}function bv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=bv(n,t);if(r.length)return r.unshift(e),r}return[]}var mn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Vs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Jh=class extends Zh{constructor(e,t){super(e),this.snapshot=t,kv(this,e)}toString(){return this.snapshot.toString()}};function oA(n){let e=jj(n),t=new Et([new lo("",{})]),r=new Et({}),i=new Et({}),o=new Et({}),s=new Et(""),a=new po(t,r,o,s,i,he,n,e.root);return a.snapshot=e.root,new Jh(new mn(a,[]),e)}function jj(n){let e={},t={},r={},i="",o=new js([],e,r,i,t,he,n,null,{});return new ef("",new mn(o,[]))}var po=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Q(l=>l[ou]))??ee(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>Bs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>Bs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Xh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&aA(i)&&(r.resolve[ou]=i.title),r}var js=class{get title(){return this.data?.[ou]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ef=class extends Zh{constructor(e,t){super(t),this.url=e,kv(this,t)}toString(){return sA(this._root)}};function kv(n,e){e.value._routerState=n,e.children.forEach(t=>kv(n,t))}function sA(n){let e=n.children.length>0?` { ${n.children.map(sA).join(", ")} } `:"";return`${n.value}${e}`}function sv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,or(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),or(e.params,t.params)||n.paramsSubject.next(t.params),hj(e.url,t.url)||n.urlSubject.next(t.url),or(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Tv(n,e){let t=or(n.params,e.params)&&mj(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Tv(n.parent,e.parent))}function aA(n){return typeof n.title=="string"||n.title===null}var Ov=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.parentContexts=V(cu),this.location=V(xc),this.changeDetector=V(oo),this.inputBinder=V(sf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Sv(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Qt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[eo]})}}return n})(),Sv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===po?this.route:e===cu?this.childContexts:this.parent.get(e,t)}},sf=new G(""),jS=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ac([r.queryParams,r.params,r.data]).pipe(We(([o,s,a],c)=>(a=P(P(P({},o),s),a),c===0?ee(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=xT(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function Uj(n,e,t){let r=tu(n,e._root,t?t._root:void 0);return new Jh(r,e)}function tu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Bj(n,e,t);return new mn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>tu(n,a)),s}}let r=$j(e.value),i=e.children.map(o=>tu(n,o));return new mn(r,i)}}function Bj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return tu(n,r,i);return tu(n,r)})}function $j(n){return new po(new Et(n.url),new Et(n.params),new Et(n.queryParams),new Et(n.fragment),new Et(n.data),n.outlet,n.component,n)}var nu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},cA="ngNavigationCancelingError";function tf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=fo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=uA(!1,yn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function uA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[cA]=!0,t.cancellationCode=e,t}function zj(n){return lA(n)&&fo(n.url)}function lA(n){return!!n&&n[cA]}var Hj=(n,e,t,r)=>Q(i=>(new Av(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Av=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),sv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Vs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Vs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Vs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Vs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Iv(o.value.snapshot))}),e.children.length&&this.forwardEvent(new wv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(sv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),sv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},nf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Us=class{constructor(e,t){this.component=e,this.route=t}};function qj(n,e,t){let r=n._root,i=e?e._root:null;return Wc(r,i,t,[r.value])}function Gj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Gs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!qD(n)?n:e.get(n):r}function Wc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Vs(e);return n.children.forEach(s=>{Wj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Zc(a,t.getContext(s),i)),i}function Wj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Kj(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new nf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Wc(n,e,a?a.children:null,r,i):Wc(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Us(a.outlet.component,s))}else s&&Zc(e,a,i),i.canActivateChecks.push(new nf(r)),o.component?Wc(n,null,a?a.children:null,r,i):Wc(n,null,t,r,i);return i}function Kj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ho(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ho(n.url,e.url)||!or(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tv(n,e)||!or(n.queryParams,e.queryParams);case"paramsChange":default:return!Tv(n,e)}}function Zc(n,e,t){let r=Vs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Zc(s,e.children.getContext(o),t):Zc(s,null,t):Zc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Us(e.outlet.component,i)):t.canDeactivateChecks.push(new Us(null,i)):t.canDeactivateChecks.push(new Us(null,i))}function uu(n){return typeof n=="function"}function Qj(n){return typeof n=="boolean"}function Yj(n){return n&&uu(n.canLoad)}function Zj(n){return n&&uu(n.canActivate)}function Jj(n){return n&&uu(n.canActivateChild)}function Xj(n){return n&&uu(n.canDeactivate)}function eU(n){return n&&uu(n.canMatch)}function dA(n){return n instanceof Ir||n?.name==="EmptyError"}var $h=Symbol("INITIAL_VALUE");function qs(){return We(n=>ac(n.map(e=>e.pipe(Dr(1),Hi($h)))).pipe(Q(e=>{for(let t of e)if(t!==!0){if(t===$h)return $h;if(t===!1||tU(t))return t}return!0}),pt(e=>e!==$h),Dr(1)))}function tU(n){return fo(n)||n instanceof nu}function nU(n,e){return it(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ee(me(P({},t),{guardsResult:!0})):rU(s,r,i,n).pipe(it(a=>a&&Qj(a)?iU(r,o,n,e):ee(a)),Q(a=>me(P({},t),{guardsResult:a})))})}function rU(n,e,t,r){return Ie(n).pipe(it(i=>uU(i.component,i.route,t,e,r)),on(i=>i!==!0,!0))}function iU(n,e,t,r){return Ie(e).pipe(Zr(i=>ns(sU(i.route.parent,r),oU(i.route,r),cU(n,i.path,t),aU(n,i.route,t))),on(i=>i!==!0,!0))}function oU(n,e){return n!==null&&e&&e(new Ev(n)),ee(!0)}function sU(n,e){return n!==null&&e&&e(new _v(n)),ee(!0)}function aU(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>td(()=>{let s=au(e)??t,a=Gs(o,s),c=Zj(a)?a.canActivate(e,n):Ln(s,()=>a(e,n));return fi(c).pipe(on())}));return ee(i).pipe(qs())}function cU(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Gj(s)).filter(s=>s!==null).map(s=>td(()=>{let a=s.guards.map(c=>{let l=au(s.node)??t,h=Gs(c,l),p=Jj(h)?h.canActivateChild(r,n):Ln(l,()=>h(r,n));return fi(p).pipe(on())});return ee(a).pipe(qs())}));return ee(o).pipe(qs())}function uU(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let c=au(e)??i,l=Gs(a,c),h=Xj(l)?l.canDeactivate(n,e,t,r):Ln(c,()=>l(n,e,t,r));return fi(h).pipe(on())});return ee(s).pipe(qs())}function lU(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=Gs(s,n),c=Yj(a)?a.canLoad(e,t):Ln(n,()=>a(e,t));return fi(c)});return ee(o).pipe(qs(),hA(r))}function hA(n){return Eg(Xe(e=>{if(typeof e!="boolean")throw tf(n,e)}),Q(e=>e===!0))}function dU(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=Gs(s,n),c=eU(a)?a.canMatch(e,t):Ln(n,()=>a(e,t));return fi(c)});return ee(o).pipe(qs(),hA(r))}var ru=class{constructor(e){this.segmentGroup=e||null}},iu=class extends Error{constructor(e){super(),this.urlTree=e}};function Fs(n){return ts(new ru(n))}function hU(n){return ts(new Z(4e3,!1))}function fU(n){return ts(uA(!1,yn.GuardRejected))}var Mv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[he])return hU(`${e.redirectTo}`);i=i.children[he]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:D,title:A}=i,M=Ln(o,()=>a({params:y,data:D,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:A}));if(M instanceof Pr)throw new iu(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new iu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Pr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ne(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},xv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pU(n,e,t,r,i){let o=fA(n,e,t);return o.matched?(r=Vj(e,r),dU(r,e,t,i).pipe(Q(s=>s===!0?o:P({},xv)))):ee(o)}function fA(n,e,t){if(e.path==="**")return gU(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},xv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||dj)(t,n,e);if(!i)return P({},xv);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function gU(n){return{matched:!0,parameters:n.length>0?GS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function US(n,e,t,r){return t.length>0&&vU(n,t,r)?{segmentGroup:new Ne(e,yU(r,new Ne(t,n.children))),slicedSegments:[]}:t.length===0&&_U(n,t,r)?{segmentGroup:new Ne(n.segments,mU(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ne(n.segments,n.children),slicedSegments:t}}function mU(n,e,t,r){let i={};for(let o of t)if(af(n,e,o)&&!r[Bn(o)]){let s=new Ne([],{});i[Bn(o)]=s}return P(P({},r),i)}function yU(n,e){let t={};t[he]=e;for(let r of n)if(r.path===""&&Bn(r)!==he){let i=new Ne([],{});t[Bn(r)]=i}return t}function vU(n,e,t){return t.some(r=>af(n,e,r)&&Bn(r)!==he)}function _U(n,e,t){return t.some(r=>af(n,e,r))}function af(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function wU(n,e,t){return e.length===0&&!n.children[t]}var Rv=class{};function EU(n,e,t,r,i,o,s="emptyOnly"){return new Nv(n,e,t,r,i,s,o).recognize()}var IU=31,Nv=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Mv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=US(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:t,rootSnapshot:r})=>{let i=new mn(r,t),o=new ef("",i),s=xj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new js([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,he,t).pipe(Q(r=>({children:r,rootSnapshot:t})),Yr(r=>{if(r instanceof iu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ru?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Q(s=>s instanceof mn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ie(o).pipe(Zr(s=>{let a=r.children[s],c=Lj(t,s);return this.processSegmentGroup(e,c,a,s,i)}),zi((s,a)=>(s.push(...a),s)),Jr(null),Ng(),it(s=>{if(s===null)return Fs(r);let a=pA(s);return DU(a),ee(a)}))}processSegment(e,t,r,i,o,s,a){return Ie(t).pipe(Zr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Yr(l=>{if(l instanceof ru)return ee(null);throw l}))),on(c=>!!c),Yr(c=>{if(dA(c))return wU(r,i,o)?ee(new Rv):Fs(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Bn(r)!==s&&(s===he||!af(i,o,r))?Fs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Fs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=fA(t,i,o);if(!c)return Fs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>IU&&(this.allowRedirects=!1));let y=new js(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,BS(i),Bn(i),i.component??i._loadedComponent??null,i,$S(i)),D=Xh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(it(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=pU(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(We(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(We(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=c,D=new js(m,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,BS(r),Bn(r),r.component??r._loadedComponent??null,r,$S(r)),A=Xh(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(A.params),D.data=Object.freeze(A.data);let{segmentGroup:M,slicedSegments:j}=US(t,m,y,l);if(j.length===0&&M.hasChildren())return this.processChildren(h,l,M,D).pipe(Q(L=>new mn(D,L)));if(l.length===0&&j.length===0)return ee(new mn(D,[]));let q=Bn(r)===o;return this.processSegment(h,l,M,j,q?he:o,!0,D).pipe(Q(L=>new mn(D,L instanceof mn?[L]:[])))}))):Fs(t)))}getChildConfig(e,t,r){return t.children?ee({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ee({routes:t._loadedRoutes,injector:t._loadedInjector}):lU(e,t,r,this.urlSerializer).pipe(it(i=>i?this.configLoader.loadChildren(e,t).pipe(Xe(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):fU(t))):ee({routes:[],injector:e})}};function DU(n){n.sort((e,t)=>e.value.outlet===he?-1:t.value.outlet===he?1:e.value.outlet.localeCompare(t.value.outlet))}function CU(n){let e=n.value.routeConfig;return e&&e.path===""}function pA(n){let e=[],t=new Set;for(let r of n){if(!CU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=pA(r.children);e.push(new mn(r.value,i))}return e.filter(r=>!t.has(r))}function BS(n){return n.data||{}}function $S(n){return n.resolve||{}}function bU(n,e,t,r,i,o){return it(s=>EU(n,e,t,r,s.extractedUrl,i,o).pipe(Q(({state:a,tree:c})=>me(P({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function TU(n,e){return it(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ee(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of gA(c))s.add(l);let a=0;return Ie(s).pipe(Zr(c=>o.has(c)?SU(c,r,n,e):(c.data=Xh(c,c.parent,n).resolve,ee(void 0))),Xe(()=>a++),is(1),it(c=>a===s.size?ee(t):Ft))})}function gA(n){let e=n.children.map(t=>gA(t)).flat();return[n,...e]}function SU(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!aA(i)&&(o[ou]=i.title),AU(o,n,e,r).pipe(Q(s=>(n._resolvedData=s,n.data=Xh(n,n.parent,t).resolve,null)))}function AU(n,e,t,r){let i=uv(n);if(i.length===0)return ee({});let o={};return Ie(i).pipe(it(s=>MU(n[s],e,t,r).pipe(on(),Xe(a=>{if(a instanceof nu)throw tf(new $s,a);o[s]=a}))),is(1),xg(o),Yr(s=>dA(s)?Ft:ts(s)))}function MU(n,e,t,r){let i=au(e)??r,o=Gs(n,i),s=o.resolve?o.resolve(e,t):Ln(i,()=>o(e,t));return fi(s)}function av(n){return We(e=>{let t=n(e);return t?Ie(t).pipe(Q(()=>e)):ee(e)})}var mA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===he);return r}getResolvedTitleForRoute(t){return t.data[ou]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(xU),providedIn:"root"})}}return n})(),xU=(()=>{class n extends mA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(F(oS))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lu=new G("",{providedIn:"root",factory:()=>({})}),RU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=mt({type:n,selectors:[["ng-component"]],standalone:!0,features:[vT],decls:1,vars:0,template:function(r,i){r&1&&pn(0,"router-outlet")},dependencies:[Ov],encapsulation:2})}}return n})();function Fv(n){let e=n.children&&n.children.map(Fv),t=e?me(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==he&&(t.component=RU),t}var rf=new G(""),Vv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(Eh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ee(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=fi(t.loadComponent()).pipe(Q(yA),Xe(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),rs(()=>{this.componentLoaders.delete(t)})),i=new Zo(r,()=>new ze).pipe(Yo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=NU(r,this.compiler,t,this.onLoadEndListener).pipe(rs(()=>{this.childrenLoaders.delete(r)})),s=new Zo(o,()=>new ze).pipe(Yo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function NU(n,e,t,r){return fi(n.loadChildren()).pipe(Q(yA),it(i=>i instanceof vc||Array.isArray(i)?ee(i):Ie(e.compileModuleAsync(i))),Q(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(rf,[],{optional:!0,self:!0}).flat()),{routes:s.map(Fv),injector:o}}))}function PU(n){return n&&typeof n=="object"&&"default"in n}function yA(n){return PU(n)?n.default:n}var Lv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(kU),providedIn:"root"})}}return n})(),kU=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vA=new G(""),_A=new G("");function OU(n,e,t){let r=n.get(_A),i=n.get(jt);return n.get(Ee).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),FU(n))),{onViewTransitionCreated:c}=r;return c&&Ln(n,()=>c({transition:a,from:e,to:t})),s})}function FU(n){return new Promise(e=>{by({read:()=>setTimeout(e)},{injector:n})})}var VU=new G(""),jv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ze,this.transitionAbortSubject=new ze,this.configLoader=V(Vv),this.environmentInjector=V(cn),this.urlSerializer=V(su),this.rootContexts=V(cu),this.location=V(Ms),this.inputBindingEnabled=V(sf,{optional:!0})!==null,this.titleStrategy=V(mA),this.options=V(lu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(Lv),this.createViewTransition=V(vA,{optional:!0}),this.navigationErrorHandler=V(VU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null;let t=i=>this.events.next(new yv(i)),r=i=>this.events.next(new vv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(me(P(P({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Et({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Yc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pt(o=>o.id!==0),Q(o=>me(P({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),We(o=>{let s=!1,a=!1;return ee(o).pipe(We(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",yn.SupersededByNewNavigation),Ft;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?me(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new di(c.id,this.urlSerializer.serialize(c.rawUrl),p,Kh.IgnoredSameUrlNavigation)),c.resolve(!1),Ft}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ee(c).pipe(We(p=>{let m=this.transitions?.getValue();return this.events.next(new zs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Ft:Promise.resolve(p)}),bU(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Xe(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=me(P({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Qh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:D,extras:A}=c,M=new zs(p,this.urlSerializer.serialize(m),y,D);this.events.next(M);let j=oA(this.rootComponentType).snapshot;return this.currentTransition=o=me(P({},c),{targetSnapshot:j,urlAfterRedirects:m,extras:me(P({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ee(o)}else{let p="";return this.events.next(new di(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Kh.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Ft}}),Xe(c=>{let l=new fv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Q(c=>(this.currentTransition=o=me(P({},c),{guards:qj(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),nU(this.environmentInjector,c=>this.events.next(c)),Xe(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw tf(this.urlSerializer,c.guardsResult);let l=new pv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),pt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",yn.GuardRejected),!1)),av(c=>{if(c.guards.canActivateChecks.length)return ee(c).pipe(Xe(l=>{let h=new gv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),We(l=>{let h=!1;return ee(l).pipe(TU(this.paramsInheritanceStrategy,this.environmentInjector),Xe({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",yn.NoDataFromResolver)}}))}),Xe(l=>{let h=new mv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),av(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Xe(m=>{h.component=m}),Q(()=>{})));for(let m of h.children)p.push(...l(m));return p};return ac(l(c.targetSnapshot.root)).pipe(Jr(null),Dr(1))}),av(()=>this.afterPreactivation()),We(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Ie(h).pipe(Q(()=>o)):ee(o)}),Q(c=>{let l=Uj(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=me(P({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Xe(()=>{this.events.next(new eu)}),Hj(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Dr(1),Xe({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),kg(this.transitionAbortSubject.pipe(Xe(c=>{throw c}))),rs(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",yn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Yr(c=>{if(a=!0,lA(c))this.events.next(new Nr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),zj(c)?this.events.next(new Hs(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Xc(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=Ln(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof nu){let{message:p,cancellationCode:m}=tf(this.urlSerializer,h);this.events.next(new Nr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Hs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Ft}))}))}cancelNavigationTransition(t,r,i){let o=new Nr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LU(n){return n!==Yc}var jU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(UU),providedIn:"root"})}}return n})(),Pv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},UU=(()=>{class n extends Pv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tc(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>V(BU),providedIn:"root"})}}return n})(),BU=(()=>{class n extends wA{constructor(){super(...arguments),this.location=V(Ms),this.urlSerializer=V(su),this.options=V(lu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(Lv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Pr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=oA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof zs)this.stateMemento=this.createStateMemento();else if(t instanceof di)this.rawUrlTree=r.initialUrl;else if(t instanceof Qh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof eu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Nr&&(t.code===yn.GuardRejected||t.code===yn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Xc?this.restoreHistory(r,!0):t instanceof sr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Pr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=P(P({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=P(P({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tc(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Kc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Kc||{});function EA(n,e){n.events.pipe(pt(t=>t instanceof sr||t instanceof Nr||t instanceof Xc||t instanceof di),Q(t=>t instanceof sr||t instanceof di?Kc.COMPLETE:(t instanceof Nr?t.code===yn.Redirect||t.code===yn.SupersededByNewNavigation:!1)?Kc.REDIRECTING:Kc.FAILED),pt(t=>t!==Kc.REDIRECTING),Dr(1)).subscribe(()=>{e()})}function $U(n){throw n}var zU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},hi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=V(mh),this.stateManager=V(wA),this.options=V(lu,{optional:!0})||{},this.pendingTasks=V(to),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(jv),this.urlSerializer=V(su),this.location=V(Ms),this.urlHandlingStrategy=V(Lv),this._events=new ze,this.errorHandler=this.options.errorHandler||$U,this.navigated=!1,this.routeReuseStrategy=V(jU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(rf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(sf,{optional:!0}),this.eventsSubscription=new Ze,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Nr&&r.code!==yn.Redirect&&r.code!==yn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sr)this.navigated=!0;else if(r instanceof Hs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||LU(i.source)},s);this.scheduleNavigation(a,Yc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}GU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Yc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=P({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Fv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=tA(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return nA(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=fo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Yc,null,r)}navigate(t,r={skipLocationChange:!1}){return qU(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},zU):r===!1?i=P({},HU):i=r,fo(t))return OS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return OS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return EA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qU(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Z(4008,!1)}function GU(n){return!(n instanceof eu)&&!(n instanceof Hs)}var IA=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new ze,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof sr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(fo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:vb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:fo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(ue(hi),ue(po),ey("tabindex"),ue(no),ue(ci),ue(xr))}}static{this.\u0275dir=Qt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&fh("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",so],skipLocationChange:[2,"skipLocationChange","skipLocationChange",so],replaceUrl:[2,"replaceUrl","replaceUrl",so],routerLink:"routerLink"},standalone:!0,features:[Cy,eo]})}}return n})();var of=class{};var WU=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(pt(t=>t instanceof sr),Zr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=hh(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ie(i).pipe(Qr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ee(null);let o=i.pipe(it(s=>s===null?ee(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ie([o,s]).pipe(Qr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(F(hi),F(Eh),F(cn),F(of),F(Vv))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),DA=new G(""),KU=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof zs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof sr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof di&&t.code===Kh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Yh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Yh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){Pb()}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function QU(n){return n.routerState.root}function du(n,e){return{\u0275kind:n,\u0275providers:e}}function YU(){let n=V(Kt);return e=>{let t=n.get(Un);if(e!==t.components[0])return;let r=n.get(hi),i=n.get(CA);n.get(Uv)===1&&r.initialNavigation(),n.get(bA,null,ge.Optional)?.setUpPreloading(),n.get(DA,null,ge.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var CA=new G("",{factory:()=>new ze}),Uv=new G("",{providedIn:"root",factory:()=>1});function ZU(){return du(2,[{provide:Uv,useValue:0},{provide:_h,multi:!0,deps:[Kt],useFactory:e=>{let t=e.get(FT,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(hi),o=e.get(CA);EA(i,()=>{r(!0)}),e.get(jv).afterPreactivation=()=>(r(!0),o.closed?ee(void 0):o),i.initialNavigation()}))}}])}function JU(){return du(3,[{provide:_h,multi:!0,useFactory:()=>{let e=V(hi);return()=>{e.setUpLocationChangeListener()}}},{provide:Uv,useValue:2}])}var bA=new G("");function XU(n){return du(0,[{provide:bA,useExisting:WU},{provide:of,useExisting:n}])}function eB(){return du(8,[jS,{provide:sf,useExisting:jS}])}function tB(n){let e=[{provide:vA,useValue:OU},{provide:_A,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return du(9,e)}var zS=new G("ROUTER_FORROOT_GUARD"),nB=[Ms,{provide:su,useClass:$s},hi,cu,{provide:po,useFactory:QU,deps:[hi]},Vv,[]],Bv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[nB,[],{provide:rf,multi:!0,useValue:t},{provide:zS,useFactory:sB,deps:[[hi,new Cs,new Um]]},{provide:lu,useValue:r||{}},r?.useHash?iB():oB(),rB(),r?.preloadingStrategy?XU(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?aB(r):[],r?.bindToComponentInputs?eB().\u0275providers:[],r?.enableViewTransitions?tB().\u0275providers:[],cB()]}}static forChild(t){return{ngModule:n,providers:[{provide:rf,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(F(zS,8))}}static{this.\u0275mod=yt({type:n})}static{this.\u0275inj=gt({})}}return n})();function rB(){return{provide:DA,useFactory:()=>{let n=V(UT),e=V(Ee),t=V(lu),r=V(jv),i=V(su);return t.scrollOffset&&n.setOffset(t.scrollOffset),new KU(i,r,n,e,t)}}}function iB(){return{provide:xr,useClass:LT}}function oB(){return{provide:xr,useClass:Ly}}function sB(n){return"guarded"}function aB(n){return[n.initialNavigation==="disabled"?JU().\u0275providers:[],n.initialNavigation==="enabledBlocking"?ZU().\u0275providers:[]]}var HS=new G("");function cB(){return[{provide:HS,useFactory:YU},{provide:As,multi:!0,useExisting:HS}]}var cf=class{constructor(){this.name="",this.goalLife="",this.photoUrl="",this.email="",this.phoneNumber="",this.location="",this.socialNetwork=""}};var hB=new Map,fB={activated:!1,tokenObservers:[]},pB={initialized:!1,enabled:!1};function $n(n){return hB.get(n)||Object.assign({},fB)}function xA(){return pB}var gB="https://content-firebaseappcheck.googleapis.com/v1";var mB="exchangeDebugToken",TA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},_W=24*60*60*1e3;var zv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new sg,this.pending.promise.catch(t=>{}),yield yB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new sg,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function yB(n){return new Promise(e=>{setTimeout(e,n)})}var vB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},pi=new m0("appCheck","AppCheck",vB);function RA(n){if(!$n(n).activated)throw pi.create("use-before-activation",{appName:n.name})}function NA(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(y){throw pi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw pi.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw pi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw pi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function PA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${gB}/projects/${t}/apps/${r}:${mB}?key=${i}`,body:{debug_token:e}}}var _B="firebase-app-check-database",wB=1,Hv="firebase-app-check-store";var uf=null;function EB(){return uf||(uf=new Promise((n,e)=>{try{let t=indexedDB.open(_B,wB);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(pi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Hv,{keyPath:"compositeKey"})}}}catch(t){e(pi.create("storage-open",{originalErrorMessage:t?.message}))}}),uf)}function IB(n,e){return DB(CB(n),e)}function DB(n,e){return N(this,null,function*(){let r=(yield EB()).transaction(Hv,"readwrite"),o=r.objectStore(Hv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(pi.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function CB(n){return`${n.options.appId}-${n.name}`}var qv=new bl("@firebase/app-check");function $v(n,e){return Cl()?IB(n,e).catch(t=>{qv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kA(){return xA().enabled}function OA(){return N(this,null,function*(){let n=xA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var bB={error:"UNKNOWN_ERROR"};function TB(n){return f0.encodeString(JSON.stringify(n),!1)}function Gv(n,e=!1){return N(this,null,function*(){let t=n.app;RA(t);let r=$n(t),i=r.token,o;if(i&&!hu(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(hu(c)?i=c:yield $v(t,void 0))}if(!e&&i&&hu(i))return{token:i.token};let s=!1;if(kA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=NA(PA(t,yield OA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield $v(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield $n(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?qv.warn(c.message):qv.error(c),o=c}let a;return i?o?hu(i)?a={token:i.token,internalError:o}:a=AA(o):(a={token:i.token},r.token=i,yield $v(t,i)):a=AA(o),s&&xB(t,a),a})}function SB(n){return N(this,null,function*(){let e=n.app;RA(e);let{provider:t}=$n(e);if(kA()){let r=yield OA(),{token:i}=yield NA(PA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function AB(n,e,t,r){let{app:i}=n,o=$n(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&hu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),SA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>SA(n))}function FA(n,e){let t=$n(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function SA(n){let{app:e}=n,t=$n(e),r=t.tokenRefresher;r||(r=MB(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function MB(n){let{app:e}=n;return new zv(()=>N(this,null,function*(){let t=$n(e),r;if(t.token?r=yield Gv(n,!0):r=yield Gv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=$n(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},TA.RETRIAL_MIN_WAIT,TA.RETRIAL_MAX_WAIT)}function xB(n,e){let t=$n(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function hu(n){return n.expireTimeMillis-Date.now()>0}function AA(n){return{token:TB(bB),error:n}}var Wv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=$n(this.app);for(let t of e)FA(this.app,t.next);return Promise.resolve()}};function RB(n,e){return new Wv(n,e)}function NB(n){return{getToken:e=>Gv(n,e),getLimitedUseToken:()=>SB(n),addTokenListener:e=>AB(n,"INTERNAL",e),removeTokenListener:e=>FA(n.app,e)}}var PB="@firebase/app-check",kB="0.8.8";var OB="app-check",MA="app-check-internal";function FB(){ec(new ji(OB,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return RB(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(MA).initialize()})),ec(new ji(MA,n=>{let e=n.getProvider("app-check").getImmediate();return NB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Kr(PB,kB)}FB();var VB=["localhost","0.0.0.0","127.0.0.1"],RW=typeof window<"u"&&VB.includes(window.location.hostname);var Kv=new G("angularfire2.auth.use-emulator"),Qv=new G("angularfire2.auth.settings"),Yv=new G("angularfire2.auth.tenant-id"),Zv=new G("angularfire2.auth.langugage-code"),Jv=new G("angularfire2.auth.use-device-language"),Xv=new G("angularfire.auth.persistence"),e_=(n,e,t,r,i,o,s,a)=>Uh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),LA=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,y){let D=new ze,A=ee(void 0).pipe(wn(s.outsideAngular),We(()=>o.runOutsideAngular(()=>import("./chunk-IDFRXQP6.js"))),Q(()=>qc(t,o,r)),Q(M=>e_(M,o,a,l,h,p,c,m)),rd({bufferSize:1,refCount:!1}));if(Rr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ee(null);else{A.pipe(on()).subscribe();let M=A.pipe(We(L=>L.getRedirectResult().then(Y=>Y,()=>null)),Xt,rd({bufferSize:1,refCount:!1})),j=A.pipe(We(L=>new ye(Y=>({unsubscribe:o.runOutsideAngular(()=>L.onAuthStateChanged(ne=>Y.next(ne),ne=>Y.error(ne),()=>Y.complete()))})))),q=A.pipe(We(L=>new ye(Y=>({unsubscribe:o.runOutsideAngular(()=>L.onIdTokenChanged(ne=>Y.next(ne),ne=>Y.error(ne),()=>Y.complete()))}))));this.authState=M.pipe(id(j),Rn(s.outsideAngular),wn(s.insideAngular)),this.user=M.pipe(id(q),Rn(s.outsideAngular),wn(s.insideAngular)),this.idToken=this.user.pipe(We(L=>L?Ie(L.getIdToken()):ee(null))),this.idTokenResult=this.user.pipe(We(L=>L?Ie(L.getIdTokenResult()):ee(null))),this.credential=Mg(M,D,this.authState.pipe(pt(L=>!L))).pipe(Q(L=>L?.user?L:null),Rn(s.outsideAngular),wn(s.insideAngular))}return NS(this,A,o,{spy:{apply:(M,j,q)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&q.then(L=>D.next(L))}}})}static \u0275fac=function(r){return new(r||n)(F(ks),F(Os,8),F(It),F(Ee),F(Lh),F(Kv,8),F(Qv,8),F(Yv,8),F(Zv,8),F(Jv,8),F(Xv,8),F(uo,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var jA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},UA={};var gi,t_;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,C,T){for(var _=Array(arguments.length-2),yr=2;yr<arguments.length;yr++)_[yr-2]=arguments[yr];return v.prototype[C].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)I[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],C=E.g[2];var T=E.g[3],_=v+(T^w&(C^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[2]+606105819&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[6]+2821735955&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[10]+4294925233&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[14]+2792965006&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(C^T&(w^C))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[11]+643717713&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[15]+3634488961&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[3]+4107603335&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[7]+1735328473&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(w^C^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[11]+1839030562&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[7]+4139469664&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[3]+3572445317&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[15]+530742520&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(C^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[14]+2878612391&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[10]+4293915773&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[6]+2734768916&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[2]+718787259&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,C=this.h,T=0;T<v;){if(C==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[C++]=E.charCodeAt(T++),C==this.blockSize){i(this,I),C=0;break}}else for(;T<v;)if(I[C++]=E[T++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,C=E.length-1;0<=C;C--){var T=E[C]|0;I&&T==v||(w[C]=T,I=!1)}this.g=w}var a={};function c(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return M(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return M(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,C=0;C<E.length;C+=8){var T=Math.min(8,E.length-C),_=parseInt(E.substring(C,C+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=c(0),m=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(A(this))return-M(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(A(this))return"-"+M(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var C=Y(w,v).g;w=j(w,C.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,D(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}n.l=function(E){return E=j(this,E),A(E)?-1:D(E)?0:1};function M(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return A(this)?M(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,C=0;C<=v;C++){var T=I+(this.i(C)&65535)+(E.i(C)&65535),_=(T>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=_>>>16,T&=65535,_&=65535,w[C]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function j(E,v){return E.add(M(v))}n.j=function(E){if(D(this)||D(E))return p;if(A(this))return A(E)?M(this).j(M(E)):M(M(this).j(E));if(A(E))return M(this.j(M(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<E.g.length;C++){var T=this.i(I)>>>16,_=this.i(I)&65535,yr=E.i(C)>>>16,ka=E.i(C)&65535;w[2*I+2*C]+=_*ka,q(w,2*I+2*C),w[2*I+2*C+1]+=T*ka,q(w,2*I+2*C+1),w[2*I+2*C+1]+=_*yr,q(w,2*I+2*C+1),w[2*I+2*C+2]+=T*yr,q(w,2*I+2*C+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function q(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function L(E,v){this.g=E,this.h=v}function Y(E,v){if(D(v))throw Error("division by zero");if(D(E))return new L(p,p);if(A(E))return v=Y(M(E),v),new L(M(v.g),M(v.h));if(A(v))return v=Y(E,M(v)),new L(M(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=ne(w),I=ne(I);var C=X(w,1),T=X(I,1);for(I=X(I,2),w=X(w,2);!D(I);){var _=T.add(I);0>=_.l(E)&&(C=C.add(w),T=_),I=X(I,1),w=X(w,1)}return v=j(E,C.j(v)),new L(C,v)}for(C=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);A(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);D(T)&&(T=m),C=C.add(T),E=j(E,_)}return new L(C,E)}n.A=function(E){return Y(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function ne(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function X(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,C=[],T=0;T<I;T++)C[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,t_=UA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,gi=UA.Integer=s}).apply(typeof jA<"u"?jA:typeof self<"u"?self:typeof window<"u"?window:{});var lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kr={};var n_,jB,Ws,r_,fu,df,i_,o_,s_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof lf=="object"&&lf];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var b=u[g];if(!(b in f))break e;f=f[b]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,b={next:function(){if(!g&&f<u.length){var x=f++;return{value:d(x,u[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),u.apply(d,b)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function D(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,b,x){for(var B=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)B[ke-2]=arguments[ke];return d.prototype[b].apply(g,B)}}function A(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function M(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let b=u.length||0,x=g.length||0;u.length=b+x;for(let B=0;B<x;B++)u[b+B]=g[B]}else u.push(g)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(u){return/^[\s\xa0]*$/.test(u)}function L(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Y(u){return Y[" "](u),u}Y[" "]=function(){};var ne=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function X(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function E(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)u[f]=g[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function C(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function T(u){a.setTimeout(()=>{throw u},0)}function _(){var u=kp;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class yr{constructor(){this.h=this.g=null}add(d,f){let g=ka.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ka=new j(()=>new ON,u=>u.reset());class ON{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Oa,Fa=!1,kp=new yr,cI=()=>{let u=a.Promise.resolve(void 0);Oa=()=>{u.then(FN)}};var FN=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(f){T(f)}var d=ka;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Fa=!1};function Hr(){this.s=this.s,this.C=this.C}Hr.prototype.s=!1,Hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function bt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}bt.prototype.h=function(){this.defaultPrevented=!0};var VN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Va(u,d){if(bt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ne){e:{try{Y(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:LN[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Va.aa.h.call(this)}}D(Va,bt);var LN={2:"touch",3:"pen",4:"mouse"};Va.prototype.h=function(){Va.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var La="closure_listenable_"+(1e6*Math.random()|0),jN=0;function UN(u,d,f,g,b){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++jN,this.da=this.fa=!1}function sl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function al(u){this.src=u,this.g={},this.h=0}al.prototype.add=function(u,d,f,g,b){var x=u.toString();u=this.g[x],u||(u=this.g[x]=[],this.h++);var B=Fp(u,d,g,b);return-1<B?(d=u[B],f||(d.fa=!1)):(d=new UN(d,this.src,x,!!g,b),d.fa=f,u.push(d)),d};function Op(u,d){var f=d.type;if(f in u.g){var g=u.g[f],b=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=b)&&Array.prototype.splice.call(g,b,1),x&&(sl(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Fp(u,d,f,g){for(var b=0;b<u.length;++b){var x=u[b];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return b}return-1}var Vp="closure_lm_"+(1e6*Math.random()|0),Lp={};function uI(u,d,f,g,b){if(g&&g.once)return dI(u,d,f,g,b);if(Array.isArray(d)){for(var x=0;x<d.length;x++)uI(u,d[x],f,g,b);return null}return f=$p(f),u&&u[La]?u.K(d,f,l(g)?!!g.capture:!!g,b):lI(u,d,f,!1,g,b)}function lI(u,d,f,g,b,x){if(!d)throw Error("Invalid event type");var B=l(b)?!!b.capture:!!b,ke=Up(u);if(ke||(u[Vp]=ke=new al(u)),f=ke.add(d,f,g,B,x),f.proxy)return f;if(g=BN(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)VN||(b=B),b===void 0&&(b=!1),u.addEventListener(d.toString(),g,b);else if(u.attachEvent)u.attachEvent(fI(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function BN(){function u(f){return d.call(u.src,u.listener,f)}let d=$N;return u}function dI(u,d,f,g,b){if(Array.isArray(d)){for(var x=0;x<d.length;x++)dI(u,d[x],f,g,b);return null}return f=$p(f),u&&u[La]?u.L(d,f,l(g)?!!g.capture:!!g,b):lI(u,d,f,!0,g,b)}function hI(u,d,f,g,b){if(Array.isArray(d))for(var x=0;x<d.length;x++)hI(u,d[x],f,g,b);else g=l(g)?!!g.capture:!!g,f=$p(f),u&&u[La]?(u=u.i,d=String(d).toString(),d in u.g&&(x=u.g[d],f=Fp(x,f,g,b),-1<f&&(sl(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete u.g[d],u.h--)))):u&&(u=Up(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Fp(d,f,g,b)),(f=-1<u?d[u]:null)&&jp(f))}function jp(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[La])Op(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(fI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Up(d))?(Op(f,u),f.h==0&&(f.src=null,d[Vp]=null)):sl(u)}}}function fI(u){return u in Lp?Lp[u]:Lp[u]="on"+u}function $N(u,d){if(u.da)u=!0;else{d=new Va(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&jp(u),u=f.call(g,d)}return u}function Up(u){return u=u[Vp],u instanceof al?u:null}var Bp="__closure_events_fn_"+(1e9*Math.random()>>>0);function $p(u){return typeof u=="function"?u:(u[Bp]||(u[Bp]=function(d){return u.handleEvent(d)}),u[Bp])}function Tt(){Hr.call(this),this.i=new al(this),this.M=this,this.F=null}D(Tt,Hr),Tt.prototype[La]=!0,Tt.prototype.removeEventListener=function(u,d,f,g){hI(this,u,d,f,g)};function Pt(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new bt(d,u);else if(d instanceof bt)d.target=d.target||u;else{var b=d;d=new bt(g,u),I(d,b)}if(b=!0,f)for(var x=f.length-1;0<=x;x--){var B=d.g=f[x];b=cl(B,g,!0,d)&&b}if(B=d.g=u,b=cl(B,g,!0,d)&&b,b=cl(B,g,!1,d)&&b,f)for(x=0;x<f.length;x++)B=d.g=f[x],b=cl(B,g,!1,d)&&b}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)sl(f[g]);delete u.g[d],u.h--}}this.F=null},Tt.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},Tt.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function cl(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,x=0;x<d.length;++x){var B=d[x];if(B&&!B.da&&B.capture==f){var ke=B.listener,wt=B.ha||B.src;B.fa&&Op(u.i,B),b=ke.call(wt,g)!==!1&&b}}return b&&!g.defaultPrevented}function pI(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function gI(u){u.g=pI(()=>{u.g=null,u.i&&(u.i=!1,gI(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class zN extends Hr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:gI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ja(u){Hr.call(this),this.h=u,this.g={}}D(ja,Hr);var mI=[];function yI(u){X(u.g,function(d,f){this.g.hasOwnProperty(f)&&jp(d)},u),u.g={}}ja.prototype.N=function(){ja.aa.N.call(this),yI(this)},ja.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zp=a.JSON.stringify,HN=a.JSON.parse,qN=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Hp(){}Hp.prototype.h=null;function vI(u){return u.h||(u.h=u.i())}function _I(){}var Ua={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qp(){bt.call(this,"d")}D(qp,bt);function Gp(){bt.call(this,"c")}D(Gp,bt);var Oi={},wI=null;function ul(){return wI=wI||new Tt}Oi.La="serverreachability";function EI(u){bt.call(this,Oi.La,u)}D(EI,bt);function Ba(u){let d=ul();Pt(d,new EI(d))}Oi.STAT_EVENT="statevent";function II(u,d){bt.call(this,Oi.STAT_EVENT,u),this.stat=d}D(II,bt);function kt(u){let d=ul();Pt(d,new II(d,u))}Oi.Ma="timingevent";function DI(u,d){bt.call(this,Oi.Ma,u),this.size=d}D(DI,bt);function $a(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function za(){this.g=!0}za.prototype.xa=function(){this.g=!1};function GN(u,d,f,g,b,x){u.info(function(){if(u.g)if(x)for(var B="",ke=x.split("&"),wt=0;wt<ke.length;wt++){var Se=ke[wt].split("=");if(1<Se.length){var St=Se[0];Se=Se[1];var At=St.split("_");B=2<=At.length&&At[1]=="type"?B+(St+"="+Se+"&"):B+(St+"=redacted&")}}else B=null;else B=x;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+B})}function WN(u,d,f,g,b,x,B){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+x+" "+B})}function $o(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+QN(u,f)+(g?" "+g:"")})}function KN(u,d){u.info(function(){return"TIMEOUT: "+d})}za.prototype.info=function(){};function QN(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var x=b[0];if(x!="noop"&&x!="stop"&&x!="close")for(var B=1;B<b.length;B++)b[B]=""}}}}return zp(f)}catch{return d}}var ll={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},CI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wp;function dl(){}D(dl,Hp),dl.prototype.g=function(){return new XMLHttpRequest},dl.prototype.i=function(){return{}},Wp=new dl;function qr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new ja(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bI}function bI(){this.i=null,this.g="",this.h=!1}var TI={},Kp={};function Qp(u,d,f){u.L=1,u.v=gl(vr(d)),u.m=f,u.P=!0,SI(u,null)}function SI(u,d){u.F=Date.now(),hl(u),u.A=vr(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),BI(f.i,"t",g),u.C=0,f=u.j.J,u.h=new bI,u.g=o0(u.j,f?d:null,!u.m),0<u.O&&(u.M=new zN(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var b="readystatechange";Array.isArray(b)||(b&&(mI[0]=b.toString()),b=mI);for(var x=0;x<b.length;x++){var B=uI(f,b[x],g||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Ba(),GN(u.i,u.u,u.A,u.l,u.R,u.m)}qr.prototype.ca=function(u){u=u.target;let d=this.M;d&&_r(u)==3?d.j():this.Y(u)},qr.prototype.Y=function(u){try{if(u==this.g)e:{let At=_r(this.g);var d=this.g.Ba();let qo=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||KI(this.g)))){this.J||At!=4||d==7||(d==8||0>=qo?Ba(3):Ba(2)),Yp(this);var f=this.g.Z();this.X=f;t:if(AI(this)){var g=KI(this.g);u="";var b=g.length,x=_r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fi(this),Ha(this);var B="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(x&&d==b-1)});g.length=0,this.h.g+=u,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,WN(this.i,this.u,this.A,this.l,this.R,At,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,wt=this.g;if((ke=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(ke)){var Se=ke;break t}}Se=null}if(f=Se)$o(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zp(this,f);else{this.o=!1,this.s=3,kt(12),Fi(this),Ha(this);break e}}if(this.P){f=!0;let Mn;for(;!this.J&&this.C<B.length;)if(Mn=YN(this,B),Mn==Kp){At==4&&(this.s=4,kt(14),f=!1),$o(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==TI){this.s=4,kt(15),$o(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else $o(this.i,this.l,Mn,null),Zp(this,Mn);if(AI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||B.length!=0||this.h.h||(this.s=1,kt(16),f=!1),this.o=this.o&&f,!f)$o(this.i,this.l,B,"[Invalid Chunked Response]"),Fi(this),Ha(this);else if(0<B.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),rg(St),St.M=!0,kt(11))}}else $o(this.i,this.l,B,null),Zp(this,B);At==4&&Fi(this),this.o&&!this.J&&(At==4?t0(this.j,this):(this.o=!1,hl(this)))}else fP(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Fi(this),Ha(this)}}}catch{}finally{}};function AI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function YN(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Kp:(f=Number(d.substring(f,g)),isNaN(f)?TI:(g+=1,g+f>d.length?Kp:(d=d.slice(g,g+f),u.C=g+f,d)))}qr.prototype.cancel=function(){this.J=!0,Fi(this)};function hl(u){u.S=Date.now()+u.I,MI(u,u.I)}function MI(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=$a(m(u.ba,u),d)}function Yp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}qr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(KN(this.i,this.A),this.L!=2&&(Ba(),kt(17)),Fi(this),this.s=2,Ha(this)):MI(this,this.S-u)};function Ha(u){u.j.G==0||u.J||t0(u.j,u)}function Fi(u){Yp(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,yI(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Zp(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Jp(f.h,u))){if(!u.K&&Jp(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)wl(f),vl(f);else break e;ng(f),kt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=$a(m(f.Za,f),6e3));if(1>=NI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Li(f,11)}else if((u.K||f.g==u)&&wl(f),!q(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let Se=b[d];if(f.T=Se[0],Se=Se[1],f.G==2)if(Se[0]=="c"){f.K=Se[1],f.ia=Se[2];let St=Se[3];St!=null&&(f.la=St,f.j.info("VER="+f.la));let At=Se[4];At!=null&&(f.Aa=At,f.j.info("SVER="+f.Aa));let qo=Se[5];qo!=null&&typeof qo=="number"&&0<qo&&(g=1.5*qo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Mn=u.g;if(Mn){let Il=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var x=g.h;x.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Xp(x,x.h),x.h=null))}if(g.D){let ig=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;ig&&(g.ya=ig,je(g.I,g.D,ig))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var B=u;if(g.qa=i0(g,g.J?g.ia:null,g.W),B.K){PI(g.h,B);var ke=B,wt=g.L;wt&&(ke.I=wt),ke.B&&(Yp(ke),hl(ke)),g.g=B}else XI(g);0<f.i.length&&_l(f)}else Se[0]!="stop"&&Se[0]!="close"||Li(f,7);else f.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Li(f,7):tg(f):Se[0]!="noop"&&f.l&&f.l.ta(Se),f.v=0)}}Ba(4)}catch{}}var ZN=class{constructor(u,d){this.g=u,this.map=d}};function xI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function RI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function NI(u){return u.h?1:u.g?u.g.size:0}function Jp(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Xp(u,d){u.g?u.g.add(d):u.h=d}function PI(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}xI.prototype.cancel=function(){if(this.i=kI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function kI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return A(u.i)}function JN(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function XN(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function OI(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=XN(u),g=JN(u),b=g.length,x=0;x<b;x++)d.call(void 0,g[x],f&&f[x],u)}var FI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eP(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),b=null;if(0<=g){var x=u[f].substring(0,g);b=u[f].substring(g+1)}else x=u[f];d(x,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Vi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Vi){this.h=u.h,fl(this,u.j),this.o=u.o,this.g=u.g,pl(this,u.s),this.l=u.l;var d=u.i,f=new Wa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),VI(this,f),this.m=u.m}else u&&(d=String(u).match(FI))?(this.h=!1,fl(this,d[1]||"",!0),this.o=qa(d[2]||""),this.g=qa(d[3]||"",!0),pl(this,d[4]),this.l=qa(d[5]||"",!0),VI(this,d[6]||"",!0),this.m=qa(d[7]||"")):(this.h=!1,this.i=new Wa(null,this.h))}Vi.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ga(d,LI,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ga(d,LI,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Ga(f,f.charAt(0)=="/"?rP:nP,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Ga(f,oP)),u.join("")};function vr(u){return new Vi(u)}function fl(u,d,f){u.j=f?qa(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function pl(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function VI(u,d,f){d instanceof Wa?(u.i=d,sP(u.i,u.h)):(f||(d=Ga(d,iP)),u.i=new Wa(d,u.h))}function je(u,d,f){u.i.set(d,f)}function gl(u){return je(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function qa(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ga(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,tP),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function tP(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var LI=/[#\/\?@]/g,nP=/[#\?:]/g,rP=/[#\?]/g,iP=/[#\?@]/g,oP=/#/g;function Wa(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Gr(u){u.g||(u.g=new Map,u.h=0,u.i&&eP(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Wa.prototype,n.add=function(u,d){Gr(this),this.i=null,u=zo(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function jI(u,d){Gr(u),d=zo(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function UI(u,d){return Gr(u),d=zo(u,d),u.g.has(d)}n.forEach=function(u,d){Gr(this),this.g.forEach(function(f,g){f.forEach(function(b){u.call(d,b,g,this)},this)},this)},n.na=function(){Gr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=u[g];for(let x=0;x<b.length;x++)f.push(d[g])}return f},n.V=function(u){Gr(this);let d=[];if(typeof u=="string")UI(this,u)&&(d=d.concat(this.g.get(zo(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return Gr(this),this.i=null,u=zo(this,u),UI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function BI(u,d,f){jI(u,d),0<f.length&&(u.i=null,u.g.set(zo(u,d),A(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),B=this.V(g);for(g=0;g<B.length;g++){var b=x;B[g]!==""&&(b+="="+encodeURIComponent(String(B[g]))),u.push(b)}}return this.i=u.join("&")};function zo(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function sP(u,d){d&&!u.j&&(Gr(u),u.i=null,u.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(jI(this,g),BI(this,b,f))},u)),u.j=d}function aP(u,d){let f=new za;if(a.Image){let g=new Image;g.onload=y(Wr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Wr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Wr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Wr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function cP(u,d){let f=new za,g=new AbortController,b=setTimeout(()=>{g.abort(),Wr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(x=>{clearTimeout(b),x.ok?Wr(f,"TestPingServer: ok",!0,d):Wr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Wr(f,"TestPingServer: error",!1,d)})}function Wr(u,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function uP(){this.g=new qN}function lP(u,d,f){let g=f||"";try{OI(u,function(b,x){let B=b;l(b)&&(B=zp(b)),d.push(g+x+"="+encodeURIComponent(B))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Ka(u){this.l=u.Ub||null,this.j=u.eb||!1}D(Ka,Hp),Ka.prototype.g=function(){return new ml(this.l,this.j)},Ka.prototype.i=function(u){return function(){return u}}({});function ml(u,d){Tt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(ml,Tt),n=ml.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Ya(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qa(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ya(this)),this.g&&(this.readyState=3,Ya(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$I(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function $I(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Qa(this):Ya(this),this.readyState==3&&$I(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Qa(this))},n.Qa=function(u){this.g&&(this.response=u,Qa(this))},n.ga=function(){this.g&&Qa(this)};function Qa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ya(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Ya(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ml.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function zI(u){let d="";return X(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function eg(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=zI(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):je(u,d,f))}function Ye(u){Tt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ye,Tt);var dP=/^https?$/i,hP=["POST","PUT"];n=Ye.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wp.g(),this.v=this.o?vI(this.o):vI(Wp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(x){HI(this,x);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),b=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hP,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,B]of f)this.g.setRequestHeader(x,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{WI(this),this.u=!0,this.g.send(u),this.u=!1}catch(x){HI(this,x)}};function HI(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,qI(u),yl(u)}function qI(u){u.A||(u.A=!0,Pt(u,"complete"),Pt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Pt(this,"complete"),Pt(this,"abort"),yl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yl(this,!0)),Ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?GI(this):this.bb())},n.bb=function(){GI(this)};function GI(u){if(u.h&&typeof s<"u"&&(!u.v[1]||_r(u)!=4||u.Z()!=2)){if(u.u&&_r(u)==4)pI(u.Ea,0,u);else if(Pt(u,"readystatechange"),_r(u)==4){u.h=!1;try{let B=u.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=B===0){var b=String(u.D).match(FI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!dP.test(b?b.toLowerCase():"")}f=g}if(f)Pt(u,"complete"),Pt(u,"success");else{u.m=6;try{var x=2<_r(u)?u.g.statusText:""}catch{x=""}u.l=x+" ["+u.Z()+"]",qI(u)}}finally{yl(u)}}}}function yl(u,d){if(u.g){WI(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||Pt(u,"ready");try{f.onreadystatechange=g}catch{}}}function WI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function _r(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<_r(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),HN(d)}};function KI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function fP(u){let d={};u=(u.g&&2<=_r(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(q(u[g]))continue;var f=C(u[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[b]||[];d[b]=x,x.push(f)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Za(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function QI(u){this.Aa=0,this.i=[],this.j=new za,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Za("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Za("baseRetryDelayMs",5e3,u),this.cb=Za("retryDelaySeedMs",1e4,u),this.Wa=Za("forwardChannelMaxRetries",2,u),this.wa=Za("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new xI(u&&u.concurrentRequestLimit),this.Da=new uP,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=QI.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){kt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=i0(this,null,this.W),_l(this)};function tg(u){if(YI(u),u.G==3){var d=u.U++,f=vr(u.I);if(je(f,"SID",u.K),je(f,"RID",d),je(f,"TYPE","terminate"),Ja(u,f),d=new qr(u,u.j,d),d.L=2,d.v=gl(vr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=o0(d.j,null),d.g.ea(d.v)),d.F=Date.now(),hl(d)}r0(u)}function vl(u){u.g&&(rg(u),u.g.cancel(),u.g=null)}function YI(u){vl(u),u.u&&(a.clearTimeout(u.u),u.u=null),wl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function _l(u){if(!RI(u.h)&&!u.s){u.s=!0;var d=u.Ga;Oa||cI(),Fa||(Oa(),Fa=!0),kp.add(d,u),u.B=0}}function pP(u,d){return NI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=$a(m(u.Ga,u,d),n0(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let b=new qr(this,this.j,u),x=this.o;if(this.S&&(x?(x=v(x),I(x,this.S)):x=this.S),this.m!==null||this.O||(b.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=JI(this,b,d),f=vr(this.I),je(f,"RID",u),je(f,"CVER",22),this.D&&je(f,"X-HTTP-Session-Id",this.D),Ja(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(zI(x)))+"&"+d:this.m&&eg(f,this.m,x)),Xp(this.h,b),this.Ua&&je(f,"TYPE","init"),this.P?(je(f,"$req",d),je(f,"SID","null"),b.T=!0,Qp(b,f,null)):Qp(b,f,d),this.G=2}}else this.G==3&&(u?ZI(this,u):this.i.length==0||RI(this.h)||ZI(this))};function ZI(u,d){var f;d?f=d.l:f=u.U++;let g=vr(u.I);je(g,"SID",u.K),je(g,"RID",f),je(g,"AID",u.T),Ja(u,g),u.m&&u.o&&eg(g,u.m,u.o),f=new qr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=JI(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Xp(u.h,f),Qp(f,g,d)}function Ja(u,d){u.H&&X(u.H,function(f,g){je(d,g,f)}),u.l&&OI({},function(f,g){je(d,g,f)})}function JI(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var b=u.i;let x=-1;for(;;){let B=["count="+f];x==-1?0<f?(x=b[0].g,B.push("ofs="+x)):x=0:B.push("ofs="+x);let ke=!0;for(let wt=0;wt<f;wt++){let Se=b[wt].g,St=b[wt].map;if(Se-=x,0>Se)x=Math.max(0,b[wt].g-100),ke=!1;else try{lP(St,B,"req"+Se+"_")}catch{g&&g(St)}}if(ke){g=B.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function XI(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Oa||cI(),Fa||(Oa(),Fa=!0),kp.add(d,u),u.v=0}}function ng(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=$a(m(u.Fa,u),n0(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,e0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=$a(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),vl(this),e0(this))};function rg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function e0(u){u.g=new qr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=vr(u.qa);je(d,"RID","rpc"),je(d,"SID",u.K),je(d,"AID",u.T),je(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&je(d,"TO",u.ja),je(d,"TYPE","xmlhttp"),Ja(u,d),u.m&&u.o&&eg(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=gl(vr(d)),f.m=null,f.P=!0,SI(f,u)}n.Za=function(){this.C!=null&&(this.C=null,vl(this),ng(this),kt(19))};function wl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function t0(u,d){var f=null;if(u.g==d){wl(u),rg(u),u.g=null;var g=2}else if(Jp(u.h,d))f=d.D,PI(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=u.B;g=ul(),Pt(g,new DI(g,f)),_l(u)}else XI(u);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&pP(u,d)||g==2&&ng(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),b){case 1:Li(u,5);break;case 4:Li(u,10);break;case 3:Li(u,6);break;default:Li(u,2)}}}function n0(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function Li(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let b=!g;g=new Vi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fl(g,"https"),gl(g),b?aP(g.toString(),f):cP(g.toString(),f)}else kt(2);u.G=0,u.l&&u.l.sa(d),r0(u),YI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function r0(u){if(u.G=0,u.ka=[],u.l){let d=kI(u.h);(d.length!=0||u.i.length!=0)&&(M(u.ka,d),M(u.ka,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.ra()}}function i0(u,d,f){var g=f instanceof Vi?vr(f):new Vi(f);if(g.g!="")d&&(g.g=d+"."+g.g),pl(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var x=new Vi(null);g&&fl(x,g),d&&(x.g=d),b&&pl(x,b),f&&(x.l=f),g=x}return f=u.D,d=u.ya,f&&d&&je(g,f,d),je(g,"VER",u.la),Ja(u,g),g}function o0(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ye(new Ka({eb:f})):new Ye(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function s0(){}n=s0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function El(){}El.prototype.g=function(u,d){return new nn(u,d)};function nn(u,d){Tt.call(this),this.g=new QI(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!q(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Ho(this)}D(nn,Tt),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){tg(this.g)},nn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=zp(u),u=f);d.i.push(new ZN(d.Ya++,u)),d.G==3&&_l(d)},nn.prototype.N=function(){this.g.l=null,delete this.j,tg(this.g),delete this.g,nn.aa.N.call(this)};function a0(u){qp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}D(a0,qp);function c0(){Gp.call(this),this.status=1}D(c0,Gp);function Ho(u){this.g=u}D(Ho,s0),Ho.prototype.ua=function(){Pt(this.g,"a")},Ho.prototype.ta=function(u){Pt(this.g,new a0(u))},Ho.prototype.sa=function(u){Pt(this.g,new c0)},Ho.prototype.ra=function(){Pt(this.g,"b")},El.prototype.createWebChannel=El.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,s_=kr.createWebChannelTransport=function(){return new El},o_=kr.getStatEventTarget=function(){return ul()},i_=kr.Event=Oi,df=kr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ll.NO_ERROR=0,ll.TIMEOUT=8,ll.HTTP_ERROR=6,fu=kr.ErrorCode=ll,CI.COMPLETE="complete",r_=kr.EventType=CI,_I.EventType=Ua,Ua.OPEN="a",Ua.CLOSE="b",Ua.ERROR="c",Ua.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,Ws=kr.WebChannel=_I,jB=kr.FetchXmlHttpFactory=Ka,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,n_=kr.XhrIo=Ye}).apply(typeof lf<"u"?lf:typeof self<"u"?self:typeof window<"u"?window:{});var BA="@firebase/firestore";var ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");var Ca="10.14.0";var Ii=new bl("@firebase/firestore");function Js(){return Ii.logLevel}function HM(n){Ii.setLogLevel(n)}function O(n,...e){if(Ii.logLevel<=Kn.DEBUG){let t=e.map(dE);Ii.debug(`Firestore (${Ca}): ${n}`,...t)}}function et(n,...e){if(Ii.logLevel<=Kn.ERROR){let t=e.map(dE);Ii.error(`Firestore (${Ca}): ${n}`,...t)}}function zn(n,...e){if(Ii.logLevel<=Kn.WARN){let t=e.map(dE);Ii.warn(`Firestore (${Ca}): ${n}`,...t)}}function dE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${Ca}) INTERNAL ASSERTION FAILED: `+n;throw et(e),new Error(e)}function J(n,e){n||K()}function qM(n,e){n||K()}function z(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends g0{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ht=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ef=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},h_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ut.UNAUTHENTICATED))}shutdown(){}},f_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},p_=class{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){J(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new ht;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ht,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>N(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ht)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J(typeof r.accessToken=="string"),new Ef(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return J(e===null||typeof e=="string"),new ut(e)}},g_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},m_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new g_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}},y_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},v_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){J(this.o===void 0);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(J(typeof t.token=="string"),this.R=t.token,new y_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function UB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var If=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=UB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function le(n,e){return n<e?-1:n>e?1:0}function aa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function GM(n){return n+"\0"}var Ke=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ke(0,0))}static max(){return new n(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Df=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ce=class n extends Df{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},BB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tt=class n extends Df{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return BB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var H=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ce.fromString(e))}static fromName(e){return new n(Ce.fromString(e).popFirst(5))}static empty(){return new n(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ce.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ce(e.slice()))}};var ca=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function __(n){return n.fields.find(e=>e.kind===2)}function mo(n){return n.fields.filter(e=>e.kind!==2)}ca.UNKNOWN_ID=-1;var ia=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var bu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Sn.min())}};function WM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new Ke(t+1,0):new Ke(t,r));return new Sn(i,H.empty(),e)}function KM(n){return new Sn(n.readTime,n.key,-1)}var Sn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(te.min(),H.empty(),-1)}static max(){return new n(te.max(),H.empty(),-1)}};function hE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:le(n.largestBatchId,e.largestBatchId))}var QM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ni(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==QM)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var bf=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ht,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Io(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=fE(r.target.error);this.V.reject(new Io(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Io(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new E_(t)}},Di=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Xa())===12.2&&et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),yo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Cl())return!1;if(n.v())return!0;let e=Xa(),t=n.S(e),r=0<t&&t<10,i=YM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Io(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Io(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=bf.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function YM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var w_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return yo(this.B.delete())}},Io=class extends k{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Pi(n){return n.name==="IndexedDbTransactionError"}var E_=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yo(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),yo(this.store.add(e))}get(e){return yo(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),yo(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),yo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=fE(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new w_(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function yo(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=fE(r.target.error);t(i)}})}var $A=!1;function fE(n){let e=Di.S(Xa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $A||($A=!0,setTimeout(()=>{throw r},0)),r}}return n}var I_=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Pi(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Ni(t)}yield this.X(6e4)}))}},D_=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=KM(o);hE(s,r)>0&&(r=s)}),new Sn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var vn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Gu(n){return n==null}function Tu(n){return n===0&&1/n==-1/0}function ZM(n){return typeof n=="number"&&Number.isInteger(n)&&!Tu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function $t(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zA(e)),e=$B(n.get(t),e);return zA(e)}function $B(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function zA(n){return n+""}function ar(n){let e=n.length;if(J(e>=2),e===2)return J(n.charAt(0)===""&&n.charAt(1)===""),Ce.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&K(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:K()}o=s+2}return new Ce(r)}var HA=["userId","batchId"];function mf(n,e){return[n,$t(e)]}function JM(n,e,t){return[n,$t(e),t]}var zB={},HB=["prefixPath","collectionGroup","readTime","documentId"],qB=["prefixPath","collectionGroup","documentId"],GB=["collectionGroup","readTime","prefixPath","documentId"],WB=["canonicalId","targetId"],KB=["targetId","path"],QB=["path","targetId"],YB=["collectionId","parent"],ZB=["indexId","uid"],JB=["uid","sequenceNumber"],XB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],e$=["indexId","uid","orderedDocumentKey"],t$=["userId","collectionPath","documentId"],n$=["userId","collectionPath","largestBatchId"],r$=["userId","collectionGroup","largestBatchId"],XM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],i$=[...XM,"documentOverlays"],ex=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tx=ex,pE=[...tx,"indexConfiguration","indexState","indexEntries"],o$=pE,s$=[...pE,"globals"];var Su=class extends Cf{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function ft(n,e){let t=z(n);return Di.F(t._e,e)}function qA(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ko(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var $e=class n{constructor(e,t){this.comparator=e,this.root=t||ur.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ra(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ra(this.root,e,this.comparator,!1)}getReverseIterator(){return new ra(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ra(this.root,e,this.comparator,!0)}},ra=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ur=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,o){return this}insert(e,t,r){return new ur(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ve=class n{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tf(this.data.getIterator())}getIteratorFrom(e){return new Tf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Tf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ks(n){return n.hasNext()?n.getNext():void 0}var _n=class n{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ve(tt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Sf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function rx(){return typeof atob<"u"}var rt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Sf("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var a$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(n){if(J(!!n),typeof n=="string"){let e=0,t=a$.exec(n);if(J(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(n.seconds),nanos:qe(n.nanos)}}function qe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ci(n){return typeof n=="string"?rt.fromBase64String(n):rt.fromUint8Array(n)}function vp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function gE(n){let e=n.mapValue.fields.__previous_value__;return vp(e)?gE(e):e}function Au(n){let e=Vr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}var C_=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},bi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var wi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yf={nullValue:"NULL_VALUE"};function Do(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vp(n)?4:ix(n)?9007199254740991:_p(n)?10:11:K()}function hr(n,e){if(n===e)return!0;let t=Do(n);if(t!==Do(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Au(n).isEqual(Au(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Vr(i.timestampValue),a=Vr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ci(i.bytesValue).isEqual(Ci(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return qe(i.geoPointValue.latitude)===qe(o.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return qe(i.integerValue)===qe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=qe(i.doubleValue),a=qe(o.doubleValue);return s===a?Tu(s)===Tu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return aa(n.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(qA(s)!==qA(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!hr(s[c],a[c])))return!1;return!0}(n,e);default:return K()}}function Mu(n,e){return(n.values||[]).find(t=>hr(t,e))!==void 0}function Ti(n,e){if(n===e)return 0;let t=Do(n),r=Do(e);if(t!==r)return le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return le(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=qe(o.integerValue||o.doubleValue),c=qe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return GA(n.timestampValue,e.timestampValue);case 4:return GA(Au(n),Au(e));case 5:return le(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Ci(o),c=Ci(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=le(a[l],c[l]);if(h!==0)return h}return le(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=le(qe(o.latitude),qe(s.latitude));return a!==0?a:le(qe(o.longitude),qe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return WA(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,D=(c=m.value)===null||c===void 0?void 0:c.arrayValue,A=le(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:WA(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===wi.mapValue&&s===wi.mapValue)return 0;if(o===wi.mapValue)return 1;if(s===wi.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=le(c[p],h[p]);if(m!==0)return m;let y=Ti(a[c[p]],l[h[p]]);if(y!==0)return y}return le(c.length,h.length)}(n.mapValue,e.mapValue);default:throw K()}}function GA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return le(n,e);let t=Vr(n),r=Vr(e),i=le(t.seconds,r.seconds);return i!==0?i:le(t.nanos,r.nanos)}function WA(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ti(t[i],r[i]);if(o)return o}return le(t.length,r.length)}function ua(n){return b_(n)}function b_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Vr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ci(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return H.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=b_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${b_(t.fields[s])}`;return i+"}"}(n.mapValue):K()}function Co(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function T_(n){return!!n&&"integerValue"in n}function xu(n){return!!n&&"arrayValue"in n}function KA(n){return!!n&&"nullValue"in n}function QA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vf(n){return!!n&&"mapValue"in n}function _p(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function wu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ko(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=wu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ix(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var ox={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function c$(n){return"nullValue"in n?yf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Co(bi.empty(),H.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?_p(n)?ox:{mapValue:{}}:K()}function u$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Co(bi.empty(),H.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?ox:"mapValue"in n?_p(n)?{mapValue:{}}:wi:K()}function YA(n,e){let t=Ti(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ZA(n,e){let t=Ti(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Nt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wu(t)}setAll(e){let t=tt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=wu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());vf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ko(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(wu(this.value))}};function sx(n){let e=[];return ko(n.fields,(t,r)=>{let i=new tt([t]);if(vf(r)){let o=sx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new _n(e)}var lt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,te.min(),te.min(),te.min(),Nt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,te.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,te.min(),te.min(),Nt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,te.min(),te.min(),Nt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fr=class{constructor(e,t){this.position=e,this.inclusive=t}};function JA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),t.key):r=Ti(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function XA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hr(n.position[t],e.position[t]))return!1;return!0}var bo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function l$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Af=class{},we=class n extends Af{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new M_(e,t,r):t==="array-contains"?new N_(e,r):t==="in"?new Mf(e,r):t==="not-in"?new P_(e,r):t==="array-contains-any"?new k_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new x_(e,r):new R_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ti(t,this.value)):t!==null&&Do(this.value)===Do(t)&&this.matchesComparison(Ti(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Pe=class n extends Af{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return la(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function la(n){return n.op==="and"}function S_(n){return n.op==="or"}function mE(n){return ax(n)&&la(n)}function ax(n){for(let e of n.filters)if(e instanceof Pe)return!1;return!0}function A_(n){if(n instanceof we)return n.field.canonicalString()+n.op.toString()+ua(n.value);if(mE(n))return n.filters.map(e=>A_(e)).join(",");{let e=n.filters.map(t=>A_(t)).join(",");return`${n.op}(${e})`}}function cx(n,e){return n instanceof we?function(r,i){return i instanceof we&&r.op===i.op&&r.field.isEqual(i.field)&&hr(r.value,i.value)}(n,e):n instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&cx(s,i.filters[a]),!0):!1}(n,e):void K()}function ux(n,e){let t=n.filters.concat(e);return Pe.create(t,n.op)}function lx(n){return n instanceof we?function(t){return`${t.field.canonicalString()} ${t.op} ${ua(t.value)}`}(n):n instanceof Pe?function(t){return t.op.toString()+" {"+t.getFilters().map(lx).join(" ,")+"}"}(n):"Filter"}var M_=class extends we{constructor(e,t,r){super(e,t,r),this.key=H.fromName(r.referenceValue)}matches(e){let t=H.comparator(e.key,this.key);return this.matchesComparison(t)}},x_=class extends we{constructor(e,t){super(e,"in",t),this.keys=dx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},R_=class extends we{constructor(e,t){super(e,"not-in",t),this.keys=dx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function dx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>H.fromName(r.referenceValue))}var N_=class extends we{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return xu(t)&&Mu(t.arrayValue,this.value)}},Mf=class extends we{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Mu(this.value.arrayValue,t)}},P_=class extends we{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Mu(this.value.arrayValue,t)}},k_=class extends we{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!xu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mu(this.value.arrayValue,r))}};var O_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function F_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new O_(n,e,t,r,i,o,s)}function To(n){let e=z(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>A_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Gu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ua(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ua(r)).join(",")),e.ue=t}return e.ue}function Wu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!l$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!XA(n.startAt,e.startAt)&&XA(n.endAt,e.endAt)}function xf(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Rf(n,e){return n.filters.filter(t=>t instanceof we&&t.field.isEqual(e))}function eM(n,e,t){let r=yf,i=!0;for(let o of Rf(n,e)){let s=yf,a=!0;switch(o.op){case"<":case"<=":s=c$(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=yf}YA({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];YA({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function tM(n,e,t){let r=wi,i=!0;for(let o of Rf(n,e)){let s=wi,a=!0;switch(o.op){case">=":case">":s=u$(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=wi}ZA({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];ZA({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Hn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function hx(n,e,t,r,i,o,s,a){return new Hn(n,e,t,r,i,o,s,a)}function ba(n){return new Hn(n)}function nM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yE(n){return n.collectionGroup!==null}function oa(n){let e=z(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ve(tt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new bo(o,r))}),t.has(tt.keyField().canonicalString())||e.ce.push(new bo(tt.keyField(),r))}return e.ce}function zt(n){let e=z(n);return e.le||(e.le=d$(e,oa(n))),e.le}function d$(n,e){if(n.limitType==="F")return F_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new bo(i.field,o)});let t=n.endAt?new fr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fr(n.startAt.position,n.startAt.inclusive):null;return F_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function V_(n,e){let t=n.filters.concat([e]);return new Hn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Nf(n,e,t){return new Hn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ku(n,e){return Wu(zt(n),zt(e))&&n.limitType===e.limitType}function fx(n){return`${To(zt(n))}|lt:${n.limitType}`}function Xs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>lx(i)).join(", ")}]`),Gu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ua(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ua(i)).join(",")),`Target(${r})`}(zt(n))}; limitType=${n.limitType})`}function Qu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of oa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=JA(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,oa(r),i)||r.endAt&&!function(s,a,c){let l=JA(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,oa(r),i))}(n,e)}function px(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gx(n){return(e,t)=>{let r=!1;for(let i of oa(n)){let o=h$(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function h$(n,e,t){let r=n.field.isKeyField()?H.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Ti(c,l):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var pr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return nx(this.inner)}size(){return this.innerSize}};var f$=new $e(H.comparator);function en(){return f$}var mx=new $e(H.comparator);function vu(...n){let e=mx;for(let t of n)e=e.insert(t.key,t);return e}function yx(n){let e=mx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function cr(){return Eu()}function vx(){return Eu()}function Eu(){return new pr(n=>n.toString(),(n,e)=>n.isEqual(e))}var p$=new $e(H.comparator),g$=new Ve(H.comparator);function de(...n){let e=g$;for(let t of n)e=e.add(t);return e}var m$=new Ve(le);function vE(){return m$}function _E(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tu(e)?"-0":e}}function _x(n){return{integerValue:""+n}}function wx(n,e){return ZM(e)?_x(e):_E(n,e)}var da=class{constructor(){this._=void 0}};function y$(n,e,t){return n instanceof Si?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&vp(o)&&(o=gE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Lr?Ix(n,e):n instanceof jr?Dx(n,e):function(i,o){let s=Ex(i,o),a=rM(s)+rM(i.Pe);return T_(s)&&T_(i.Pe)?_x(a):_E(i.serializer,a)}(n,e)}function v$(n,e,t){return n instanceof Lr?Ix(n,e):n instanceof jr?Dx(n,e):t}function Ex(n,e){return n instanceof Ai?function(r){return T_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Si=class extends da{},Lr=class extends da{constructor(e){super(),this.elements=e}};function Ix(n,e){let t=Cx(e);for(let r of n.elements)t.some(i=>hr(i,r))||t.push(r);return{arrayValue:{values:t}}}var jr=class extends da{constructor(e){super(),this.elements=e}};function Dx(n,e){let t=Cx(e);for(let r of n.elements)t=t.filter(i=>!hr(i,r));return{arrayValue:{values:t}}}var Ai=class extends da{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function rM(n){return qe(n.integerValue||n.doubleValue)}function Cx(n){return xu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var So=class{constructor(e,t){this.field=e,this.transform=t}};function _$(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Lr&&i instanceof Lr||r instanceof jr&&i instanceof jr?aa(r.elements,i.elements,hr):r instanceof Ai&&i instanceof Ai?hr(r.Pe,i.Pe):r instanceof Si&&i instanceof Si}(n.transform,e.transform)}var L_=class{constructor(e,t){this.version=e,this.transformResults=t}},Je=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _f(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ha=class{};function bx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xi(n.key,Je.none()):new Mi(n.key,n.data,Je.none());{let t=n.data,r=Nt.empty(),i=new Ve(tt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new qn(n.key,r,new _n(i.toArray()),Je.none())}}function w$(n,e,t){n instanceof Mi?function(i,o,s){let a=i.value.clone(),c=oM(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof qn?function(i,o,s){if(!_f(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=oM(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Tx(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Iu(n,e,t,r){return n instanceof Mi?function(o,s,a,c){if(!_f(o.precondition,s))return a;let l=o.value.clone(),h=sM(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof qn?function(o,s,a,c){if(!_f(o.precondition,s))return a;let l=sM(o.fieldTransforms,c,s),h=s.data;return h.setAll(Tx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return _f(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function E$(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Ex(r.transform,i||null);o!=null&&(t===null&&(t=Nt.empty()),t.set(r.field,o))}return t||null}function iM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&aa(r,i,(o,s)=>_$(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Mi=class extends ha{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},qn=class extends ha{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Tx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function oM(n,e,t){let r=new Map;J(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,v$(s,a,t[i]))}return r}function sM(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,y$(o,s,e))}return r}var xi=class extends ha{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ru=class extends ha{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Nu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&w$(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Iu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Iu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=vx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=bx(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),de())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,(t,r)=>iM(t,r))&&aa(this.baseMutations,e.baseMutations,(t,r)=>iM(t,r))}},j_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){J(e.mutations.length===r.length);let i=function(){return p$}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Pu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var U_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var at,De;function Sx(n){switch(n){default:return K();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Ax(n){if(n===void 0)return et("GRPC error has no .code"),R.UNKNOWN;switch(n){case at.OK:return R.OK;case at.CANCELLED:return R.CANCELLED;case at.UNKNOWN:return R.UNKNOWN;case at.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case at.INTERNAL:return R.INTERNAL;case at.UNAVAILABLE:return R.UNAVAILABLE;case at.UNAUTHENTICATED:return R.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case at.NOT_FOUND:return R.NOT_FOUND;case at.ALREADY_EXISTS:return R.ALREADY_EXISTS;case at.PERMISSION_DENIED:return R.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case at.ABORTED:return R.ABORTED;case at.OUT_OF_RANGE:return R.OUT_OF_RANGE;case at.UNIMPLEMENTED:return R.UNIMPLEMENTED;case at.DATA_LOSS:return R.DATA_LOSS;default:return K()}}(De=at||(at={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";var aM=null;function Mx(){return new TextEncoder}var I$=new gi([4294967295,4294967295],0);function cM(n){let e=Mx().encode(n),t=new t_;return t.update(e),new Uint8Array(t.digest())}function uM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new gi([t,r],0),new gi([i,o],0)]}var B_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Eo(`Invalid padding: ${t}`);if(r<0)throw new Eo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Eo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Eo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=gi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(gi.fromNumber(r)));return i.compare(I$)===1&&(i=new gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=cM(e),[r,i]=uM(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=cM(e),[r,i]=uM(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Eo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ku=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(te.min(),i,new $e(le),en(),de())}},Ou=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,de(),de(),de())}};var sa=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Pf=class{constructor(e,t){this.targetId=e,this.me=t}},kf=class{constructor(e,t,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Of=class{constructor(){this.fe=0,this.ge=dM(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),t=de(),r=de();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Ou(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=dM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,J(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},$_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=en(),this.qe=lM(),this.Qe=new $e(le)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(xf(o))if(r===0){let s=new H(o.path);this.Ue(t,s,lt.newNoDocument(s,te.min()))}else J(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}aM?.et(function(h,p,m,y,D){var A,M,j,q,L,Y;let ne={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},X=p.unchangedNames;return X&&(ne.bloomFilter={applied:D===0,hashCount:(A=X?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(q=(j=(M=X?.bits)===null||M===void 0?void 0:M.bitmap)===null||j===void 0?void 0:j.length)!==null&&q!==void 0?q:0,padding:(Y=(L=X?.bits)===null||L===void 0?void 0:L.padding)!==null&&Y!==void 0?Y:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),ne}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Ci(r).toUint8Array()}catch(c){if(c instanceof Sf)return zn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new B_(s,i,o)}catch(c){return zn(c instanceof Eo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&xf(a.target)){let c=new H(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,lt.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=de();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new ku(e,t,this.Qe,this.ke,r);return this.ke=en(),this.qe=lM(),this.Qe=new $e(le),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Of,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ve(le),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Of),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function lM(){return new $e(H.comparator)}function dM(){return new $e(H.comparator)}var D$={asc:"ASCENDING",desc:"DESCENDING"},C$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b$={and:"AND",or:"OR"},z_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function H_(n,e){return n.useProto3Json||Gu(e)?e:{value:e}}function fa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function T$(n,e){return fa(n,e.toTimestamp())}function nt(n){return J(!!n),te.fromTimestamp(function(t){let r=Vr(t);return new Ke(r.seconds,r.nanos)}(n))}function wE(n,e){return q_(n,e).canonicalString()}function q_(n,e){let t=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Rx(n){let e=Ce.fromString(n);return J(Bx(e)),e}function Fu(n,e){return wE(n.databaseId,e.path)}function lr(n,e){let t=Rx(e);if(t.get(1)!==n.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(kx(t))}function Nx(n,e){return wE(n.databaseId,e)}function Px(n){let e=Rx(n);return e.length===4?Ce.emptyPath():kx(e)}function G_(n){return new Ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kx(n){return J(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function hM(n,e,t){return{name:Fu(n,e),fields:t.value.mapValue.fields}}function Ox(n,e,t){let r=lr(n,e.name),i=nt(e.updateTime),o=e.createTime?nt(e.createTime):te.min(),s=new Nt({mapValue:{fields:e.fields}}),a=lt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function S$(n,e){return"found"in e?function(r,i){J(!!i.found),i.found.name,i.found.updateTime;let o=lr(r,i.found.name),s=nt(i.found.updateTime),a=i.found.createTime?nt(i.found.createTime):te.min(),c=new Nt({mapValue:{fields:i.found.fields}});return lt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){J(!!i.missing),J(!!i.readTime);let o=lr(r,i.missing),s=nt(i.readTime);return lt.newNoDocument(o,s)}(n,e):K()}function A$(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(J(h===void 0||typeof h=="string"),rt.fromBase64String(h||"")):(J(h===void 0||h instanceof Buffer||h instanceof Uint8Array),rt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:Ax(l.code);return new k(h,l.message||"")}(s);t=new kf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=lr(n,r.document.name),o=nt(r.document.updateTime),s=r.document.createTime?nt(r.document.createTime):te.min(),a=new Nt({mapValue:{fields:r.document.fields}}),c=lt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new sa(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=lr(n,r.document),o=r.readTime?nt(r.readTime):te.min(),s=lt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new sa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=lr(n,r.document),o=r.removedTargetIds||[];t=new sa([],o,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new U_(i,o),a=r.targetId;t=new Pf(a,s)}}return t}function Vu(n,e){let t;if(e instanceof Mi)t={update:hM(n,e.key,e.value)};else if(e instanceof xi)t={delete:Fu(n,e.key)};else if(e instanceof qn)t={update:hM(n,e.key,e.data),updateMask:k$(e.fieldMask)};else{if(!(e instanceof Ru))return K();t={verify:Fu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Si)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Lr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ai)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:T$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K()}(n,e.precondition)),t}function W_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Je.updateTime(nt(o.updateTime)):o.exists!==void 0?Je.exists(o.exists):Je.none()}(e.currentDocument):Je.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)J(a.setToServerValue==="REQUEST_TIME"),c=new Si;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new Lr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new jr(h)}else"increment"in a?c=new Ai(s,a.increment):K();let l=tt.fromServerFormat(a.fieldPath);return new So(l,c)}(n,i)):[];if(e.update){e.update.name;let i=lr(n,e.update.name),o=new Nt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new _n(l.map(h=>tt.fromServerFormat(h)))}(e.updateMask);return new qn(i,o,s,t,r)}return new Mi(i,o,t,r)}if(e.delete){let i=lr(n,e.delete);return new xi(i,t)}if(e.verify){let i=lr(n,e.verify);return new Ru(i,t)}return K()}function M$(n,e){return n&&n.length>0?(J(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?nt(i.updateTime):nt(o);return s.isEqual(te.min())&&(s=nt(o)),new L_(s,i.transformResults||[])}(t,e))):[]}function Fx(n,e){return{documents:[Nx(n,e.path)]}}function Vx(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Nx(n,i);let o=function(l){if(l.length!==0)return Ux(Pe.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ea(m.field),direction:R$(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=H_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function Lx(n){let e=Px(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){J(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=jx(p);return m instanceof Pe&&mE(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(D){return new bo(ta(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Gu(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,y=p.values||[];return new fr(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new fr(y,m)}(t.endAt)),hx(e,i,s,o,a,"F",c,l)}function x$(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ta(t.unaryFilter.field);return we.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ta(t.unaryFilter.field);return we.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ta(t.unaryFilter.field);return we.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ta(t.unaryFilter.field);return we.create(s,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return we.create(ta(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Pe.create(t.compositeFilter.filters.map(r=>jx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function R$(n){return D$[n]}function N$(n){return C$[n]}function P$(n){return b$[n]}function ea(n){return{fieldPath:n.canonicalString()}}function ta(n){return tt.fromServerFormat(n.fieldPath)}function Ux(n){return n instanceof we?function(t){if(t.op==="=="){if(QA(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NAN"}};if(KA(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(QA(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NOT_NAN"}};if(KA(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ea(t.field),op:N$(t.op),value:t.value}}}(n):n instanceof Pe?function(t){let r=t.getFilters().map(i=>Ux(i));return r.length===1?r[0]:{compositeFilter:{op:P$(t.op),filters:r}}}(n):K()}function k$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Bx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var pa=class n{constructor(e,t,r,i,o=te.min(),s=te.min(),a=rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ff=class{constructor(e){this.ct=e}};function O$(n,e){let t;if(e.document)t=Ox(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=H.fromSegments(e.noDocument.path),i=Mo(e.noDocument.readTime);t=lt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{let r=H.fromSegments(e.unknownDocument.path),i=Mo(e.unknownDocument.version);t=lt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ke(i[0],i[1]);return te.fromTimestamp(o)}(e.readTime)),t}function fM(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Fu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:fa(o,s.version.toTimestamp()),createTime:fa(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ao(e.version)};else{if(!e.isUnknownDocument())return K();r.unknownDocument={path:t.path.toArray(),version:Ao(e.version)}}return r}function Vf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ao(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mo(n){let e=new Ke(n.seconds,n.nanoseconds);return te.fromTimestamp(e)}function vo(n,e){let t=(e.baseMutations||[]).map(o=>W_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>W_(n.ct,o)),i=Ke.fromMillis(e.localWriteTimeMs);return new Nu(e.batchId,i,t,r)}function _u(n){let e=Mo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Mo(n.lastLimboFreeSnapshotVersion):te.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return J(o.documents.length===1),zt(ba(Px(o.documents[0])))}(n.query):function(o){return zt(Lx(o))}(n.query),new pa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,rt.fromBase64String(n.resumeToken))}function $x(n,e){let t=Ao(e.snapshotVersion),r=Ao(e.lastLimboFreeSnapshotVersion),i;i=xf(e.target)?Fx(n.ct,e.target):Vx(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:To(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function EE(n){let e=Lx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Nf(e,e.limit,"L"):e}function a_(n,e){return new Pu(e.largestBatchId,W_(n.ct,e.overlayMutation))}function pM(n,e){let t=e.path.lastSegment();return[n,$t(e.path.popLast()),t]}function gM(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ao(r.readTime),documentKey:$t(r.documentKey.path),largestBatchId:r.largestBatchId}}var K_=class{getBundleMetadata(e,t){return mM(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Mo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return mM(e).put(function(i){return{bundleId:i.id,createTime:Ao(nt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return yM(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:EE(o.bundledQuery),readTime:Mo(o.readTime)}}(r)})}saveNamedQuery(e,t){return yM(e).put(function(i){return{name:i.name,readTime:Ao(nt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function mM(n){return ft(n,"bundles")}function yM(n){return ft(n,"namedQueries")}var Lf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return pu(e).get(pM(this.userId,t)).next(r=>r?a_(this.serializer,r):null)}getOverlays(e,t){let r=cr();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Pu(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add($t(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(pu(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=cr(),o=$t(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return pu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=a_(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=cr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pu(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=a_(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return pu(e).put(function(i,o,s){let[a,c,l]=pM(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Vu(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function pu(n){return ft(n,"documentOverlays")}var Q_=class{Pt(e){return ft(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?rt.fromUint8Array(r):rt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Or=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(qe(e.integerValue));else if("doubleValue"in e){let r=qe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Tu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Vr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ci(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?ix(e)?this.dt(t,Number.MAX_SAFE_INTEGER):_p(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):K()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(qe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),H.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Or.vt=new Or;function F$(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function vM(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=F$(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Y_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=vM(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=vM(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Z_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},J_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},_o=class{constructor(){this.jt=new Y_,this.Ht=new Z_(this.jt),this.Jt=new J_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var wo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function mi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=_M(n.arrayValue,e.arrayValue),t!==0?t:(t=_M(n.directionalValue,e.directionalValue),t!==0?t:H.comparator(n.documentKey,e.documentKey)))}function _M(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var jf=class{constructor(e){this.Xt=new Ve((t,r)=>tt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(J(e.collectionGroup===this.collectionId),this.nn)return!1;let t=__(e);if(t!==void 0&&!this.sn(t))return!1;let r=mo(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ve(tt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ia(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ia(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ia(r.field,r.dir==="asc"?0:1)));return new ca(ca.UNKNOWN_ID,this.collectionId,t,bu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function zx(n){var e,t;if(J(n instanceof we||n instanceof Pe),n instanceof we){if(n instanceof Mf){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>we.create(n.field,"==",o)))||[];return Pe.create(i,"or")}return n}let r=n.filters.map(i=>zx(i));return Pe.create(r,n.op)}function V$(n){if(n.getFilters().length===0)return[];let e=tw(zx(n));return J(Hx(e)),X_(e)||ew(e)?[e]:e.getFilters()}function X_(n){return n instanceof we}function ew(n){return n instanceof Pe&&mE(n)}function Hx(n){return X_(n)||ew(n)||function(t){if(t instanceof Pe&&S_(t)){for(let r of t.getFilters())if(!X_(r)&&!ew(r))return!1;return!0}return!1}(n)}function tw(n){if(J(n instanceof we||n instanceof Pe),n instanceof we)return n;if(n.filters.length===1)return tw(n.filters[0]);let e=n.filters.map(r=>tw(r)),t=Pe.create(e,n.op);return t=Uf(t),Hx(t)?t:(J(t instanceof Pe),J(la(t)),J(t.filters.length>1),t.filters.reduce((r,i)=>IE(r,i)))}function IE(n,e){let t;return J(n instanceof we||n instanceof Pe),J(e instanceof we||e instanceof Pe),t=n instanceof we?e instanceof we?function(i,o){return Pe.create([i,o],"and")}(n,e):wM(n,e):e instanceof we?wM(e,n):function(i,o){if(J(i.filters.length>0&&o.filters.length>0),la(i)&&la(o))return ux(i,o.getFilters());let s=S_(i)?i:o,a=S_(i)?o:i,c=s.filters.map(l=>IE(l,a));return Pe.create(c,"or")}(n,e),Uf(t)}function wM(n,e){if(la(e))return ux(e,n.getFilters());{let t=e.filters.map(r=>IE(n,r));return Pe.create(t,"or")}}function Uf(n){if(J(n instanceof we||n instanceof Pe),n instanceof we)return n;let e=n.getFilters();if(e.length===1)return Uf(e[0]);if(ax(n))return n;let t=e.map(i=>Uf(i)),r=[];return t.forEach(i=>{i instanceof we?r.push(i):i instanceof Pe&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Pe.create(r,n.op)}var nw=class{constructor(){this.un=new Lu}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Sn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Lu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ve(Ce.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ve(Ce.comparator)).toArray()}};var hf=new Uint8Array(0),rw=class{constructor(e,t){this.databaseId=t,this.cn=new Lu,this.ln=new pr(r=>To(r),(r,i)=>Wu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:$t(i)};return EM(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[GM(t),""],!1,!0);return EM(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(ar(s.parent))}return r})}addFieldIndex(e,t){let r=gu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Ys(e);return o.next(a=>{s.put(gM(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=gu(e),i=Ys(e),o=Qs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=gu(e),r=Qs(e),i=Ys(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new jf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Qs(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=de(),a=[];return S.forEach(o,(c,l)=>{O("IndexedDbIndexManager",`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(c)} to execute ${To(t)}`);let h=function(L,Y){let ne=__(Y);if(ne===void 0)return null;for(let X of Rf(L,ne.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null}(l,c),p=function(L,Y){let ne=new Map;for(let X of mo(Y))for(let E of Rf(L,X.fieldPath))switch(E.op){case"==":case"in":ne.set(X.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return ne.set(X.fieldPath.canonicalString(),E.value),Array.from(ne.values())}return null}(l,c),m=function(L,Y){let ne=[],X=!0;for(let E of mo(Y)){let v=E.kind===0?eM(L,E.fieldPath,L.startAt):tM(L,E.fieldPath,L.startAt);ne.push(v.value),X&&(X=v.inclusive)}return new fr(ne,X)}(l,c),y=function(L,Y){let ne=[],X=!0;for(let E of mo(Y)){let v=E.kind===0?tM(L,E.fieldPath,L.endAt):eM(L,E.fieldPath,L.endAt);ne.push(v.value),X&&(X=v.inclusive)}return new fr(ne,X)}(l,c),D=this.In(c,l,m),A=this.In(c,l,y),M=this.Tn(c,l,p),j=this.En(c.indexId,h,D,m.inclusive,A,y.inclusive,M);return S.forEach(j,q=>r.G(q,t.limit).next(L=>{L.forEach(Y=>{let ne=H.fromSegments(Y.documentKey);s.has(ne)||(s=s.add(ne),a.push(ne))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=V$(Pe.create(e.filters,"and")).map(r=>F_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):hf,y=this.An(e,m,r[p%l],i),D=this.Rn(e,m,o[p%l],s),A=a.map(M=>this.An(e,m,M,!0));h.push(...this.createRange(y,D,A))}return h}An(e,t,r,i){let o=new wo(e,H.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new wo(e,H.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new jf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Ve(tt.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new _o;for(let i of mo(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Or.vt.It(o,s)}return r.zt()}dn(e){let t=new _o;return Or.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new _o;return Or.vt.It(Co(this.databaseId,t),r.Yt(function(o){let s=mo(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new _o);let o=0;for(let s of mo(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&xu(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);Or.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new _o;c.seed(a.zt()),Or.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof we&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=gu(e),i=Ys(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new bu(p.sequenceNumber,new Sn(Mo(p.readTime),new H(ar(p.documentKey)),p.largestBatchId)):bu.empty(),y=h.fields.map(([D,A])=>new ia(tt.fromServerFormat(D),A));return new ca(h.indexId,h.collectionGroup,y,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:le(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=gu(e),o=Ys(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(gM(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return Qs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Qs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Qs(e),o=new Ve(mi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new wo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ve(mi),i=this.Vn(t,e);if(i==null)return r;let o=__(t);if(o!=null){let s=e.data.field(o.fieldPath);if(xu(s))for(let a of s.arrayValue.values||[])r=r.add(new wo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new wo(t.indexId,e.key,hf,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let y=c.getIterator(),D=l.getIterator(),A=Ks(y),M=Ks(D);for(;A||M;){let j=!1,q=!1;if(A&&M){let L=h(A,M);L<0?q=!0:L>0&&(j=!0)}else A!=null?q=!0:j=!0;j?(p(M),M=Ks(D)):q?(m(A),A=Ks(y)):(A=Ks(y),M=Ks(D))}}(i,o,mi,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return Ys(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>mi(s,a)).filter((s,a,c)=>!a||mi(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=mi(s,e),c=mi(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,hf,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,hf,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return mi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(IM)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||K())).next(IM)}};function EM(n){return ft(n,"collectionParents")}function Qs(n){return ft(n,"indexEntries")}function gu(n){return ft(n,"indexConfiguration")}function Ys(n){return ft(n,"indexState")}function IM(n){J(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;hE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Sn(e.readTime,e.documentKey,t)}var DM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function qx(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{J(a===1)}));let l=[];for(let h of t.mutations){let p=JM(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function Bf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw K();e=n.noDocument}return JSON.stringify(e).length}Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(41943040,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);var $f=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){J(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yi(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=na(e),s=yi(e);return s.add({}).next(a=>{J(typeof a=="number");let c=new Nu(a,t,r,i),l=function(y,D,A){let M=A.baseMutations.map(q=>Vu(y.ct,q)),j=A.mutations.map(q=>Vu(y.ct,q));return{userId:D,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:M,mutations:j}}(this.serializer,this.userId,c),h=[],p=new Ve((m,y)=>le(m.canonicalString(),y.canonicalString()));for(let m of i){let y=JM(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,zB))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return yi(e).get(t).next(r=>r?(J(r.userId===this.userId),vo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return yi(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(J(a.batchId>=r),o=vo(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return yi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yi(e).U("userMutationsIndex",t).next(r=>r.map(i=>vo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=mf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return na(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=ar(h);if(l===this.userId&&t.path.isEqual(m))return yi(e).get(p).next(y=>{if(!y)throw K();J(y.userId===this.userId),o.push(vo(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ve(le),i=[];return t.forEach(o=>{let s=mf(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=na(e).J({range:a},(l,h,p)=>{let[m,y,D]=l,A=ar(y);m===this.userId&&o.path.isEqual(A)?r=r.add(D):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=mf(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ve(le);return na(e).J({range:s},(c,l,h)=>{let[p,m,y]=c,D=ar(m);p===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(yi(e).get(o).next(s=>{if(s===null)throw K();J(s.userId===this.userId),r.push(vo(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return qx(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return na(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=ar(o[1]);i.push(c)}else a.done()}).next(()=>{J(i.length===0)})})}containsKey(e,t){return Gx(e,this.userId,t)}Nn(e){return Wx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Gx(n,e,t){let r=mf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return na(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function yi(n){return ft(n,"mutations")}function na(n){return ft(n,"documentMutations")}function Wx(n){return ft(n,"mutationQueues")}var ga=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var iw=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ga(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>te.fromTimestamp(new Ke(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(J(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Zs(e).J((s,a)=>{let c=_u(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Zs(e).J((r,i)=>{let o=_u(i);t(o)})}qn(e){return CM(e).get("targetGlobalKey").next(t=>(J(t!==null),t))}Qn(e,t){return CM(e).put("targetGlobalKey",t)}Kn(e,t){return Zs(e).put($x(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=To(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Zs(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=_u(a);Wu(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=vi(e);return t.forEach(s=>{let a=$t(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=vi(e);return S.forEach(t,o=>{let s=$t(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=vi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=vi(e),o=de();return i.J({range:r,H:!0},(s,a,c)=>{let l=ar(s[1]),h=new H(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=$t(t.path),i=IDBKeyRange.bound([r],[GM(r)],!1,!0),o=0;return vi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Zs(e).get(t).next(r=>r?_u(r):null)}};function Zs(n){return ft(n,"targets")}function CM(n){return ft(n,"targetGlobal")}function vi(n){return ft(n,"targetDocuments")}function bM([n,e],[t,r]){let i=le(n,t);return i===0?le(e,r):i}var ow=class{constructor(e){this.Un=e,this.buffer=new Ve(bM),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();bM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},sw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Pi(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Ni(t)}yield this.Hn(3e5)}))}},aw=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(vn.oe);let r=new ow(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(DM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DM):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Js()<=Kn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function L$(n,e){return new aw(n,e)}var cw=class{constructor(e,t){this.db=e,this.garbageCollector=L$(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return ff(e,r)}removeReference(e,t,r){return ff(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ff(e,t)}nr(e,t){return function(i,o){let s=!1;return Wx(i).Y(a=>Gx(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,te.min()),vi(e).delete(function(p){return[0,$t(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ff(e,t)}tr(e,t){let r=vi(e),i,o=vn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==vn.oe&&t(new H(ar(i)),o),o=l,i=c):o=vn.oe}).next(()=>{o!==vn.oe&&t(new H(ar(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function ff(n,e){return vi(n).put(function(r,i){return{targetId:0,path:$t(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var zf=class{constructor(){this.changes=new pr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var uw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return go(e).put(r)}removeEntry(e,t,r){return go(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Vf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=lt.newInvalidDocument(t);return go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(mu(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:lt.newInvalidDocument(t)};return go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(mu(t))},(i,o)=>{r={document:this.ir(t,o),size:Bf(o)}}).next(()=>r)}getEntries(e,t){let r=en();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=en(),i=new $e(H.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Bf(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Ve(AM);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(mu(i.first()),mu(i.last())),s=i.getIterator(),a=s.getNext();return go(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=H.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&AM(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(mu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Vf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return go(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=en();for(let p of l){let m=this.ir(H.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Qu(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=en(),s=SM(t,r),a=SM(t,Sn.max());return go(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir(H.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new lw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return TM(e).get("remoteDocumentGlobalKey").next(t=>(J(!!t),t))}rr(e,t){return TM(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=O$(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(te.min())))return r}return lt.newInvalidDocument(e)}};function Kx(n){return new uw(n)}var lw=class extends zf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new pr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ve((o,s)=>le(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=fM(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Bf(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=fM(this.cr.serializer,s.convertToNoDocument(te.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function TM(n){return ft(n,"remoteDocumentGlobal")}function go(n){return ft(n,"remoteDocumentsV14")}function mu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function SM(n,e){let t=e.documentKey.path.toArray();return[n,Vf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function AM(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=le(t[o],r[o]),i)return i;return i=le(t.length,r.length),i||(i=le(t[t.length-2],r[r.length-2]),i||le(t[t.length-1],r[r.length-1]))}var dw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Hf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Iu(r.mutation,i,_n.empty(),Ke.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,t,r=de()){let i=cr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=vu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=cr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,de()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=en(),s=Eu(),a=function(){return Eu()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof qn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Iu(h.mutation,l,h.mutation.getFieldMask(),Ke.now())):s.set(l.key,_n.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new dw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Eu(),i=new $e((s,a)=>s-a),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||_n.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||de()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=vx();h.forEach(m=>{if(!o.has(m)){let y=bx(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(cr()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,de())).next(h=>({batchId:a,changes:yx(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(r=>{let i=vu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=vu();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new Hn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,lt.newInvalidDocument(h)))});let a=vu();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&Iu(h.mutation,l,_n.empty(),Ke.now()),Qu(t,l)&&(a=a.insert(c,l))}),a})}};var hw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:nt(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:EE(i.bundledQuery),readTime:nt(i.readTime)}}(t)),S.resolve()}};var fw=class{constructor(){this.overlays=new $e(H.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=cr();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=cr(),o=t.length+1,s=new H(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new $e((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=cr(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=cr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Pu(t,r));let o=this.Ir.get(t);o===void 0&&(o=de(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var pw=class{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var ju=class{constructor(){this.Tr=new Ve(ct.Er),this.dr=new Ve(ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ct(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ct(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new H(new Ce([])),r=new ct(t,e),i=new ct(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new H(new Ce([])),r=new ct(t,e),i=new ct(t,e+1),o=de();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ct(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ct=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return H.comparator(e.key,t.key)||le(e.wr,t.wr)}static Ar(e,t){return le(e.wr,t.wr)||H.comparator(e.key,t.key)}};var gw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ve(ct.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Nu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new ct(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ct(t,0),i=new ct(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ve(le);return t.forEach(i=>{let o=new ct(i,0),s=new ct(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new ct(new H(o),0),a=new Ve(le);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){J(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new ct(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ct(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var mw=class{constructor(e){this.Mr=e,this.docs=function(){return new $e(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():lt.newInvalidDocument(t))}getEntries(e,t){let r=en();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():lt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=en(),s=t.path,a=new H(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||hE(KM(h),r)<=0||(i.has(h.key)||Qu(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yw(this)}getSize(e){return S.resolve(this.size)}},yw=class extends zf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var vw=class{constructor(e){this.persistence=e,this.Nr=new pr(t=>To(t),Wu),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ju,this.targetCount=0,this.kr=ga.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ga(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var qf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new vn(0),this.Kr=!1,this.Kr=!0,this.$r=new pw,this.referenceDelegate=e(this),this.Ur=new vw(this),this.indexManager=new nw,this.remoteDocumentCache=function(i){return new mw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ff(t),this.Gr=new hw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new gw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new _w(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},_w=class extends Cf{constructor(e){super(),this.currentSequenceNumber=e}},Gf=class n{constructor(e){this.persistence=e,this.Jr=new ju,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=H.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,te.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var ww=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new bf("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HA,{unique:!0}),c.createObjectStore("documentMutations")}(e),MM(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),MM(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HA,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:t$});l.createIndex("collectionPathOverlayIndex",n$,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",r$,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:HB});l.createIndex("documentKeyIndex",qB),l.createIndex("collectionGroupIndex",GB)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:ZB}).createIndex("sequenceNumberIndex",JB,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:XB}).createIndex("documentKeyIndex",e$,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Bf(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{J(c.userId===o.userId);let l=vo(this.serializer,c);return qx(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new Ce(s),l=function(p){return[0,$t(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:$t(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:YB});let r=t.store("collectionParents"),i=new Lu,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:$t(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Ce(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=ar(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=_u(i),s=$x(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new H(Ce.fromString(p.document.name).popFirst(5)):p.noDocument?H.fromSegments(p.noDocument.path):p.unknownDocument?H.fromSegments(p.unknownDocument.path):K()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=Kx(this.serializer),o=new qf(Gf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:de();vo(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new ut(l),p=Lf.lt(this.serializer,h),m=o.getIndexManager(h),y=$f.lt(h,this.serializer,m,o.referenceDelegate);return new Hf(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Su(t,vn.oe),c).next()})})}};function MM(n){n.createObjectStore("targetDocuments",{keyPath:KB}).createIndex("documentTargetsIndex",QB,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",WB,{unique:!0}),n.createObjectStore("targetGlobal")}var c_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ew=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cw(this,i),this.Ai=t+"main",this.serializer=new Ff(c),this.Ri=new Di(this.Ai,this.hi,new ww(this.serializer)),this.$r=new Q_,this.Ur=new iw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Kx(this.serializer),this.Gr=new K_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&et("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,c_);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new vn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Pi(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return yu(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return pf(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ft(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):yu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,c_);return!1}}return!(!this.networkEnabled||!this.inForeground)||pf(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Su(e,vn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>pf(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return $f.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Lf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?s$:c===16?o$:c===15?pE:c===14?tx:c===13?ex:c===12?i$:c===11?XM:void K()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Su(a,this.Qr?this.Qr.next():vn.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(R.FAILED_PRECONDITION,QM);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return yu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,c_)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yu(e).put("owner",t)}static D(){return Di.D()}bi(e){let t=yu(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(et(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;ag()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return et("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){et("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function yu(n){return ft(n,"owner")}function pf(n){return ft(n,"clientMetadata")}function DE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Iw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=de(),i=de();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Dw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Wf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ag()?8:YM(Xa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Dw;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Js()<=Kn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Xs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Js()<=Kn.DEBUG&&O("QueryEngine","Query:",Xs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Js()<=Kn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Xs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zt(t))):S.resolve())}Yi(e,t){if(nM(t))return S.resolve(null);let r=zt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Nf(t,null,"F"),r=zt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=de(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,Nf(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return nM(t)||i.isEqual(te.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Js()<=Kn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xs(t)),this.rs(e,s,t,WM(i,-1)).next(a=>a))})}ts(e,t){let r=new Ve(gx(e));return t.forEach((i,o)=>{Qu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Js()<=Kn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Xs(t)),this.Ji.getDocumentsMatchingQuery(e,t,Sn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Cw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new $e(le),this._s=new pr(o=>To(o),Wu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Qx(n,e,t,r){return new Cw(n,e,t,r)}function Yx(n,e){return N(this,null,function*(){let t=z(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=de();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function j$(n,e){let t=z(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(c,D)).next(A=>{let M=l.docVersions.get(D);J(M!==null),A.version.compareTo(M)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Zx(n){let e=z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function U$(n,e){let t=z(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(rt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,M,j){return A.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let c=en(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Jx(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(te.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function Jx(n,e,t){let r=de(),i=de();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=en();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(te.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function B$(n,e){let t=z(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ma(n,e){let t=z(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new pa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function ya(n,e,t){return N(this,null,function*(){let r=z(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Pi(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Kf(n,e,t){let r=z(n),i=te.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=z(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,zt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:te.min(),t?o:de())).next(a=>(tR(r,px(e),a),{documents:a,Ts:o})))}function Xx(n,e){let t=z(n),r=z(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function eR(n,e){let t=z(n),r=t.us.get(e)||te.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,WM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(tR(t,e,i),i))}function tR(n,e,t){let r=n.us.get(e)||te.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function $$(n,e,t,r){return N(this,null,function*(){let i=z(n),o=de(),s=en();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield ma(i,function(h){return zt(ba(Ce.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>Jx(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function z$(r,i){return N(this,arguments,function*(n,e,t=de()){let o=yield ma(n,zt(EE(e.bundledQuery))),s=z(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=nt(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(rt.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function xM(n,e){return`firestore_clients_${n}_${e}`}function RM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function u_(n,e){return`firestore_targets_${n}_${e}`}var Qf=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(et("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Du=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(et("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Yf=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=vE();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=ZM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(et("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},bw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(et("SharedClientState",`Failed to parse online state: ${e}`),null)}},Uu=class{constructor(){this.activeTargetIds=vE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Cu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new $e(le),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=xM(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Uu),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(xM(this.persistenceKey,r));if(i){let o=Yf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(u_(this.persistenceKey,e));if(i){let o=Du.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(u_(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void et("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=vn.oe;if(o!=null)try{let a=JSON.parse(o);J(typeof a=="number"),s=a}catch(a){et("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==vn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Qf(this.currentUser,e,t,r),o=RM(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=RM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=u_(this.persistenceKey,e),o=new Du(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Yf.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Qf.Rs(new ut(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Du.Rs(i,t)}Ls(e){return bw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=vE();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Zf=class{constructor(){this.so=new Uu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Uu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Tw=class{_o(e){}shutdown(){}};var Jf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var gf=null;function l_(){return gf===null?gf=function(){return 268435456+Math.round(2147483648*Math.random())}():gf++,"0x"+gf.toString(16)}var H$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Sw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Rt="WebChannelConnection",Aw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=l_(),c=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(O("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw zn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ca}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=H$[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=l_();return new Promise((s,a)=>{let c=new n_;c.setWithCredentials(!0),c.listenOnce(r_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case fu.NO_ERROR:let h=c.getResponseJson();O(Rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case fu.TIMEOUT:O(Rt,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case fu.HTTP_ERROR:let p=c.getStatus();if(O(Rt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let D=function(M){let j=M.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(j)>=0?j:R.UNKNOWN}(y.status);a(new k(D,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{O(Rt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(Rt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=l_(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=s_(),a=o_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");O(Rt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,y=!1,D=new Sw({Io:M=>{y?O(Rt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(O(Rt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),O(Rt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),A=(M,j,q)=>{M.listen(j,L=>{try{q(L)}catch(Y){setTimeout(()=>{throw Y},0)}})};return A(p,Ws.EventType.OPEN,()=>{y||(O(Rt,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),A(p,Ws.EventType.CLOSE,()=>{y||(y=!0,O(Rt,`RPC '${e}' stream ${i} transport closed`),D.So())}),A(p,Ws.EventType.ERROR,M=>{y||(y=!0,zn(Rt,`RPC '${e}' stream ${i} transport errored:`,M),D.So(new k(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,Ws.EventType.MESSAGE,M=>{var j;if(!y){let q=M.data[0];J(!!q);let L=q,Y=L.error||((j=L[0])===null||j===void 0?void 0:j.error);if(Y){O(Rt,`RPC '${e}' stream ${i} received error:`,Y);let ne=Y.status,X=function(w){let I=at[w];if(I!==void 0)return Ax(I)}(ne),E=Y.message;X===void 0&&(X=R.INTERNAL,E="Unknown error status: "+ne+" with message "+Y.message),y=!0,D.So(new k(X,E)),p.close()}else O(Rt,`RPC '${e}' stream ${i} received:`,q),D.bo(q)}}),A(a,i_.STAT_EVENT,M=>{M.stat===df.PROXY?O(Rt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===df.NOPROXY&&O(Rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function nR(){return typeof window<"u"?window:null}function wf(){return typeof document<"u"?document:null}function Yu(n){return new z_(n,!0)}var Bu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Xf=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Bu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(et(t.toString()),et("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Mw=class extends Xf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=A$(this.serializer,e),r=function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?nt(s.readTime):te.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=G_(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=xf(c)?{documents:Fx(o,c)}:{query:Vx(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=xx(o,s.resumeToken);let l=H_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=fa(o,s.snapshotVersion.toTimestamp());let l=H_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=x$(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=G_(this.serializer),t.removeTarget=e,this.a_(t)}},xw=class extends Xf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return J(!!e.streamToken),this.lastStreamToken=e.streamToken,J(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){J(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=M$(e.writeResults,e.commitTime),r=nt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=G_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Vu(this.serializer,r))};this.a_(t)}};var Rw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,q_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,q_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Nw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(et(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Pw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){ki(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(c){return N(this,null,function*(){let l=z(c);l.L_.add(4),yield Ta(l),l.q_.set("Unknown"),l.L_.delete(4),yield Zu(l)})}(this))}))}),this.q_=new Nw(r,i)}};function Zu(n){return N(this,null,function*(){if(ki(n))for(let e of n.B_)yield e(!0)})}function Ta(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function wp(n,e){let t=z(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),TE(t)?bE(t):Aa(t).r_()&&CE(t,e))}function va(n,e){let t=z(n),r=Aa(t);t.N_.delete(e),r.r_()&&rR(t,e),t.N_.size===0&&(r.r_()?r.o_():ki(t)&&t.q_.set("Unknown"))}function CE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Aa(n).A_(e)}function rR(n,e){n.Q_.xe(e),Aa(n).R_(e)}function bE(n){n.Q_=new $_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Aa(n).start(),n.q_.v_()}function TE(n){return ki(n)&&!Aa(n).n_()&&n.N_.size>0}function ki(n){return z(n).L_.size===0}function iR(n){n.Q_=void 0}function q$(n){return N(this,null,function*(){n.q_.set("Online")})}function G$(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{CE(n,e)})})}function W$(n,e){return N(this,null,function*(){iR(n),TE(n)?(n.q_.M_(e),bE(n)):n.q_.set("Unknown")})}function K$(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof kf&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ep(n,r)}else if(e instanceof sa?n.Q_.Ke(e):e instanceof Pf?n.Q_.He(e):n.Q_.We(e),!t.isEqual(te.min()))try{let r=yield Zx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),rR(o,c);let p=new pa(h.target,c,l,h.sequenceNumber);CE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield ep(n,r)}})}function ep(n,e,t){return N(this,null,function*(){if(!Pi(e))throw e;n.L_.add(1),yield Ta(n),n.q_.set("Offline"),t||(t=()=>Zx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Zu(n)}))})}function oR(n,e){return e().catch(t=>ep(n,t,e))}function Sa(n){return N(this,null,function*(){let e=z(n),t=Ri(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Q$(e);)try{let i=yield B$(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Y$(e,i)}catch(i){yield ep(e,i)}sR(e)&&aR(e)})}function Q$(n){return ki(n)&&n.O_.length<10}function Y$(n,e){n.O_.push(e);let t=Ri(n);t.r_()&&t.V_&&t.m_(e.mutations)}function sR(n){return ki(n)&&!Ri(n).n_()&&n.O_.length>0}function aR(n){Ri(n).start()}function Z$(n){return N(this,null,function*(){Ri(n).p_()})}function J$(n){return N(this,null,function*(){let e=Ri(n);for(let t of n.O_)e.m_(t.mutations)})}function X$(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=j_.from(r,e,t);yield oR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Sa(n)})}function e4(n,e){return N(this,null,function*(){e&&Ri(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return Sx(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Ri(r).s_(),yield oR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Sa(r)}})}(n,e)),sR(n)&&aR(n)})}function NM(n,e){return N(this,null,function*(){let t=z(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=ki(t);t.L_.add(3),yield Ta(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Zu(t)})}function kw(n,e){return N(this,null,function*(){let t=z(n);e?(t.L_.delete(2),yield Zu(t)):e||(t.L_.add(2),yield Ta(t),t.q_.set("Unknown"))})}function Aa(n){return n.K_||(n.K_=function(t,r,i){let o=z(t);return o.w_(),new Mw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:q$.bind(null,n),Ro:G$.bind(null,n),mo:W$.bind(null,n),d_:K$.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),TE(n)?bE(n):n.q_.set("Unknown")):(yield n.K_.stop(),iR(n))}))),n.K_}function Ri(n){return n.U_||(n.U_=function(t,r,i){let o=z(t);return o.w_(),new xw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Z$.bind(null,n),mo:e4.bind(null,n),f_:J$.bind(null,n),g_:X$.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield Sa(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Ow=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ma(n,e){if(et("AsyncQueue",`${e}: ${n}`),Pi(n))return new k(R.UNAVAILABLE,`${e}: ${n}`);throw n}var tp=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||H.comparator(t.key,r.key):(t,r)=>H.comparator(t.key,r.key),this.keyedMap=vu(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var np=class{constructor(){this.W_=new $e(H.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},_a=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,tp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Fw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Vw=class{constructor(){this.queries=PM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=z(t),o=i.queries;i.queries=PM(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new k(R.ABORTED,"Firestore shutting down"))}};function PM(){return new pr(n=>fx(n),Ku)}function SE(n,e){return N(this,null,function*(){let t=z(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Fw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ma(s,`Initialization of query '${Xs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&ME(t)})}function AE(n,e){return N(this,null,function*(){let t=z(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function t4(n,e){let t=z(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&ME(t)}function n4(n,e,t){let r=z(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function ME(n){n.Y_.forEach(e=>{e.next()})}var Lw,kM;(kM=Lw||(Lw={})).ea="default",kM.Cache="cache";var $u=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new _a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Lw.Cache}};var jw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var rp=class{constructor(e){this.serializer=e}Es(e){return lr(this.serializer,e)}ds(e){return e.metadata.exists?Ox(this.serializer,e.document,!1):lt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return nt(e)}},Uw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cR(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Ce.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new rp(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||de()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield $$(this.localStore,new rp(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield z$(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function cR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var ip=class{constructor(e){this.key=e}},op=class{constructor(e){this.key=e}},sp=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=gx(e),this.Ra=new tp(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new np,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Qu(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?D!==A&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(c||l)&&(a=!0)),M&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,D){let A=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return A(y)-A(D)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new _a(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new np,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new op(r))}),this.da.forEach(r=>{e.has(r)||t.push(new ip(r))}),t}ba(e){this.Ta=e.Ts,this.da=de();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return _a.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Bw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},$w=class{constructor(e){this.key=e,this.va=!1}},zw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new pr(a=>fx(a),Ku),this.Ma=new Map,this.xa=new Set,this.Oa=new $e(H.comparator),this.Na=new Map,this.La=new ju,this.Ba={},this.ka=new Map,this.qa=ga.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function r4(n,e,t=!0){return N(this,null,function*(){let r=Ep(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield uR(r,e,t,!0),i})}function i4(n,e){return N(this,null,function*(){let t=Ep(n);yield uR(t,e,!0,!1)})}function uR(n,e,t,r){return N(this,null,function*(){let i=yield ma(n.localStore,zt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield xE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&wp(n.remoteStore,i),a})}function xE(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,m,y)=>function(A,M,j,q){return N(this,null,function*(){let L=M.view.ma(j);L.ns&&(L=yield Kf(A.localStore,M.query,!1).then(({documents:E})=>M.view.ma(E,L)));let Y=q&&q.targetChanges.get(M.targetId),ne=q&&q.targetMismatches.get(M.targetId)!=null,X=M.view.applyChanges(L,A.isPrimaryClient,Y,ne);return Hw(A,M.targetId,X.wa),X.snapshot})}(n,p,m,y);let o=yield Kf(n.localStore,e,!0),s=new sp(e,o.Ts),a=s.ma(o.documents),c=Ou.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);Hw(n,t,l.wa);let h=new Bw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function o4(n,e,t){return N(this,null,function*(){let r=z(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Ku(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ya(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&va(r.remoteStore,i.targetId),wa(r,i.targetId)}).catch(Ni))):(wa(r,i.targetId),yield ya(r.localStore,i.targetId,!0))})}function s4(n,e){return N(this,null,function*(){let t=z(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),va(t.remoteStore,r.targetId))})}function a4(n,e,t){return N(this,null,function*(){let r=kE(n);try{let i=yield function(s,a){let c=z(s),l=Ke.now(),h=a.reduce((y,D)=>y.add(D.key),de()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=en(),A=de();return c.cs.getEntries(y,h).next(M=>{D=M,D.forEach((j,q)=>{q.isValidDocument()||(A=A.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,D)).next(M=>{p=M;let j=[];for(let q of a){let L=E$(q,p.get(q.key).overlayedDocument);L!=null&&j.push(new qn(q.key,L,sx(L.value.mapValue),Je.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,j,a)}).next(M=>{m=M;let j=M.applyToLocalDocumentSet(p,A);return c.documentOverlayCache.saveOverlays(y,M.batchId,j)})}).then(()=>({batchId:m.batchId,changes:yx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new $e(le)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield $r(r,i.changes),yield Sa(r.remoteStore)}catch(i){let o=Ma(i,"Failed to persist write");t.reject(o)}})}function lR(n,e){return N(this,null,function*(){let t=z(n);try{let r=yield U$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?J(s.va):i.removedDocuments.size>0&&(J(s.va),s.va=!1))}),yield $r(t,r,e)}catch(r){yield Ni(r)}})}function OM(n,e,t){let r=z(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=z(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&ME(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function c4(n,e,t){return N(this,null,function*(){let r=z(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new $e(H.comparator);s=s.insert(o,lt.newNoDocument(o,te.min()));let a=de().add(o),c=new ku(te.min(),new Map,new $e(le),s,a);yield lR(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),PE(r)}else yield ya(r.localStore,e,!1).then(()=>wa(r,e,t)).catch(Ni)})}function u4(n,e){return N(this,null,function*(){let t=z(n),r=e.batch.batchId;try{let i=yield j$(t.localStore,e);NE(t,r,null),RE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield $r(t,i)}catch(i){yield Ni(i)}})}function l4(n,e,t){return N(this,null,function*(){let r=z(n);try{let i=yield function(s,a){let c=z(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(J(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);NE(r,e,t),RE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield $r(r,i)}catch(i){yield Ni(i)}})}function d4(n,e){return N(this,null,function*(){let t=z(n);ki(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=z(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ma(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function RE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function NE(n,e,t){let r=z(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function wa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||dR(n,r)})}function dR(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(va(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),PE(n))}function Hw(n,e,t){for(let r of t)r instanceof ip?(n.La.addReference(r.key,e),h4(n,r)):r instanceof op?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||dR(n,r.key)):K()}function h4(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),PE(n))}function PE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new H(Ce.fromString(e)),r=n.qa.next();n.Na.set(r,new $w(t)),n.Oa=n.Oa.insert(t,r),wp(n.remoteStore,new pa(zt(ba(t.path)),r,"TargetPurposeLimboResolution",vn.oe))}}function $r(n,e,t){return N(this,null,function*(){let r=z(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Iw.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return N(this,null,function*(){let h=z(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Pi(p))throw p;O("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),D=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(D);h.os=h.os.insert(m,A)}}})}(r.localStore,o))})}function f4(n,e){return N(this,null,function*(){let t=z(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield Yx(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new k(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $r(t,r.hs)}})}function p4(n,e){let t=z(n),r=t.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function g4(n,e){return N(this,null,function*(){let t=z(n),r=yield Kf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Hw(t,e.targetId,i.wa),i})}function m4(n,e){return N(this,null,function*(){let t=z(n);return eR(t.localStore,e).then(r=>$r(t,r))})}function y4(n,e,t,r){return N(this,null,function*(){let i=z(n),o=yield function(a,c){let l=z(a),h=z(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Sa(i.remoteStore):t==="acknowledged"||t==="rejected"?(NE(i,e,r||null),RE(i,e),function(a,c){z(z(a).mutationQueue).On(c)}(i.localStore,e)):K(),yield $r(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function v4(n,e){return N(this,null,function*(){let t=z(n);if(Ep(t),kE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield FM(t,r.toArray());t.Qa=!0,yield kw(t.remoteStore,!0);for(let o of i)wp(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(wa(t,s),ya(t.localStore,s,!0))),va(t.remoteStore,s)}),yield i,yield FM(t,r),function(s){let a=z(s);a.Na.forEach((c,l)=>{va(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new $e(H.comparator)}(t),t.Qa=!1,yield kw(t.remoteStore,!1)}})}function FM(n,e,t){return N(this,null,function*(){let r=z(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield ma(r.localStore,zt(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield g4(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield Xx(r.localStore,s);a=yield ma(r.localStore,l),yield xE(r,hR(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function hR(n){return hx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _4(n){return function(t){return z(z(t).persistence).Qi()}(z(n).localStore)}function w4(n,e,t,r){return N(this,null,function*(){let i=z(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield eR(i.localStore,px(o[0])),a=ku.createSynthesizedRemoteEventForCurrentChange(e,t==="current",rt.EMPTY_BYTE_STRING);yield $r(i,s,a);break}case"rejected":yield ya(i.localStore,e,!0),wa(i,e,r);break;default:K()}})}function E4(n,e,t){return N(this,null,function*(){let r=Ep(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield Xx(r.localStore,i),s=yield ma(r.localStore,o);yield xE(r,hR(o),s.targetId,!1,s.resumeToken),wp(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield ya(r.localStore,i,!1).then(()=>{va(r.remoteStore,i),wa(r,i)}).catch(Ni))}})}function Ep(n){let e=z(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=lR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c4.bind(null,e),e.Ca.d_=t4.bind(null,e.eventManager),e.Ca.$a=n4.bind(null,e.eventManager),e}function kE(n){let e=z(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l4.bind(null,e),e}function I4(n,e,t){let r=z(n);(function(o,s,a){return N(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(y,D){let A=z(y),M=nt(D.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",j=>A.Gr.getBundleMetadata(j,D.id)).then(j=>!!j&&j.createTime.compareTo(M)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(cR(c));let l=new Uw(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield $r(o,p.Ia,void 0),yield function(y,D){let A=z(y);return A.persistence.runTransaction("Save bundle","readwrite",M=>A.Gr.saveBundleMetadata(M,D))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return zn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var qw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Yu(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Qx(this.persistence,new Wf,t.initialUser,this.serializer)}Ga(t){return new qf(Gf.Zr,this.serializer)}Wa(t){return new Zf}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var ap=class n extends qw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield og(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield kE(this.Ja.syncEngine),yield Sa(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return Qx(this.persistence,new Wf,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new sw(r,e.asyncQueue,t)}Ha(e,t){let r=new D_(t,this.persistence);return new I_(e.asyncQueue,r)}Ga(e){let t=DE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new Ew(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,nR(),wf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Zf}},Gw=class n extends ap{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield og(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Cu&&(this.sharedClientState.syncEngine={no:y4.bind(null,t),ro:w4.bind(null,t),io:E4.bind(null,t),Qi:_4.bind(null,t),eo:m4.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield v4(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=nR();if(!Cu.D(t))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=DE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Cu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},OE=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>OM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=f4.bind(null,this.syncEngine),yield kw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Vw}()}createDatastore(t){let r=Yu(t.databaseInfo.databaseId),i=function(s){return new Aw(s)}(t.databaseInfo);return function(s,a,c,l){return new Rw(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new Pw(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>OM(this.syncEngine,r,0),function(){return Jf.D()?new Jf:new Tw}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new zw(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=z(o);O("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ta(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function VM(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ea=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):et("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ww=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new ht,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new jw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Kw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=z(i),a={documents:o.map(p=>Fu(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ce.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=S$(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());J(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=H.fromPath(r);this.mutations.push(new Ru(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=z(r),s={writes:i.map(a=>Vu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ce.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw K();t=te.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(te.min())?Je.exists(!1):Je.updateTime(t):Je.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(te.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Je.updateTime(t)}return Je.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Qw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Bu(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new Kw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Gu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Sx(t)}return!1}};var Yw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ut.UNAUTHENTICATED,this.clientId=If.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ma(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function d_(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield Yx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function LM(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield FE(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>NM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>NM(e.remoteStore,i)),n._onlineComponents=e})}function FE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield d_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;zn("Error using user provided cache. Falling back to memory cache: "+t),yield d_(n,new qw)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield d_(n,new qw);return n._offlineComponents})}function Ip(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield LM(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield LM(n,new OE))),n._onlineComponents})}function fR(n){return FE(n).then(e=>e.persistence)}function VE(n){return FE(n).then(e=>e.localStore)}function pR(n){return Ip(n).then(e=>e.remoteStore)}function LE(n){return Ip(n).then(e=>e.syncEngine)}function D4(n){return Ip(n).then(e=>e.datastore)}function Ia(n){return N(this,null,function*(){let e=yield Ip(n),t=e.eventManager;return t.onListen=r4.bind(null,e.syncEngine),t.onUnlisten=o4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=i4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=s4.bind(null,e.syncEngine),t})}function C4(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield fR(n),t=yield pR(n);return e.setNetworkEnabled(!0),function(i){let o=z(i);return o.L_.delete(0),Zu(o)}(t)}))}function b4(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield fR(n),t=yield pR(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=z(i);o.L_.add(0),yield Ta(o),o.q_.set("Offline")})}(t)}))}function T4(n,e){let t=new ht;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=z(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Ma(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield VE(n),e,t)})),t.promise}function gR(n,e,t={}){let r=new ht;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,c,l){let h=new Ea({next:m=>{h.Za(),s.enqueueAndForget(()=>AE(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new $u(ba(a.path),h,{includeMetadataChanges:!0,_a:!0});return SE(o,p)}(yield Ia(n),n.asyncQueue,e,t,r)})),r.promise}function S4(n,e){let t=new ht;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield Kf(i,o,!0),c=new sp(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=Ma(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield VE(n),e,t)})),t.promise}function mR(n,e,t={}){let r=new ht;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,c,l){let h=new Ea({next:m=>{h.Za(),s.enqueueAndForget(()=>AE(o,p)),m.fromCache&&c.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new $u(a,h,{includeMetadataChanges:!0,_a:!0});return SE(o,p)}(yield Ia(n),n.asyncQueue,e,t,r)})),r.promise}function A4(n,e){let t=new Ea(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){z(i).Y_.add(o),o.next()}(yield Ia(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){z(i).Y_.delete(o)}(yield Ia(n),t)}))}}function M4(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?Mx().encode(s):s,function(h,p){return new Ww(h,p)}(function(h,p){if(h instanceof Uint8Array)return VM(h,p);if(h instanceof ArrayBuffer)return VM(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Yu(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){I4(yield LE(n),i,r)}))}function x4(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=z(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield VE(n),e)}))}function yR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var jM=new Map;function jE(n,e,t){if(!t)throw new k(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function UE(n,e,t,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function UM(n){if(!H.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BM(n){if(H.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Dp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function Te(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Dp(n);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vR(n,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var cp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},xo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new h_;switch(r.type){case"firstParty":return new m_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=jM.get(t);r&&(O("ComponentProvider","Removing Datastore"),jM.delete(t),r.terminate())}(this),Promise.resolve()}};function _R(n,e,t,r={}){var i;let o=(n=Te(n,xo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&zn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=ut.MOCK_USER;else{a=p0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ut(l)}n._authCredentials=new f_(new Ef(a,c))}}var Dt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Le=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},dr=class n extends Dt{constructor(e,t,r){super(e,t,ba(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new H(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function BE(n,e,...t){if(n=Ge(n),jE("collection","path",e),n instanceof xo){let r=Ce.fromString(e,...t);return BM(r),new dr(n,null,r)}{if(!(n instanceof Le||n instanceof dr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ce.fromString(e,...t));return BM(r),new dr(n.firestore,null,r)}}function wR(n,e){if(n=Te(n,xo),jE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Dt(n,null,function(r){return new Hn(Ce.emptyPath(),r)}(e))}function Ju(n,e,...t){if(n=Ge(n),arguments.length===1&&(e=If.newId()),jE("doc","path",e),n instanceof xo){let r=Ce.fromString(e,...t);return UM(r),new Le(n,null,new H(r))}{if(!(n instanceof Le||n instanceof dr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ce.fromString(e,...t));return UM(r),new Le(n.firestore,n instanceof dr?n.converter:null,new H(r))}}function $E(n,e){return n=Ge(n),e=Ge(e),(n instanceof Le||n instanceof dr)&&(e instanceof Le||e instanceof dr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function zE(n,e){return n=Ge(n),e=Ge(e),n instanceof Dt&&e instanceof Dt&&n.firestore===e.firestore&&Ku(n._query,e._query)&&n.converter===e.converter}var up=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Bu(this,"async_queue_retry"),this.Vu=()=>{let r=wf();r&&O("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=wf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=wf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ht;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Pi(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw et("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Ow.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Zw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Jw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ht,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var ER=-1,Qe=class extends xo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new up,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new up(e),this._firestoreClient=void 0,yield e}})}};function Ct(n){if(n._terminated)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||IR(n),n._firestoreClient}function IR(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new C_(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,yR(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Yw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function DR(n,e){zn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return bR(n,OE.provider,{build:r=>new ap(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function CR(n){return N(this,null,function*(){zn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();bR(n,OE.provider,{build:t=>new Gw(t,e.cacheSizeBytes)})})}function bR(n,e,t){if((n=Te(n,Qe))._firestoreClient||n._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},IR(n)}function TR(n){if(n._initialized&&!n._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new ht;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Di.D())return Promise.resolve();let i=r+"main";yield Di.delete(i)})}(DE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function SR(n){return function(t){let r=new ht;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return d4(yield LE(t),r)})),r.promise}(Ct(n=Te(n,Qe)))}function AR(n){return C4(Ct(n=Te(n,Qe)))}function MR(n){return b4(Ct(n=Te(n,Qe)))}function xR(n,e){let t=Ct(n=Te(n,Qe)),r=new Jw;return M4(t,n._databaseId,e,r),r}function RR(n,e){return x4(Ct(n=Te(n,Qe)),e).then(t=>t?new Dt(n,null,t.query):null)}var gr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(rt.fromBase64String(e))}catch(t){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Gn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ur=class{constructor(e){this._methodName=e}};var Ro=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}};var zu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var R4=/^__.*__$/,Xw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new qn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mi(e,this.data,t,this.fieldTransforms)}},lp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new qn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function NR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var dp=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(NR(this.Cu)&&R4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},eE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yu(e)}Qu(e,t,r,i=!1){return new dp({Cu:e,methodName:t,qu:r,path:tt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Oo(n){let e=n._freezeSettings(),t=Yu(n._databaseId);return new eE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Cp(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);GE("Data must be an object, but it was:",s,r);let a=OR(r,s),c,l;if(o.merge)c=new _n(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=oE(e,p,t);if(!s.contains(m))throw new k(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);VR(h,m)||h.push(m)}c=new _n(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new Xw(new Nt(a),c,l)}var Hu=class n extends Ur{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function PR(n,e,t){return new dp({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var tE=class n extends Ur{_toFieldTransform(e){return new So(e.path,new Si)}isEqual(e){return e instanceof n}},nE=class n extends Ur{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=PR(this,e,!0),r=this.Ku.map(o=>Fo(o,t)),i=new Lr(r);return new So(e.path,i)}isEqual(e){return e instanceof n&&cg(this.Ku,e.Ku)}},rE=class n extends Ur{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=PR(this,e,!0),r=this.Ku.map(o=>Fo(o,t)),i=new jr(r);return new So(e.path,i)}isEqual(e){return e instanceof n&&cg(this.Ku,e.Ku)}},iE=class n extends Ur{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Ai(e.serializer,wx(e.serializer,this.$u));return new So(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function HE(n,e,t,r){let i=n.Qu(1,e,t);GE("Data must be an object, but it was:",i,r);let o=[],s=Nt.empty();ko(r,(c,l)=>{let h=WE(e,c,t);l=Ge(l);let p=i.Nu(h);if(l instanceof Hu)o.push(h);else{let m=Fo(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new _n(o);return new lp(s,a,i.fieldTransforms)}function qE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[oE(e,r,t)],c=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(oE(e,o[m])),c.push(o[m+1]);let l=[],h=Nt.empty();for(let m=a.length-1;m>=0;--m)if(!VR(l,a[m])){let y=a[m],D=c[m];D=Ge(D);let A=s.Nu(y);if(D instanceof Hu)l.push(y);else{let M=Fo(D,A);M!=null&&(l.push(y),h.set(y,M))}}let p=new _n(l);return new lp(h,p,s.fieldTransforms)}function kR(n,e,t,r=!1){return Fo(t,n.Qu(r?4:3,e))}function Fo(n,e){if(FR(n=Ge(n)))return GE("Unsupported field value:",e,n),OR(n,e);if(n instanceof Ur)return function(r,i){if(!NR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Fo(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ke.fromDate(r);return{timestampValue:fa(i.serializer,o)}}if(r instanceof Ke){let o=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fa(i.serializer,o)}}if(r instanceof Ro)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gr)return{bytesValue:xx(i.serializer,r._byteString)};if(r instanceof Le){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof zu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return _E(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Dp(r)}`)}(n,e)}function OR(n,e){let t={};return nx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(n,(r,i)=>{let o=Fo(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function FR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ke||n instanceof Ro||n instanceof gr||n instanceof Le||n instanceof Ur||n instanceof zu)}function GE(n,e,t){if(!FR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Dp(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function oE(n,e,t){if((e=Ge(e))instanceof Gn)return e._internalPath;if(typeof e=="string")return WE(n,e);throw hp("Field path arguments must be of type string or ",n,!1,void 0,t)}var N4=new RegExp("[~\\*/\\[\\]]");function WE(n,e,t){if(e.search(N4)>=0)throw hp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gn(...e.split("."))._internalPath}catch{throw hp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new k(R.INVALID_ARGUMENT,a+n+c)}function VR(n,e){return n.some(t=>t.isEqual(e))}var No=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new sE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(bp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},sE=class extends No{data(){return super.data()}};function bp(n,e){return typeof e=="string"?WE(n,e):e instanceof Gn?e._internalPath:e._delegate._internalPath}function LR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qu=class{},Po=class extends qu{};function zr(n,e,...t){let r=[];e instanceof qu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof aE).length,a=o.filter(c=>c instanceof fp).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var fp=class n extends Po{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return KR(e._query,t),new Dt(e.firestore,e.converter,V_(e._query,t))}_parse(e){let t=Oo(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){zM(p,h);let y=[];for(let D of p)y.push($M(c,o,D));m={arrayValue:{values:y}}}else m=$M(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||zM(p,h),m=kR(a,s,p,h==="in"||h==="not-in");return we.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function jR(n,e,t){let r=e,i=bp("where",n);return fp._create(i,r,t)}var aE=class n extends qu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Pe.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)KR(s,c),s=V_(s,c)}(e._query,t),new Dt(e.firestore,e.converter,V_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var cE=class n extends Po{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bo(o,s)}(e._query,this._field,this._direction);return new Dt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Hn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function UR(n,e="asc"){let t=e,r=bp("orderBy",n);return cE._create(r,t)}var pp=class n extends Po{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Dt(e.firestore,e.converter,Nf(e._query,this._limit,this._limitType))}};function BR(n){return vR("limit",n),pp._create("limit",n,"F")}function $R(n){return vR("limitToLast",n),pp._create("limitToLast",n,"L")}var gp=class n extends Po{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=WR(e,this.type,this._docOrFields,this._inclusive);return new Dt(e.firestore,e.converter,function(i,o){return new Hn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function zR(...n){return gp._create("startAt",n,!0)}function HR(...n){return gp._create("startAfter",n,!1)}var mp=class n extends Po{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=WR(e,this.type,this._docOrFields,this._inclusive);return new Dt(e.firestore,e.converter,function(i,o){return new Hn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function qR(...n){return mp._create("endBefore",n,!1)}function GR(...n){return mp._create("endAt",n,!0)}function WR(n,e,t,r){if(t[0]=Ge(t[0]),t[0]instanceof No)return function(o,s,a,c,l){if(!c)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of oa(o))if(p.field.isKeyField())h.push(Co(s,c.key));else{let m=c.data.field(p.field);if(vp(m))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new fr(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Oo(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<h.length;D++){let A=h[D];if(m[D].field.isKeyField()){if(typeof A!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!yE(s)&&A.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let M=s.path.child(Ce.fromString(A));if(!H.isDocumentKey(M))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let j=new H(M);y.push(Co(a,j))}else{let M=kR(c,l,A);y.push(M)}}return new fr(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function $M(n,e,t){if(typeof(t=Ge(t))=="string"){if(t==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yE(e)&&t.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ce.fromString(t));if(!H.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Co(n,new H(r))}if(t instanceof Le)return Co(n,t._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dp(t)}.`)}function zM(n,e){if(!Array.isArray(n)||n.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Da=class{convertValue(e,t="none"){switch(Do(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ko(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>qe(s.doubleValue));return new zu(o)}convertGeoPoint(e){return new Ro(qe(e.latitude),qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=gE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){let t=Vr(e);return new Ke(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ce.fromString(e);J(Bx(r));let i=new bi(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(t)||et(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Tp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var uE=class extends Da{constructor(e){super(),this.firestore=e}convertBytes(e){return new gr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,t)}};var Fr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},An=class extends No{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ei(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(bp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ei=class extends An{data(e={}){return super.data(e)}},Wn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ei(this._firestore,this._userDataWriter,r.key,r,new Fr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ei(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ei(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:P4(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function P4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function KE(n,e){return n instanceof An&&e instanceof An?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Wn&&e instanceof Wn&&n._firestore===e._firestore&&zE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function QR(n){n=Te(n,Le);let e=Te(n.firestore,Qe);return gR(Ct(e),n._key).then(t=>JE(e,n,t))}var Br=class extends Da{constructor(e){super(),this.firestore=e}convertBytes(e){return new gr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,t)}};function YR(n){n=Te(n,Le);let e=Te(n.firestore,Qe),t=Ct(e),r=new Br(e);return T4(t,n._key).then(i=>new An(e,r,n._key,i,new Fr(i!==null&&i.hasLocalMutations,!0),n.converter))}function ZR(n){n=Te(n,Le);let e=Te(n.firestore,Qe);return gR(Ct(e),n._key,{source:"server"}).then(t=>JE(e,n,t))}function JR(n){n=Te(n,Dt);let e=Te(n.firestore,Qe),t=Ct(e),r=new Br(e);return LR(n._query),mR(t,n._query).then(i=>new Wn(e,r,n,i))}function XR(n){n=Te(n,Dt);let e=Te(n.firestore,Qe),t=Ct(e),r=new Br(e);return S4(t,n._query).then(i=>new Wn(e,r,n,i))}function eN(n){n=Te(n,Dt);let e=Te(n.firestore,Qe),t=Ct(e),r=new Br(e);return mR(t,n._query,{source:"server"}).then(i=>new Wn(e,r,n,i))}function QE(n,e,t){n=Te(n,Le);let r=Te(n.firestore,Qe),i=Tp(n.converter,e,t);return xa(r,[Cp(Oo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Je.none())])}function YE(n,e,t,...r){n=Te(n,Le);let i=Te(n.firestore,Qe),o=Oo(i),s;return s=typeof(e=Ge(e))=="string"||e instanceof Gn?qE(o,"updateDoc",n._key,e,t,r):HE(o,"updateDoc",n._key,e),xa(i,[s.toMutation(n._key,Je.exists(!0))])}function tN(n){return xa(Te(n.firestore,Qe),[new xi(n._key,Je.none())])}function nN(n,e){let t=Te(n.firestore,Qe),r=Ju(n),i=Tp(n.converter,e);return xa(t,[Cp(Oo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Je.exists(!1))]).then(()=>r)}function ZE(n,...e){var t,r,i;n=Ge(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Zw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Zw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Le)l=Te(n.firestore,Qe),h=ba(n._key.path),c={next:p=>{e[s]&&e[s](JE(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Te(n,Dt);l=Te(p.firestore,Qe),h=p._query;let m=new Br(l);c={next:y=>{e[s]&&e[s](new Wn(l,m,p,y))},error:e[s+1],complete:e[s+2]},LR(n._query)}return function(m,y,D,A){let M=new Ea(A),j=new $u(y,M,D);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return SE(yield Ia(m),j)})),()=>{M.Za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return AE(yield Ia(m),j)}))}}(Ct(l),h,a,c)}function rN(n,e){return A4(Ct(n=Te(n,Qe)),Zw(e)?e:{next:e})}function xa(n,e){return function(r,i){let o=new ht;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return a4(yield LE(r),i,o)})),o.promise}(Ct(n),e)}function JE(n,e,t){let r=t.docs.get(e._key),i=new Br(n);return new An(n,i,e._key,r,new Fr(t.hasPendingWrites,t.fromCache),e.converter)}var k4={maxAttempts:5};var yp=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Oo(e)}set(e,t,r){this._verifyNotCommitted();let i=_i(e,this._firestore),o=Tp(i.converter,t,r),s=Cp(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Je.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=_i(e,this._firestore),s;return s=typeof(t=Ge(t))=="string"||t instanceof Gn?qE(this._dataReader,"WriteBatch.update",o._key,t,r,i):HE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Je.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=_i(e,this._firestore);return this._mutations=this._mutations.concat(new xi(t._key,Je.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function _i(n,e){if((n=Ge(n)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var lE=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Oo(t)}get(t){let r=_i(t,this._firestore),i=new uE(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return K();let s=o[0];if(s.isFoundDocument())return new No(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new No(this._firestore,i,r._key,null,r.converter);throw K()})}set(t,r,i){let o=_i(t,this._firestore),s=Tp(o.converter,r,i),a=Cp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=_i(t,this._firestore),a;return a=typeof(r=Ge(r))=="string"||r instanceof Gn?qE(this._dataReader,"Transaction.update",s._key,r,i,o):HE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=_i(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=_i(e,this._firestore),r=new Br(this._firestore);return super.get(e).then(i=>new An(this._firestore,r,t._key,i._document,new Fr(!1,!1),t.converter))}};function iN(n,e,t){n=Te(n,Qe);let r=Object.assign(Object.assign({},k4),t);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new ht;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield D4(o);new Qw(o.asyncQueue,l,a,s,c).au()})),c.promise}(Ct(n),i=>e(new lE(n,i)),r)}function oN(){return new Hu("deleteField")}function sN(){return new tE("serverTimestamp")}function aN(...n){return new nE("arrayUnion",n)}function cN(...n){return new rE("arrayRemove",n)}function uN(n){return new iE("increment",n)}(function(e,t=!0){(function(i){Ca=i})(y0),ec(new ji("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Qe(new p_(r.getProvider("auth-internal")),new v_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bi(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Kr(BA,"4.7.3",e),Kr(BA,"4.7.3","esm2017")})();var O4="@firebase/firestore-compat",F4="0.3.38";function iI(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function lN(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function dN(){if(!rx())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Sp=class n{constructor(e){this._delegate=e}static fromBase64String(e){return dN(),new n(gr.fromBase64String(e))}static fromUint8Array(e){return lN(),new n(gr.fromUint8Array(e))}toBase64(){return dN(),this._delegate.toBase64()}toUint8Array(){return lN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function XE(n){return V4(n,["next","error","complete"])}function V4(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var eI=class{enableIndexedDbPersistence(e,t){return DR(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return CR(e._delegate)}clearIndexedDbPersistence(e){return TR(e._delegate)}},Ap=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof bi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&zn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){_R(this._delegate,e,t,r)}enableNetwork(){return AR(this._delegate)}disableNetwork(){return MR(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,UE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return SR(this._delegate)}onSnapshotsInSync(e){return rN(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Pa(this,BE(this._delegate,e))}catch(t){throw Ht(t,"collection()","Firestore.collection()")}}doc(e){try{return new mr(this,Ju(this._delegate,e))}catch(t){throw Ht(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Uo(this,wR(this._delegate,e))}catch(t){throw Ht(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return iN(this._delegate,t=>e(new Mp(this,t)))}batch(){return Ct(this._delegate),new xp(new yp(this._delegate,e=>xa(this._delegate,e)))}loadBundle(e){return xR(this._delegate,e)}namedQuery(e){return RR(this._delegate,e).then(t=>t?new Uo(this,t):null)}},Ra=class extends Da{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sp(new gr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return mr.forKey(t,this.firestore,null)}};function L4(n){HM(n)}var Mp=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ra(e)}get(e){let t=Vo(e);return this._delegate.get(t).then(r=>new Lo(this._firestore,new An(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Vo(e);return r?(iI("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Vo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Vo(e);return this._delegate.delete(t),this}},xp=class{constructor(e){this._delegate=e}set(e,t,r){let i=Vo(e);return r?(iI("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Vo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Vo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Na=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Ei(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Ra(e),t),i.set(t,o)),o}};Na.INSTANCES=new WeakMap;var mr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ra(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Le(t._delegate,r,new H(e)))}static forKey(e,t,r){return new n(t,new Le(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Pa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Pa(this.firestore,BE(this._delegate,e))}catch(t){throw Ht(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ge(e),e instanceof Le?$E(this._delegate,e):!1}set(e,t){t=iI("DocumentReference.set",t);try{return t?QE(this._delegate,e,t):QE(this._delegate,e)}catch(r){throw Ht(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?YE(this._delegate,e):YE(this._delegate,e,t,...r)}catch(i){throw Ht(i,"updateDoc()","DocumentReference.update()")}}delete(){return tN(this._delegate)}onSnapshot(...e){let t=hN(e),r=fN(e,i=>new Lo(this.firestore,new An(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ZE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=YR(this._delegate):e?.source==="server"?t=ZR(this._delegate):t=QR(this._delegate),t.then(r=>new Lo(this.firestore,new An(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Na.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ht(n,e,t){return n.message=n.message.replace(e,t),n}function hN(n){for(let e of n)if(typeof e=="object"&&!XE(e))return e;return{}}function fN(n,e){var t,r;let i;return XE(n[0])?i=n[0]:XE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Lo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new mr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return KE(this._delegate,e._delegate)}},jo=class extends Lo{data(e){let t=this._delegate.data(e);return this._delegate._converter||qM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Uo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ra(e)}where(e,t,r){try{return new n(this.firestore,zr(this._delegate,jR(e,t,r)))}catch(i){throw Ht(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,zr(this._delegate,UR(e,t)))}catch(r){throw Ht(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,zr(this._delegate,BR(e)))}catch(t){throw Ht(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,zr(this._delegate,$R(e)))}catch(t){throw Ht(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,zr(this._delegate,zR(...e)))}catch(t){throw Ht(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,zr(this._delegate,HR(...e)))}catch(t){throw Ht(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,zr(this._delegate,qR(...e)))}catch(t){throw Ht(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,zr(this._delegate,GR(...e)))}catch(t){throw Ht(t,"endAt()","Query.endAt()")}}isEqual(e){return zE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=XR(this._delegate):e?.source==="server"?t=eN(this._delegate):t=JR(this._delegate),t.then(r=>new Xu(this.firestore,new Wn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=hN(e),r=fN(e,i=>new Xu(this.firestore,new Wn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ZE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Na.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},tI=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new jo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Xu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Uo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new tI(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new jo(this._firestore,r))})}isEqual(e){return KE(this._delegate,e._delegate)}},Pa=class n extends Uo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new mr(this.firestore,e):null}doc(e){try{return e===void 0?new mr(this.firestore,Ju(this._delegate)):new mr(this.firestore,Ju(this._delegate,e))}catch(t){throw Ht(t,"doc()","CollectionReference.doc()")}}add(e){return nN(this._delegate,e).then(t=>new mr(this.firestore,t))}isEqual(e){return $E(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Na.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Vo(n){return Te(n,Le)}var nI=class n{constructor(...e){this._delegate=new Gn(...e)}static documentId(){return new n(tt.keyField().canonicalString())}isEqual(e){return e=Ge(e),e instanceof Gn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var rI=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=sN();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=oN();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=aN(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=cN(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=uN(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var j4={Firestore:Ap,GeoPoint:Ro,Timestamp:Ke,Blob:Sp,Transaction:Mp,WriteBatch:xp,DocumentReference:mr,DocumentSnapshot:Lo,Query:Uo,QueryDocumentSnapshot:jo,QuerySnapshot:Xu,CollectionReference:Pa,FieldPath:nI,FieldValue:rI,setLogLevel:L4,CACHE_SIZE_UNLIMITED:ER};function U4(n,e){n.INTERNAL.registerComponent(new ji("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},j4)))}function B4(n){U4(n,(e,t)=>new Ap(e,t,new eI)),n.registerVersion(O4,F4)}B4(rn);function $4(n,e=sc){return new ye(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function pN(n,e){return $4(n,e)}function z4(n,e){return pN(n,e).pipe(Hi(void 0),cc(),Q(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function aI(n,e){return pN(n,e).pipe(Q(t=>({payload:t,type:"query"})))}var Rp=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=yN(r,t);return new Pp(i,o,this.afs)}snapshotChanges(){return z4(this.ref,this.afs.schedulers.outsideAngular).pipe(Xt)}valueChanges(e={}){return this.snapshotChanges().pipe(Q(({payload:t})=>e.idField?me(P({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ie(this.ref.get(e)).pipe(Xt)}};function Np(n,e){return aI(n,e).pipe(Hi(void 0),cc(),Q(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function gN(n,e,t){return Np(n,t).pipe(zi((r,i)=>H4(r,i.map(o=>o.payload),e),[]),Rg(),Q(r=>r.map(i=>({type:i.type,payload:i}))))}function H4(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=q4(n,r))}),n}function oI(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function q4(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return oI(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return oI(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return oI(n,e.oldIndex,1);break}return n}function mN(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Pp=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Np(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Q(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Hi(void 0),cc(),pt(([r,i])=>i.length>0||!r),Q(([,r])=>r),Xt)}auditTrail(e){return this.stateChanges(e).pipe(zi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=mN(e);return gN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xt)}valueChanges(e={}){return aI(this.query,this.afs.schedulers.outsideAngular).pipe(Q(t=>t.payload.docs.map(r=>e.idField?me(P({},r.data()),{[e.idField]:r.id}):r.data())),Xt)}get(e){return Ie(this.query.get(e)).pipe(Xt)}add(e){return this.ref.add(e)}doc(e){return new Rp(this.ref.doc(e),this.afs)}},sI=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Np(this.query,this.afs.schedulers.outsideAngular).pipe(Xt):Np(this.query,this.afs.schedulers.outsideAngular).pipe(Q(t=>t.filter(r=>e.indexOf(r.type)>-1)),pt(t=>t.length>0),Xt)}auditTrail(e){return this.stateChanges(e).pipe(zi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=mN(e);return gN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xt)}valueChanges(e={}){return aI(this.query,this.afs.schedulers.outsideAngular).pipe(Q(r=>r.payload.docs.map(i=>e.idField?P({[e.idField]:i.id},i.data()):i.data())),Xt)}get(e){return Ie(this.query.get(e)).pipe(Xt)}},G4=new G("angularfire2.enableFirestorePersistence"),W4=new G("angularfire2.firestore.persistenceSettings"),K4=new G("angularfire2.firestore.settings"),Q4=new G("angularfire2.firestore.use-emulator");function yN(n,e=t=>t){return{query:e(n),ref:n}}var tn=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,y,D,A,M,j,q){this.schedulers=c;let L=qc(t,a,r),Y=h;p&&e_(L,a,m,D,A,M,y,j),[this.firestore,this.persistenceEnabled$]=Uh(`${L.name}.firestore`,"AngularFirestore",L.name,()=>{let ne=a.runOutsideAngular(()=>L.firestore());if(o&&ne.settings(o),Y&&ne.useEmulator(...Y),i&&!Rr(s)){let X=()=>{try{return Ie(ne.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),ee(!1)}};return[ne,a.runOutsideAngular(X)]}else return[ne,ee(!1)]},[o,Y,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=yN(i,r),a=this.schedulers.ngZone.run(()=>o);return new Pp(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new sI(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Rp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(F(ks),F(Os,8),F(G4,8),F(K4,8),F(It),F(Ee),F(Lh),F(W4,8),F(Q4,8),F(LA,8),F(Kv,8),F(Qv,8),F(Yv,8),F(Zv,8),F(Jv,8),F(Xv,8),F(uo,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var vN=(()=>{class n{constructor(t){this.db=t,this.accesoHeader="header service running...",this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}updateHeader(t,r){return this.headerRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(tn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _N=(()=>{class n{constructor(t){this.headerService=t,this.header=new cf,console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}actualizarHeader(){this.header.id&&this.headerService.updateHeader(this.header.id,this.header).then(()=>{console.log("Header actualizado exitosamente")})}static{this.\u0275fac=function(r){return new(r||n)(ue(vN))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-header"]],decls:13,vars:7,consts:[["headerForm","ngForm"],[1,"container","color-light"],[1,"form-box"],[3,"ngSubmit"],["type","text","name","name","placeholder","Nombre",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","goalLife","placeholder","Meta de vida",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","photoUrl","placeholder","URL de la foto",1,"txt",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Correo electr\xF3nico",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","phoneNumber","placeholder","Tel\xE9fono",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","Ubicaci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","socialNetwork","placeholder","Red social",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit"]],template:function(r,i){if(r&1){let o=st();U(0,"div",1)(1,"div",2)(2,"form",3,0),Ae("ngSubmit",function(){return re(o),ie(i.actualizarHeader())}),U(4,"input",4),xe("ngModelChange",function(a){return re(o),Re(i.header.name,a)||(i.header.name=a),ie(a)}),$(),U(5,"input",5),xe("ngModelChange",function(a){return re(o),Re(i.header.goalLife,a)||(i.header.goalLife=a),ie(a)}),$(),U(6,"input",6),xe("ngModelChange",function(a){return re(o),Re(i.header.photoUrl,a)||(i.header.photoUrl=a),ie(a)}),$(),U(7,"input",7),xe("ngModelChange",function(a){return re(o),Re(i.header.email,a)||(i.header.email=a),ie(a)}),$(),U(8,"input",8),xe("ngModelChange",function(a){return re(o),Re(i.header.phoneNumber,a)||(i.header.phoneNumber=a),ie(a)}),$(),U(9,"input",9),xe("ngModelChange",function(a){return re(o),Re(i.header.location,a)||(i.header.location=a),ie(a)}),$(),U(10,"input",10),xe("ngModelChange",function(a){return re(o),Re(i.header.socialNetwork,a)||(i.header.socialNetwork=a),ie(a)}),$(),U(11,"button",11),se(12,"Actualizar"),$()()()()}r&2&&(oe(4),Me("ngModel",i.header.name),oe(),Me("ngModel",i.header.goalLife),oe(),Me("ngModel",i.header.photoUrl),oe(),Me("ngModel",i.header.email),oe(),Me("ngModel",i.header.phoneNumber),oe(),Me("ngModel",i.header.location),oe(),Me("ngModel",i.header.socialNetwork))},dependencies:[Jt,xt,Yt,Zt,Bt,Ut],styles:[".container.color-light[_ngcontent-%COMP%]{background-color:#fdfdfd;border-radius:12px;padding:2rem;max-width:600px;margin:2rem auto;box-shadow:0 0 15px #0000001a}.container.color-dark[_ngcontent-%COMP%]{background-color:#222;color:#fff;padding:1rem;text-align:center;border-radius:12px 12px 0 0}.form-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.txt[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #ccc;border-radius:8px;font-size:1rem;width:100%;transition:border .3s}.txt[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.btn-submit[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:.75rem;border-radius:8px;font-weight:700;font-size:1rem;cursor:pointer;transition:background-color .3s}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();var el=class{constructor(){this.startDate="",this.endDate="",this.location="",this.position="",this.company="",this.accomplishment=""}};var wN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}createWorkExperience(t){return this.workExperienceRef.add(P({},t))}deleteWorkExperience(t){return this.workExperienceRef.doc(t).delete()}update(t,r){return this.workExperienceRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(tn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function J4(n,e){if(n&1){let t=st();U(0,"div",15)(1,"div",16)(2,"div",17)(3,"button",18),Ae("click",function(){let i=re(t).$implicit,o=vt();return ie(o.deleteJob(i.id))}),se(4,"Eliminar"),$(),U(5,"button",19),Ae("click",function(){let i=re(t).$implicit,o=vt();return ie(o.edit(i))}),se(6,"Actualizar"),$()(),U(7,"div",20),se(8),$()()()}if(n&2){let t=e.$implicit;oe(8),ro(" ",t.company," - ",t.position," ")}}var EN=(()=>{class n{constructor(t){this.workExperienceService=t,this.itemCount=0,this.text="Agregar",this.btntxt="Agregar",this.workExperience=[],this.myWorkExperience=new el,console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}AgregarJob(){this.myWorkExperience.id?this.workExperienceService.update(this.myWorkExperience.id,this.myWorkExperience).then(()=>{console.log("Update successfully!"),this.resetForm()}):this.workExperienceService.createWorkExperience(this.myWorkExperience).then(()=>{console.log("Created successfully"),this.resetForm()})}deleteJob(t){this.workExperienceService.deleteWorkExperience(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}edit(t){this.myWorkExperience=P({},t),this.btntxt="Actualizar"}resetForm(){this.myWorkExperience=new el,this.btntxt="Agregar"}static{this.\u0275fac=function(r){return new(r||n)(ue(wN))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-workexperience"]],decls:18,vars:8,consts:[["workForm","ngForm"],[1,"container","color-dark"],[1,"col3"],[1,"container","color-light"],[1,"form-box"],[3,"ngSubmit"],["type","text","name","startate","placeholder","Start date (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","enddate","placeholder","End date (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","loction","placeholder","Location",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","posion","placeholder","Position",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","copany","placeholder","Company",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","acomplishments","placeholder","Accomplishments",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit"],[1,"col2"],["class","list-container",4,"ngFor","ngForOf"],[1,"list-container"],[1,"list-content"],[1,"list-actions"],[1,"btn-delete",3,"click"],[1,"btn-edit",3,"click"],[1,"list-text"]],template:function(r,i){if(r&1){let o=st();U(0,"div",1)(1,"div",2)(2,"p"),se(3,"Work-experience items:"),$()()(),U(4,"div",3)(5,"div",4)(6,"form",5,0),Ae("ngSubmit",function(){return re(o),ie(i.AgregarJob())}),U(8,"input",6),xe("ngModelChange",function(a){return re(o),Re(i.myWorkExperience.startDate,a)||(i.myWorkExperience.startDate=a),ie(a)}),$(),U(9,"input",7),xe("ngModelChange",function(a){return re(o),Re(i.myWorkExperience.endDate,a)||(i.myWorkExperience.endDate=a),ie(a)}),$(),U(10,"input",8),xe("ngModelChange",function(a){return re(o),Re(i.myWorkExperience.location,a)||(i.myWorkExperience.location=a),ie(a)}),$(),U(11,"input",9),xe("ngModelChange",function(a){return re(o),Re(i.myWorkExperience.position,a)||(i.myWorkExperience.position=a),ie(a)}),$(),U(12,"input",10),xe("ngModelChange",function(a){return re(o),Re(i.myWorkExperience.company,a)||(i.myWorkExperience.company=a),ie(a)}),$(),U(13,"input",11),xe("ngModelChange",function(a){return re(o),Re(i.myWorkExperience.accomplishment,a)||(i.myWorkExperience.accomplishment=a),ie(a)}),$(),U(14,"button",12),se(15),$()(),U(16,"div",13),hn(17,J4,9,2,"div",14),$()()()}r&2&&(oe(8),Me("ngModel",i.myWorkExperience.startDate),oe(),Me("ngModel",i.myWorkExperience.endDate),oe(),Me("ngModel",i.myWorkExperience.location),oe(),Me("ngModel",i.myWorkExperience.position),oe(),Me("ngModel",i.myWorkExperience.company),oe(),Me("ngModel",i.myWorkExperience.accomplishment),oe(2),gn(i.btntxt),oe(2),fn("ngForOf",i.workExperience))},dependencies:[Cn,Jt,xt,Yt,Zt,Bt,Ut],styles:[".container.color-light[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem 1rem}.form-box[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 12px #0000001a;max-width:500px;width:100%}.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-bottom:1rem;font-size:1rem;border:1px solid #ccc;border-radius:6px;transition:border-color .3s}.txt[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#007bff;color:#fff;font-size:1rem;border:none;border-radius:6px;cursor:pointer;transition:background .3s}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0056b3}.list-container[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:8px;padding:1rem;margin-top:1rem}.list-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.5rem}.list-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.list-text[_ngcontent-%COMP%]{flex-grow:1;font-size:.95rem;color:#333}.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:.4rem .9rem;border-radius:6px;font-size:.9rem;cursor:pointer}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#a71d2a}.btn-edit[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;padding:.4rem .9rem;border-radius:6px;font-size:.9rem;cursor:pointer}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#0d6e83}"]})}}return n})();var tl=class{constructor(){this.fechaInic="",this.fechaFin="",this.titulo="",this.escuela=""}};var IN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}createEducation(t){return this.educationRef.add(P({},t))}deleteEducation(t){return this.educationRef.doc(t).delete()}update(t,r){return this.educationRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(tn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function e3(n,e){if(n&1){let t=st();U(0,"div",13)(1,"div",14)(2,"div",15)(3,"button",16),Ae("click",function(){let i=re(t).$implicit,o=vt();return ie(o.deleteJob(i.id))}),se(4,"Eliminar"),$(),U(5,"button",17),Ae("click",function(){let i=re(t).$implicit,o=vt();return ie(o.edit(i))}),se(6,"Actualizar"),$()(),U(7,"div",18),se(8),$()()()}if(n&2){let t=e.$implicit;oe(8),Ty(" ",t.escuela," - ",t.titulo," (",t.fechaInic," - ",t.fechaFin,") ")}}var DN=(()=>{class n{constructor(t){this.educationService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.education=[],this.myeducation=new tl,console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}AgregarJob(){this.myeducation.id?this.educationService.update(this.myeducation.id,this.myeducation).then(()=>{console.log("Update successfully!"),this.resetForm()}):this.educationService.createEducation(this.myeducation).then(()=>{console.log("Created successfully"),this.resetForm()})}deleteJob(t){this.educationService.deleteEducation(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}edit(t){this.myeducation=P({},t),this.btntxt="Actualizar"}resetForm(){this.myeducation=new tl,this.btntxt="Agregar"}static{this.\u0275fac=function(r){return new(r||n)(ue(IN))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-education"]],decls:20,vars:6,consts:[["eduForm","ngForm"],[1,"container","color-dark"],[1,"col3"],[1,"container","color-light"],[1,"form-box"],[3,"ngSubmit"],["type","text","name","fechaInic","placeholder","Fecha inicio (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","fechaFin","placeholder","Fecha fin (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","titulo","placeholder","T\xEDtulo",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","escuela","placeholder","Escuela",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit"],[1,"col2"],["class","list-container",4,"ngFor","ngForOf"],[1,"list-container"],[1,"list-content"],[1,"list-actions"],[1,"btn-delete",3,"click"],[1,"btn-edit",3,"click"],[1,"list-text"]],template:function(r,i){if(r&1){let o=st();U(0,"div",1)(1,"div",2)(2,"p"),se(3,"Registros educativos:"),$()()(),U(4,"div",3)(5,"div",4)(6,"form",5,0),Ae("ngSubmit",function(){return re(o),ie(i.AgregarJob())}),U(8,"input",6),xe("ngModelChange",function(a){return re(o),Re(i.myeducation.fechaInic,a)||(i.myeducation.fechaInic=a),ie(a)}),$(),pn(9,"br"),U(10,"input",7),xe("ngModelChange",function(a){return re(o),Re(i.myeducation.fechaFin,a)||(i.myeducation.fechaFin=a),ie(a)}),$(),pn(11,"br"),U(12,"input",8),xe("ngModelChange",function(a){return re(o),Re(i.myeducation.titulo,a)||(i.myeducation.titulo=a),ie(a)}),$(),pn(13,"br"),U(14,"input",9),xe("ngModelChange",function(a){return re(o),Re(i.myeducation.escuela,a)||(i.myeducation.escuela=a),ie(a)}),$(),pn(15,"br"),U(16,"button",10),se(17),$()(),U(18,"div",11),hn(19,e3,9,4,"div",12),$()()()}r&2&&(oe(8),Me("ngModel",i.myeducation.fechaInic),oe(2),Me("ngModel",i.myeducation.fechaFin),oe(2),Me("ngModel",i.myeducation.titulo),oe(2),Me("ngModel",i.myeducation.escuela),oe(3),gn(i.btntxt),oe(2),fn("ngForOf",i.education))},dependencies:[Cn,Jt,xt,Yt,Zt,Bt,Ut],styles:[".container.color-light[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem 1rem}.form-box[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 12px #0000001a;max-width:500px;width:100%}.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-bottom:1rem;font-size:1rem;border:1px solid #ccc;border-radius:6px;transition:border-color .3s}.txt[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#007bff;color:#fff;font-size:1rem;border:none;border-radius:6px;cursor:pointer;transition:background .3s}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0056b3}.list-container[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:8px;padding:1rem;margin-top:1rem}.list-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.5rem}.list-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.list-text[_ngcontent-%COMP%]{flex-grow:1;font-size:.95rem;color:#333}.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:.4rem .9rem;border-radius:6px;font-size:.9rem;cursor:pointer}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#a71d2a}.btn-edit[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;padding:.4rem .9rem;border-radius:6px;font-size:.9rem;cursor:pointer}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#0d6e83}"]})}}return n})();var nl=class{constructor(){this.titulo="",this.ano="",this.desc=""}};var CN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/certificates",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}createCertificates(t){return this.certificatesRef.add(P({},t))}deleteCertificates(t){return this.certificatesRef.doc(t).delete()}update(t,r){return this.certificatesRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(tn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function n3(n,e){if(n&1){let t=st();U(0,"div",12)(1,"div",13)(2,"div",14)(3,"button",15),Ae("click",function(){let i=re(t).$implicit,o=vt();return ie(o.deleteJob(i.id))}),se(4,"Eliminar"),$(),U(5,"button",16),Ae("click",function(){let i=re(t).$implicit,o=vt();return ie(o.edit(i))}),se(6,"Actualizar"),$()(),U(7,"div",17),se(8),$()()()}if(n&2){let t=e.$implicit;oe(8),ro(" ",t.titulo," - ",t.ano," ")}}var bN=(()=>{class n{constructor(t){this.certificatesService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.certificates=[],this.myCertificates=new nl,console.log(this.certificatesService),this.certificatesService.getCertificates().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log(this.certificates)})}AgregarJob(){this.myCertificates.id?this.certificatesService.update(this.myCertificates.id,this.myCertificates).then(()=>{console.log("Update successfully!"),this.resetForm()}):this.certificatesService.createCertificates(this.myCertificates).then(()=>{console.log("Created successfully"),this.resetForm()})}deleteJob(t){this.certificatesService.deleteCertificates(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}edit(t){this.myCertificates=P({},t),this.btntxt="Actualizar"}resetForm(){this.myCertificates=new nl,this.btntxt="Agregar"}static{this.\u0275fac=function(r){return new(r||n)(ue(CN))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-certificates"]],decls:15,vars:5,consts:[["certForm","ngForm"],[1,"container","color-dark"],[1,"col3"],[1,"container","color-light"],[1,"form-box"],[3,"ngSubmit"],["type","text","name","titulo","placeholder","T\xEDtulo",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","ano","placeholder","A\xF1o",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","desc","placeholder","Descripci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit"],[1,"col2"],["class","list-container",4,"ngFor","ngForOf"],[1,"list-container"],[1,"list-content"],[1,"list-actions"],[1,"btn-delete",3,"click"],[1,"btn-edit",3,"click"],[1,"list-text"]],template:function(r,i){if(r&1){let o=st();U(0,"div",1)(1,"div",2)(2,"p"),se(3,"Certificados registrados:"),$()()(),U(4,"div",3)(5,"div",4)(6,"form",5,0),Ae("ngSubmit",function(){return re(o),ie(i.AgregarJob())}),U(8,"input",6),xe("ngModelChange",function(a){return re(o),Re(i.myCertificates.titulo,a)||(i.myCertificates.titulo=a),ie(a)}),$(),U(9,"input",7),xe("ngModelChange",function(a){return re(o),Re(i.myCertificates.ano,a)||(i.myCertificates.ano=a),ie(a)}),$(),U(10,"input",8),xe("ngModelChange",function(a){return re(o),Re(i.myCertificates.desc,a)||(i.myCertificates.desc=a),ie(a)}),$(),U(11,"button",9),se(12),$()(),U(13,"div",10),hn(14,n3,9,2,"div",11),$()()()}r&2&&(oe(8),Me("ngModel",i.myCertificates.titulo),oe(),Me("ngModel",i.myCertificates.ano),oe(),Me("ngModel",i.myCertificates.desc),oe(2),gn(i.btntxt),oe(2),fn("ngForOf",i.certificates))},dependencies:[Cn,Jt,xt,Yt,Zt,Bt,Ut],styles:[".container.color-light[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem 1rem}.form-box[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 12px #0000001a;max-width:500px;width:100%}.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-bottom:1rem;font-size:1rem;border:1px solid #ccc;border-radius:6px;transition:border-color .3s}.txt[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#007bff;color:#fff;font-size:1rem;border:none;border-radius:6px;cursor:pointer;transition:background .3s}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0056b3}.list-container[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:8px;padding:1rem;margin-top:1rem}.list-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.5rem}.list-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.list-text[_ngcontent-%COMP%]{flex-grow:1;font-size:.95rem;color:#333}.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:.4rem .9rem;border-radius:6px;font-size:.9rem;cursor:pointer}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#a71d2a}.btn-edit[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;padding:.4rem .9rem;border-radius:6px;font-size:.9rem;cursor:pointer}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#0d6e83}"]})}}return n})();var rl=class{constructor(){this.skill="",this.percentage=""}};var TN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}createSkills(t){return this.skillsRef.add(P({},t))}deleteSkills(t){return this.skillsRef.doc(t).delete()}update(t,r){return this.skillsRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(tn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function i3(n,e){if(n&1){let t=st();U(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),Ae("click",function(){let i=re(t).$implicit,o=vt();return ie(o.deleteJob(i.id))}),se(4,"Eliminar"),$(),U(5,"button",13),Ae("click",function(){let i=re(t).$implicit,o=vt();return ie(o.edit(i))}),se(6,"Actualizar"),$()(),U(7,"div",14),se(8),$()()()}if(n&2){let t=e.$implicit;oe(8),ro(" ",t.skill," - ",t.percentage,"% ")}}var SN=(()=>{class n{constructor(t){this.skillsService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.skills=[],this.mySkills=new rl,console.log(this.skillsService),this.skillsService.getSkills().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r,console.log(this.skills)})}AgregarJob(){this.mySkills.id?this.skillsService.update(this.mySkills.id,this.mySkills).then(()=>{console.log("Update successfully!"),this.resetForm()}):this.skillsService.createSkills(this.mySkills).then(()=>{console.log("Created successfully"),this.resetForm()})}deleteJob(t){this.skillsService.deleteSkills(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}edit(t){this.mySkills=P({},t),this.btntxt="Actualizar"}resetForm(){this.mySkills=new rl,this.btntxt="Agregar"}static{this.\u0275fac=function(r){return new(r||n)(ue(TN))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-skills"]],decls:12,vars:4,consts:[["skillForm","ngForm"],[1,"container","color-light"],[1,"form-box"],[3,"ngSubmit"],["type","text","name","skill","placeholder","Habilidad",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","percentage","placeholder","Porcentaje",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit"],[1,"col2"],["class","list-container",4,"ngFor","ngForOf"],[1,"list-container"],[1,"list-content"],[1,"list-actions"],[1,"btn-delete",3,"click"],[1,"btn-edit",3,"click"],[1,"list-text"]],template:function(r,i){if(r&1){let o=st();U(0,"div",1)(1,"div",2)(2,"form",3,0),Ae("ngSubmit",function(){return re(o),ie(i.AgregarJob())}),U(4,"input",4),xe("ngModelChange",function(a){return re(o),Re(i.mySkills.skill,a)||(i.mySkills.skill=a),ie(a)}),$(),pn(5,"br"),U(6,"input",5),xe("ngModelChange",function(a){return re(o),Re(i.mySkills.percentage,a)||(i.mySkills.percentage=a),ie(a)}),$(),pn(7,"br"),U(8,"button",6),se(9),$()(),U(10,"div",7),hn(11,i3,9,2,"div",8),$()()()}r&2&&(oe(4),Me("ngModel",i.mySkills.skill),oe(2),Me("ngModel",i.mySkills.percentage),oe(3),gn(i.btntxt),oe(2),fn("ngForOf",i.skills))},dependencies:[Cn,Jt,xt,Yt,Zt,Bt,Ut],styles:[".container.color-light[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem 1rem}.form-box[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 12px #0000001a;max-width:500px;width:100%}.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-bottom:1rem;font-size:1rem;border:1px solid #ccc;border-radius:6px;transition:border-color .3s}.txt[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#007bff;color:#fff;font-size:1rem;border:none;border-radius:6px;cursor:pointer;transition:background .3s}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0056b3}.list-container[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:8px;padding:1rem;margin-top:1rem}.list-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.5rem}.list-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.list-text[_ngcontent-%COMP%]{flex-grow:1;font-size:.95rem;color:#333}.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:.4rem .9rem;border-radius:6px;font-size:.9rem;cursor:pointer}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#a71d2a}.btn-edit[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;padding:.4rem .9rem;border-radius:6px;font-size:.9rem;cursor:pointer}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#0d6e83}"]})}}return n})();var il=class{constructor(){this.language=""}};var AN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/languages",this.languagesRef=t.collection(this.dbPath)}getLanguages(){return this.languagesRef}createLanguages(t){return this.languagesRef.add(P({},t))}deleteLanguages(t){return this.languagesRef.doc(t).delete()}update(t,r){return this.languagesRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(tn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function s3(n,e){if(n&1){let t=st();U(0,"div",10)(1,"div",11)(2,"div",12)(3,"button",13),Ae("click",function(){let i=re(t).$implicit,o=vt();return ie(o.deleteJob(i.id))}),se(4,"Eliminar"),$(),U(5,"button",14),Ae("click",function(){let i=re(t).$implicit,o=vt();return ie(o.edit(i))}),se(6,"Actualizar"),$()(),U(7,"div",15),se(8),$()()()}if(n&2){let t=e.$implicit;oe(8),Ss(" ",t.language," ")}}var MN=(()=>{class n{constructor(t){this.languagesService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.languages=[],this.myLanguages=new il,console.log(this.languagesService),this.languagesService.getLanguages().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log(this.languages)})}AgregarJob(){this.myLanguages.id?this.languagesService.update(this.myLanguages.id,this.myLanguages).then(()=>{console.log("Update successfully!"),this.resetForm()}):this.languagesService.createLanguages(this.myLanguages).then(()=>{console.log("Created successfully"),this.resetForm()})}deleteJob(t){this.languagesService.deleteLanguages(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}edit(t){this.myLanguages=P({},t),this.btntxt="Actualizar"}resetForm(){this.myLanguages=new il,this.btntxt="Agregar"}static{this.\u0275fac=function(r){return new(r||n)(ue(AN))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-languages"]],decls:13,vars:3,consts:[["langForm","ngForm"],[1,"container","color-dark"],[1,"col3"],[1,"container","color-light"],[1,"form-box"],[3,"ngSubmit"],["type","text","name","language","placeholder","Idioma",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit"],[1,"col2"],["class","list-container",4,"ngFor","ngForOf"],[1,"list-container"],[1,"list-content"],[1,"list-actions"],[1,"btn-delete",3,"click"],[1,"btn-edit",3,"click"],[1,"list-text"]],template:function(r,i){if(r&1){let o=st();U(0,"div",1)(1,"div",2)(2,"p"),se(3,"Idiomas registrados:"),$()()(),U(4,"div",3)(5,"div",4)(6,"form",5,0),Ae("ngSubmit",function(){return re(o),ie(i.AgregarJob())}),U(8,"input",6),xe("ngModelChange",function(a){return re(o),Re(i.myLanguages.language,a)||(i.myLanguages.language=a),ie(a)}),$(),U(9,"button",7),se(10),$()(),U(11,"div",8),hn(12,s3,9,1,"div",9),$()()()}r&2&&(oe(8),Me("ngModel",i.myLanguages.language),oe(2),gn(i.btntxt),oe(2),fn("ngForOf",i.languages))},dependencies:[Cn,Jt,xt,Yt,Zt,Bt,Ut],styles:[".container.color-light[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem 1rem}.form-box[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 12px #0000001a;max-width:500px;width:100%}.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-bottom:1rem;font-size:1rem;border:1px solid #ccc;border-radius:6px;transition:border-color .3s}.txt[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#007bff;color:#fff;font-size:1rem;border:none;border-radius:6px;cursor:pointer;transition:background .3s}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0056b3}.list-container[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:8px;padding:1rem;margin-top:1rem}.list-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.5rem}.list-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.list-text[_ngcontent-%COMP%]{flex-grow:1;font-size:.95rem;color:#333}.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:.4rem .9rem;border-radius:6px;font-size:.9rem;cursor:pointer}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#a71d2a}.btn-edit[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;padding:.4rem .9rem;border-radius:6px;font-size:.9rem;cursor:pointer}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#0d6e83}"]})}}return n})();var ol=class{constructor(){this.descripcion=""}};var xN=(()=>{class n{constructor(t){this.db=t,this.dbPath="/interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}createInterests(t){return this.interestsRef.add(P({},t))}deleteInterests(t){return this.interestsRef.doc(t).delete()}update(t,r){return this.interestsRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(F(tn))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function c3(n,e){if(n&1){let t=st();U(0,"div",10)(1,"div",11)(2,"div",12)(3,"button",13),Ae("click",function(){let i=re(t).$implicit,o=vt();return ie(o.deleteJob(i.id))}),se(4,"Eliminar"),$(),U(5,"button",14),Ae("click",function(){let i=re(t).$implicit,o=vt();return ie(o.edit(i))}),se(6,"Actualizar"),$()(),U(7,"div",15),se(8),$()()()}if(n&2){let t=e.$implicit;oe(8),Ss(" ",t.descripcion," ")}}var RN=(()=>{class n{constructor(t){this.interestsService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.interests=[],this.myInterests=new ol,console.log(this.interestsService),this.interestsService.getInterests().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r,console.log(this.interests)})}AgregarJob(){this.myInterests.id?this.interestsService.update(this.myInterests.id,this.myInterests).then(()=>{console.log("Update successfully!"),this.resetForm()}):this.interestsService.createInterests(this.myInterests).then(()=>{console.log("Created successfully"),this.resetForm()})}deleteJob(t){this.interestsService.deleteInterests(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}edit(t){this.myInterests=P({},t),this.btntxt="Actualizar"}resetForm(){this.myInterests=new ol,this.btntxt="Agregar"}static{this.\u0275fac=function(r){return new(r||n)(ue(xN))}}static{this.\u0275cmp=mt({type:n,selectors:[["app-admin-interests"]],decls:13,vars:3,consts:[["interestForm","ngForm"],[1,"container","color-dark"],[1,"col3"],[1,"container","color-light"],[1,"form-box"],[3,"ngSubmit"],["type","text","name","descripcion","placeholder","Descripci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit"],[1,"col2"],["class","list-container",4,"ngFor","ngForOf"],[1,"list-container"],[1,"list-content"],[1,"list-actions"],[1,"btn-delete",3,"click"],[1,"btn-edit",3,"click"],[1,"list-text"]],template:function(r,i){if(r&1){let o=st();U(0,"div",1)(1,"div",2)(2,"p"),se(3,"Intereses registrados:"),$()()(),U(4,"div",3)(5,"div",4)(6,"form",5,0),Ae("ngSubmit",function(){return re(o),ie(i.AgregarJob())}),U(8,"input",6),xe("ngModelChange",function(a){return re(o),Re(i.myInterests.descripcion,a)||(i.myInterests.descripcion=a),ie(a)}),$(),U(9,"button",7),se(10),$()(),U(11,"div",8),hn(12,c3,9,1,"div",9),$()()()}r&2&&(oe(8),Me("ngModel",i.myInterests.descripcion),oe(2),gn(i.btntxt),oe(2),fn("ngForOf",i.interests))},dependencies:[Cn,Jt,xt,Yt,Zt,Bt,Ut],styles:[".container.color-light[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem 1rem}.form-box[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 12px #0000001a;max-width:500px;width:100%}.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-bottom:1rem;font-size:1rem;border:1px solid #ccc;border-radius:6px;transition:border-color .3s}.txt[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#007bff;color:#fff;font-size:1rem;border:none;border-radius:6px;cursor:pointer;transition:background .3s}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0056b3}.list-container[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:8px;padding:1rem;margin-top:1rem}.list-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.5rem}.list-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.list-text[_ngcontent-%COMP%]{flex-grow:1;font-size:.95rem;color:#333}.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:.4rem .9rem;border-radius:6px;font-size:.9rem;cursor:pointer}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#a71d2a}.btn-edit[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;padding:.4rem .9rem;border-radius:6px;font-size:.9rem;cursor:pointer}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#0d6e83}"]})}}return n})();var u3=[{path:"header",component:_N},{path:"workexperience",component:EN},{path:"education",component:DN},{path:"certificates",component:bN},{path:"skills",component:SN},{path:"languages",component:MN},{path:"interests",component:RN}],NN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=yt({type:n})}static{this.\u0275inj=gt({imports:[Bv.forRoot(u3),Bv]})}}return n})();var PN=(()=>{class n{constructor(){this.title="admin-cv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=mt({type:n,selectors:[["app-root"]],decls:27,vars:0,consts:[["routerLink","/header"],["routerLink","/workexperience"],["routerLink","/education"],["routerLink","/certificates"],["routerLink","/skills"],["routerLink","/languages"],["routerLink","/interests"]],template:function(r,i){r&1&&(U(0,"h3")(1,"b"),se(2," admin-Cv App "),$()(),U(3,"nav")(4,"ul")(5,"li")(6,"a",0),se(7," header "),$()(),U(8,"li")(9,"a",1),se(10," work-experience "),$()(),U(11,"li")(12,"a",2),se(13," education "),$()(),U(14,"li")(15,"a",3),se(16," certificates "),$()(),U(17,"li")(18,"a",4),se(19," skills "),$()(),U(20,"li")(21,"a",5),se(22," languages "),$()(),U(23,"li")(24,"a",6),se(25," interests "),$()()()(),pn(26,"router-outlet"))},dependencies:[Ov,IA]})}}return n})();var kN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=yt({type:n,bootstrap:[PN]})}static{this.\u0275inj=gt({providers:[sS()],imports:[iS,NN,MS,PS.initializeApp(kS.firebase)]})}}return n})();rS().bootstrapModule(kN,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
